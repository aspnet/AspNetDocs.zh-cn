---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: 使用两个 Dropdownlist (C#) 进行筛选母版/详细信息 |Microsoft Docs
author: rick-anderson
description: 本教程将延伸的母版/详细信息关系添加第三个层，使用两个 DropDownList 控件来选择所需的父级和祖父录制...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: 03d0cd7e835b5526af60a21679260f849714c37e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/17/2019
ms.locfileid: "59421285"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="308e3-103">使用两个 DropDownList 实现母版/详细信息筛选 (C#)</span><span class="sxs-lookup"><span data-stu-id="308e3-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="308e3-104">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="308e3-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="308e3-105">[下载示例应用程序](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe)或[下载 PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="308e3-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="308e3-106">本教程将延伸添加第三个层，使用两个 DropDownList 控件来选择所需的父级和祖父记录的母版/详细信息关系。</span><span class="sxs-lookup"><span data-stu-id="308e3-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>


## <a name="introduction"></a><span data-ttu-id="308e3-107">介绍</span><span class="sxs-lookup"><span data-stu-id="308e3-107">Introduction</span></span>

<span data-ttu-id="308e3-108">在中[前一篇教程](master-detail-filtering-with-a-dropdownlist-cs.md)中，我们探讨如何显示使用单个 DropDownList 填入的类别和 GridView 显示属于所选类别这些产品的简单母版/详细信息报表。</span><span class="sxs-lookup"><span data-stu-id="308e3-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="308e3-109">此报表模式适用于显示有一个对多关系，并且可以轻松扩展为包括多个到多关系的情况下工作的记录。</span><span class="sxs-lookup"><span data-stu-id="308e3-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="308e3-110">例如，订单输入系统必须与客户、 订单和订单行各项相对应的表。</span><span class="sxs-lookup"><span data-stu-id="308e3-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="308e3-111">给定的客户可能有多个与包含多个项的每个订单的订单。</span><span class="sxs-lookup"><span data-stu-id="308e3-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="308e3-112">此类数据可以显示具有两个 Dropdownlist 和 GridView 的用户。</span><span class="sxs-lookup"><span data-stu-id="308e3-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="308e3-113">第一个下拉列表将具有与第二个数据库中每个客户的列表项的内容正在所选客户的订单。</span><span class="sxs-lookup"><span data-stu-id="308e3-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="308e3-114">GridView 将列出所选订单中的行项。</span><span class="sxs-lookup"><span data-stu-id="308e3-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="308e3-115">虽然 Northwind 数据库包含中的规范客户/顺序/订单详细信息及其`Customers`， `Orders`，和`Order Details`表，这些表不在我们的体系结构中捕获。</span><span class="sxs-lookup"><span data-stu-id="308e3-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="308e3-116">尽管如此，我们仍可以说明使用两个依赖 Dropdownlist。</span><span class="sxs-lookup"><span data-stu-id="308e3-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="308e3-117">第一个下拉列表将列出的类别和第二个属于所选类别的产品。</span><span class="sxs-lookup"><span data-stu-id="308e3-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="308e3-118">在 DetailsView 将列出所选产品的详细信息。</span><span class="sxs-lookup"><span data-stu-id="308e3-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="308e3-119">步骤 1：创建和填充类别 DropDownList</span><span class="sxs-lookup"><span data-stu-id="308e3-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="308e3-120">我们的第一个目标是添加列出的类别 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="308e3-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="308e3-121">这些步骤已在前面的教程中，在详细信息中检查，但出于完整性的考虑摘要如下。</span><span class="sxs-lookup"><span data-stu-id="308e3-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="308e3-122">打开`MasterDetailsDetails.aspx`页中`Filtering`文件夹中，将 DropDownList 添加到页上，设置其`ID`属性设置为`Categories`，然后单击其智能标记中的配置数据源链接。</span><span class="sxs-lookup"><span data-stu-id="308e3-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="308e3-123">从数据源配置向导选择要添加新的数据源。</span><span class="sxs-lookup"><span data-stu-id="308e3-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>


<span data-ttu-id="308e3-124">[![为 DropDownList 添加新的数据源](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="308e3-125">**图 1**:为 DropDownList 添加新的数据源 ([单击此项可查看原尺寸图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>


<span data-ttu-id="308e3-126">新的数据源正常情况下，应 ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="308e3-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="308e3-127">命名此新 ObjectDataSource `CategoriesDataSource` ，并将其调用`CategoriesBLL`对象的`GetCategories()`方法。</span><span class="sxs-lookup"><span data-stu-id="308e3-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>


<span data-ttu-id="308e3-128">[![选择使用 CategoriesBLL 类](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="308e3-129">**图 2**:选择使用`CategoriesBLL`类 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>


<span data-ttu-id="308e3-130">[![配置对象数据源使用 GetCategories() 方法](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="308e3-131">**图 3**:配置为使用 ObjectDataSource`GetCategories()`方法 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>


<span data-ttu-id="308e3-132">配置 ObjectDataSource 后我们仍然需要指定哪些数据源字段应显示在`Categories`DropDownList 和哪一种应配置为列表项的值。</span><span class="sxs-lookup"><span data-stu-id="308e3-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="308e3-133">设置`CategoryName`字段与显示和`CategoryID`为每个列表项的值。</span><span class="sxs-lookup"><span data-stu-id="308e3-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="308e3-134">[![作为值的类别名称字段和使用 CategoryID 使 DropDownList 显示](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="308e3-135">**图 4**:使 DropDownList 显示`CategoryName`字段并使用`CategoryID`作为值 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>


<span data-ttu-id="308e3-136">现在我们有 DropDownList 控件 (`Categories`)，从记录将填充`Categories`表。</span><span class="sxs-lookup"><span data-stu-id="308e3-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="308e3-137">当用户选择从 DropDownList 我们要回发发生才能刷新产品 DropDownList，我们将在步骤 2 中创建新类别。</span><span class="sxs-lookup"><span data-stu-id="308e3-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="308e3-138">因此，应检查从启用自动回发选项`categories`DropDownList 的智能标记。</span><span class="sxs-lookup"><span data-stu-id="308e3-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>


<span data-ttu-id="308e3-139">[![启用的类别 DropDownList 的 AutoPostBack](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="308e3-140">**图 5**:启用为 AutoPostBack `Categories` DropDownList ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>


## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="308e3-141">步骤 2：在第二个 DropDownList 中显示所选的类别产品</span><span class="sxs-lookup"><span data-stu-id="308e3-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="308e3-142">使用`Categories`DropDownList 完成后，我们下一步将显示属于所选类别产品的 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="308e3-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="308e3-143">若要完成此操作，将另一个 DropDownList 添加到名为页`ProductsByCategory`。</span><span class="sxs-lookup"><span data-stu-id="308e3-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="308e3-144">如同`Categories`下拉列表中，创建的新 ObjectDataSource `ProductsByCategory` DropDownList 名为`ProductsByCategoryDataSource`。</span><span class="sxs-lookup"><span data-stu-id="308e3-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>


<span data-ttu-id="308e3-145">[![为 ProductsByCategory DropDownList 添加新的数据源](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="308e3-146">**图 6**:添加新的数据源`ProductsByCategory`DropDownList ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>


<span data-ttu-id="308e3-147">[![创建名为 ProductsByCategoryDataSource 新 ObjectDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="308e3-148">**图 7**:创建新对象数据源命名`ProductsByCategoryDataSource`([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>


<span data-ttu-id="308e3-149">由于`ProductsByCategory`DropDownList 需要显示属于所选类别的产品具有调用 ObjectDataSource`GetProductsByCategoryID(categoryID)`方法从`ProductsBLL`对象。</span><span class="sxs-lookup"><span data-stu-id="308e3-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>


<span data-ttu-id="308e3-150">[![选择使用 ProductsBLL 类](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="308e3-151">**图 8**:选择使用`ProductsBLL`类 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>


<span data-ttu-id="308e3-152">[![配置对象数据源使用 GetProductsByCategoryID(categoryID) 方法](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="308e3-153">**图 9**:配置为使用 ObjectDataSource`GetProductsByCategoryID(categoryID)`方法 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>


<span data-ttu-id="308e3-154">我们需要在向导的最后一步中指定的值*`categoryID`* 参数。</span><span class="sxs-lookup"><span data-stu-id="308e3-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="308e3-155">将此参数分配到中的选定项`Categories`DropDownList。</span><span class="sxs-lookup"><span data-stu-id="308e3-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>


<span data-ttu-id="308e3-156">[![从 Categories DropDownList 拉取 categoryID 参数值](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="308e3-157">**图 10**:拉取*`categoryID`* 参数值从`Categories`DropDownList ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>


<span data-ttu-id="308e3-158">使用 ObjectDataSource 配置，所有的就是以指定哪些数据源字段用于显示和 DropDownList 的项的值。</span><span class="sxs-lookup"><span data-stu-id="308e3-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="308e3-159">显示`ProductName`字段，并使用`ProductID`字段的值。</span><span class="sxs-lookup"><span data-stu-id="308e3-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>


<span data-ttu-id="308e3-160">[![指定用于 DropDownList 的 Listitem 文本和值属性的数据源字段](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="308e3-161">**图 11**:指定数据源字段使用 DropDownList `ListItem` s'`Text`和`Value`属性 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>


<span data-ttu-id="308e3-162">使用 ObjectDataSource 和`ProductsByCategory`DropDownList 配置我们的页面将显示两个 Dropdownlist： 第一个将所有类别列出，而第二个将列出属于所选类别的那些产品。</span><span class="sxs-lookup"><span data-stu-id="308e3-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="308e3-163">当用户从第一个下拉列表中选择新类别时，回发将会随之发生，并且第二个 DropDownList 将重新绑定，显示这些属于新选择的类别的产品。</span><span class="sxs-lookup"><span data-stu-id="308e3-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="308e3-164">图 12 和 13 显示`MasterDetailsDetails.aspx`中操作时的浏览器查看。</span><span class="sxs-lookup"><span data-stu-id="308e3-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>


<span data-ttu-id="308e3-165">[![当首次访问的页面，选择饮料类别](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="308e3-166">**图 12**:当首次访问的页面，选择饮料类别 ([单击此项可查看原尺寸图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>


<span data-ttu-id="308e3-167">[![如果选择了不同的类别显示该新类别的产品](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="308e3-168">**图 13**:选择不同的类别显示该新类别的产品 ([单击此项可查看原尺寸图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>


<span data-ttu-id="308e3-169">目前`productsByCategory`下拉列表中，更改时，does*不*引起回发。</span><span class="sxs-lookup"><span data-stu-id="308e3-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="308e3-170">但是，我们想为在回发发生后我们将添加 DetailsView 以显示所选的产品的详细信息 (步骤 3)。</span><span class="sxs-lookup"><span data-stu-id="308e3-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="308e3-171">因此，选中从启用自动回发复选框`productsByCategory`DropDownList 的智能标记。</span><span class="sxs-lookup"><span data-stu-id="308e3-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>


<span data-ttu-id="308e3-172">[![启用 productsByCategory DropDownList 的 AutoPostBack 功能](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="308e3-173">**图 14**:启用自动回发功能以`productsByCategory`DropDownList ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>


## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="308e3-174">步骤 3：使用 DetailsView 显示所选产品的详细信息</span><span class="sxs-lookup"><span data-stu-id="308e3-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="308e3-175">最后一步是在 DetailsView 中显示所选产品的详细信息。</span><span class="sxs-lookup"><span data-stu-id="308e3-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="308e3-176">若要实现此目的，添加到页面的 DetailsView，设置其`ID`属性设置为`ProductDetails`，并为其创建新对象数据源。</span><span class="sxs-lookup"><span data-stu-id="308e3-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="308e3-177">配置要从其数据提取此 ObjectDataSource`ProductsBLL`类的`GetProductByProductID(productID)`方法使用的所选的值`ProductsByCategory`的值的 DropDownList *`productID`* 参数。</span><span class="sxs-lookup"><span data-stu-id="308e3-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>


<span data-ttu-id="308e3-178">[![选择使用 ProductsBLL 类](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="308e3-179">**图 15**:选择使用`ProductsBLL`类 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>


<span data-ttu-id="308e3-180">[![配置对象数据源使用 GetProductByProductID(productID) 方法](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="308e3-181">**图 16**:配置为使用 ObjectDataSource`GetProductByProductID(productID)`方法 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>


<span data-ttu-id="308e3-182">[![从 ProductsByCategory DropDownList 拉取产品 id 参数值](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="308e3-183">**图 17**:拉取*`productID`* 参数值从`ProductsByCategory`DropDownList ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>


<span data-ttu-id="308e3-184">您可以选择在 DetailsView 中显示的任何可用字段。</span><span class="sxs-lookup"><span data-stu-id="308e3-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="308e3-185">我选择要删除`ProductID`， `SupplierID`，和`CategoryID`字段重新排序和格式设置剩余字段。</span><span class="sxs-lookup"><span data-stu-id="308e3-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="308e3-186">此外，我已清理 DetailsView`Height`和`Width`属性，允许 DetailsView 其数据，而不是让它大容量限制为指定的大小扩展到最佳显示效果所需的宽度。</span><span class="sxs-lookup"><span data-stu-id="308e3-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="308e3-187">完整的标记如下所示：</span><span class="sxs-lookup"><span data-stu-id="308e3-187">The full markup appears below:</span></span>


[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="308e3-188">请花费片刻时间来试用`MasterDetailsDetails.aspx`页在浏览器中。</span><span class="sxs-lookup"><span data-stu-id="308e3-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="308e3-189">乍一看上去一切根据需要，但没有一个细微的问题。</span><span class="sxs-lookup"><span data-stu-id="308e3-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="308e3-190">当你选择的新类别`ProductsByCategory`DropDownList 更新以包含所选的类别，这些产品，但`ProductDetails`DetailsView 继续显示以前的产品信息。</span><span class="sxs-lookup"><span data-stu-id="308e3-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="308e3-191">选择所选类别不同的产品时，会更新 DetailsView。</span><span class="sxs-lookup"><span data-stu-id="308e3-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="308e3-192">此外，如果不够全面测试，您会发现，如果你不断地选择新类别 (例如，选择从饮料`Categories`下拉列表中，然后调味品，然后糖果) 每个其他类别选择会导致`ProductDetails`DetailsView 刷新。</span><span class="sxs-lookup"><span data-stu-id="308e3-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="308e3-193">若要帮助具体化此问题，让我们看一下具体的示例。</span><span class="sxs-lookup"><span data-stu-id="308e3-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="308e3-194">当你首次访问页面时选择饮料类别和相关的产品加载中`ProductsByCategory`DropDownList。</span><span class="sxs-lookup"><span data-stu-id="308e3-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="308e3-195">Chai 是所选的产品，其详细信息显示在`ProductDetails`DetailsView，如图 18 中所示。</span><span class="sxs-lookup"><span data-stu-id="308e3-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>


<span data-ttu-id="308e3-196">[![在 DetailsView 中显示所选产品的详细信息](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="308e3-197">**图 18**:在 DetailsView 中显示所选产品的详细信息 ([单击此项可查看原尺寸图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>


<span data-ttu-id="308e3-198">如果更改类别选择从饮料为调味品，产生的回发和`ProductsByCategory`DropDownList 相应的更新，但 DetailsView 仍显示 Chai 的详细信息。</span><span class="sxs-lookup"><span data-stu-id="308e3-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>


<span data-ttu-id="308e3-199">[![仍显示了以前所选产品的详细信息](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="308e3-200">**图 19**:仍显示了以前所选产品的详细信息 ([单击此项可查看原尺寸图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>


<span data-ttu-id="308e3-201">选择列表中的新产品刷新 DetailsView，按预期方式。</span><span class="sxs-lookup"><span data-stu-id="308e3-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="308e3-202">如果更改该产品后选取新的类别，DetailsView 试不会刷新。</span><span class="sxs-lookup"><span data-stu-id="308e3-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="308e3-203">但是，如果而不是选择一种新产品选择新类别，将刷新 DetailsView。</span><span class="sxs-lookup"><span data-stu-id="308e3-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="308e3-204">世界上什么呢？</span><span class="sxs-lookup"><span data-stu-id="308e3-204">What in the world is going on here?</span></span>

<span data-ttu-id="308e3-205">问题是页面的生命周期中的计时问题。</span><span class="sxs-lookup"><span data-stu-id="308e3-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="308e3-206">每当请求页面时将经历多个步骤作为其呈现。</span><span class="sxs-lookup"><span data-stu-id="308e3-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="308e3-207">在以下步骤之一 ObjectDataSource 控制检查是否任何其`SelectParameters`值已更改。</span><span class="sxs-lookup"><span data-stu-id="308e3-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="308e3-208">如果这样，数据 Web 控件绑定到 ObjectDataSource 知道它需要刷新其显示。</span><span class="sxs-lookup"><span data-stu-id="308e3-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="308e3-209">例如，选择新类别时， `ProductsByCategoryDataSource` ObjectDataSource 检测到其参数值已更改和`ProductsByCategory`DropDownList 重新绑定本身，获取所选类别的产品。</span><span class="sxs-lookup"><span data-stu-id="308e3-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="308e3-210">在此情况下会出现的问题是 Objectdatasource 检查已更改的参数的页面生命周期中的点发生*之前*关联的数据 Web 控件的绑定。</span><span class="sxs-lookup"><span data-stu-id="308e3-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="308e3-211">因此，选择新类别时`ProductsByCategoryDataSource`ObjectDataSource 检测到更改时在其参数的值。</span><span class="sxs-lookup"><span data-stu-id="308e3-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="308e3-212">使用 ObjectDataSource `ProductDetails` DetailsView，但是，不会注意任何此类更改因为`ProductsByCategory`DropDownList 尚未重新绑定。</span><span class="sxs-lookup"><span data-stu-id="308e3-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="308e3-213">在生命周期中更高版本`ProductsByCategory`DropDownList 重新绑定到其对象数据源，获取新选定类别的产品。</span><span class="sxs-lookup"><span data-stu-id="308e3-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="308e3-214">虽然`ProductsByCategory`DropDownList 的值已更改， `ProductDetails` DetailsView 的 ObjectDataSource 已完成其参数值检查; 因此，DetailsView 显示其以前的结果。</span><span class="sxs-lookup"><span data-stu-id="308e3-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="308e3-215">这种交互如图 20 所示。</span><span class="sxs-lookup"><span data-stu-id="308e3-215">This interaction is depicted in Figure 20.</span></span>


<span data-ttu-id="308e3-216">[![ProductsByCategory DropDownList 值更改后 ProductDetails DetailsView ObjectDataSource 检查更改](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="308e3-217">**图 20**:`ProductsByCategory` DropDownList 值更改后`ProductDetails`DetailsView 的 ObjectDataSource 检查更改 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>


<span data-ttu-id="308e3-218">若要纠正此我们需要显式重新绑定`ProductDetails`之后的 DetailsView`ProductsByCategory`已绑定 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="308e3-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="308e3-219">我们可以完成此操作通过调用`ProductDetails`DetailsView 的`DataBind()`方法时`ProductsByCategory`DropDownList 的`DataBound`事件触发。</span><span class="sxs-lookup"><span data-stu-id="308e3-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="308e3-220">将以下事件处理程序代码添加到`MasterDetailsDetails.aspx`页面的代码隐藏类 (请参阅"[以编程方式设置 ObjectDataSource 的参数值](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)"有关如何添加事件处理程序的讨论):</span><span class="sxs-lookup"><span data-stu-id="308e3-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>


[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="308e3-221">此显式调用后`ProductDetails`DetailsView 的`DataBind()`方法已添加，本教程按预期方式工作。</span><span class="sxs-lookup"><span data-stu-id="308e3-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="308e3-222">图 21 突出显示此更改如何纠正我们早期的问题。</span><span class="sxs-lookup"><span data-stu-id="308e3-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>


<span data-ttu-id="308e3-223">[![ProductDetails DetailsView 是显式刷新时 ProductsByCategory DropDownList 的数据绑定事件触发](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="308e3-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="308e3-224">**图 21**:`ProductDetails` DetailsView 时，可以显式刷新`ProductsByCategory`DropDownList 的`DataBound`事件触发 ([单击以查看实际尺寸的图像](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="308e3-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>


## <a name="summary"></a><span data-ttu-id="308e3-225">总结</span><span class="sxs-lookup"><span data-stu-id="308e3-225">Summary</span></span>

<span data-ttu-id="308e3-226">DropDownList 是母版/详细信息报告一个理想的用户界面元素的母版和详细信息记录之间的一对多关系。</span><span class="sxs-lookup"><span data-stu-id="308e3-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="308e3-227">在前面的教程中，我们已了解如何使用一个 DropDownList 来筛选显示的所选类别的产品。</span><span class="sxs-lookup"><span data-stu-id="308e3-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="308e3-228">在本教程中，我们替换下拉列表中，为产品的 GridView 和 DetailsView 用于显示所选产品的详细信息。</span><span class="sxs-lookup"><span data-stu-id="308e3-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="308e3-229">在本教程中讨论的概念可以轻松地扩展到数据模型涉及多个到多关系，如客户、 订单和订单项。</span><span class="sxs-lookup"><span data-stu-id="308e3-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="308e3-230">一般情况下，始终可以添加一个对多关系中的"一"实体的每个的 DropDownList。</span><span class="sxs-lookup"><span data-stu-id="308e3-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="308e3-231">快乐编程 ！</span><span class="sxs-lookup"><span data-stu-id="308e3-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="308e3-232">关于作者</span><span class="sxs-lookup"><span data-stu-id="308e3-232">About the Author</span></span>

<span data-ttu-id="308e3-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)的七个部 asp/ASP.NET 书籍并创办了作者[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年以来一直致力于 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="308e3-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="308e3-234">Scott 是独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="308e3-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="308e3-235">他最新著作是[ *Sams Teach 自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="308e3-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="308e3-236">他可以到达[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="308e3-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="308e3-237">或通过他的博客，其中，请参阅[ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="308e3-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="308e3-238">特别感谢</span><span class="sxs-lookup"><span data-stu-id="308e3-238">Special Thanks To</span></span>

<span data-ttu-id="308e3-239">很多有用的审阅者已评审本系列教程。</span><span class="sxs-lookup"><span data-stu-id="308e3-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="308e3-240">本教程中的潜在顾客审阅者是 Hilton Giesenow。</span><span class="sxs-lookup"><span data-stu-id="308e3-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="308e3-241">是否有兴趣查看我即将推出的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="308e3-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="308e3-242">如果是这样，给我在行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="308e3-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="308e3-243">[上一页](master-detail-filtering-with-a-dropdownlist-cs.md)
> [下一页](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="308e3-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>
