---
uid: web-forms/overview/data-access/introduction/master-pages-and-site-navigation-cs
title: 母版页和站点导航（C#） |Microsoft Docs
author: rick-anderson
description: 用户友好网站的一项常见特征是，它们具有一致的站点范围的页面布局和导航方案。 本教程介绍了如何
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 5aee8202-a4e3-4aa9-8a95-cd5d156cea4c
msc.legacyurl: /web-forms/overview/data-access/introduction/master-pages-and-site-navigation-cs
msc.type: authoredcontent
ms.openlocfilehash: e1ddd43524a61ff2e012171eba1a8dc8efbf8f1d
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2020
ms.locfileid: "78426302"
---
# <a name="master-pages-and-site-navigation-c"></a><span data-ttu-id="f5f3c-104">母版页和站点导航 (C#)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-104">Master Pages and Site Navigation (C#)</span></span>

<span data-ttu-id="f5f3c-105">作者： [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f5f3c-106">[下载示例应用](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_3_CS.exe)或[下载 PDF](master-pages-and-site-navigation-cs/_static/datatutorial03cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-106">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_3_CS.exe) or [Download PDF](master-pages-and-site-navigation-cs/_static/datatutorial03cs1.pdf)</span></span>

> <span data-ttu-id="f5f3c-107">用户友好网站的一项常见特征是，它们具有一致的站点范围的页面布局和导航方案。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-107">One common characteristic of user-friendly websites is that they have a consistent, site-wide page layout and navigation scheme.</span></span> <span data-ttu-id="f5f3c-108">本教程介绍如何在可以轻松更新的所有页面上创建一致的外观。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-108">This tutorial looks at how you can create a consistent look and feel across all pages that can easily be updated.</span></span>

## <a name="introduction"></a><span data-ttu-id="f5f3c-109">简介</span><span class="sxs-lookup"><span data-stu-id="f5f3c-109">Introduction</span></span>

<span data-ttu-id="f5f3c-110">用户友好网站的一项常见特征是，它们具有一致的站点范围的页面布局和导航方案。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-110">One common characteristic of user-friendly websites is that they have a consistent, site-wide page layout and navigation scheme.</span></span> <span data-ttu-id="f5f3c-111">ASP.NET 2.0 引入了两项新功能，可大大简化站点范围的页面布局和导航方案：母版页和站点导航方案。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-111">ASP.NET 2.0 introduces two new features that greatly simplify implementing both a site-wide page layout and navigation scheme: master pages and site navigation.</span></span> <span data-ttu-id="f5f3c-112">母版页允许开发人员使用指定的可编辑区域创建站点范围的模板。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-112">Master pages allow for developers to create a site-wide template with designated editable regions.</span></span> <span data-ttu-id="f5f3c-113">然后，可以将此模板应用于站点中的 ASP.NET 页。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-113">This template can then be applied to ASP.NET pages in the site.</span></span> <span data-ttu-id="f5f3c-114">此类 ASP.NET 页面只需提供母版页的指定可编辑区域的内容。母版页中所有其他标记在使用母版页的所有 ASP.NET 页上都是相同的。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-114">Such ASP.NET pages need only provide content for the master page's specified editable regions all other markup in the master page is identical across all ASP.NET pages that use the master page.</span></span> <span data-ttu-id="f5f3c-115">此模型允许开发人员定义和集中站点范围的页面布局，从而更容易地在可以轻松更新的所有页面上创建一致的外观。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-115">This model allows developers to define and centralize a site-wide page layout, thereby making it easier to create a consistent look and feel across all pages that can easily be updated.</span></span>

<span data-ttu-id="f5f3c-116">[站点导航系统](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)为页面开发人员提供了一种机制，供页面开发人员定义站点地图和 API，以便以编程方式查询该站点地图。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-116">The [site navigation system](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx) provides both a mechanism for page developers to define a site map and an API for that site map to be programmatically queried.</span></span> <span data-ttu-id="f5f3c-117">使用新的导航 Web 控件 Menu、TreeView 和 SiteMapPath，可以轻松地在公共导航用户界面元素中呈现全部或部分站点地图。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-117">The new navigation Web controls the Menu, TreeView, and SiteMapPath make it easy to render all or part of the site map in a common navigation user interface element.</span></span> <span data-ttu-id="f5f3c-118">我们将使用默认的站点导航提供程序，这意味着我们的网站图将在 XML 格式的文件中定义。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-118">We'll be using the default site navigation provider, meaning that our site map will be defined in an XML-formatted file.</span></span>

<span data-ttu-id="f5f3c-119">为了说明这些概念并使我们的教程网站更易于使用，让我们在本课中定义站点范围的页面布局，实现站点地图，并添加导航 UI。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-119">To illustrate these concepts and make our tutorials website more usable, let's spend this lesson defining a site-wide page layout, implementing a site map, and adding the navigation UI.</span></span> <span data-ttu-id="f5f3c-120">在本教程结束时，我们将获得精美的网站设计，用于构建教程网页。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-120">By the end of this tutorial we'll have a polished website design for building our tutorial web pages.</span></span>

<span data-ttu-id="f5f3c-121">[![本教程的最终结果](master-pages-and-site-navigation-cs/_static/image2.png)](master-pages-and-site-navigation-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-121">[![The End Result of This Tutorial](master-pages-and-site-navigation-cs/_static/image2.png)](master-pages-and-site-navigation-cs/_static/image1.png)</span></span>

<span data-ttu-id="f5f3c-122">**图 1**：本教程的最终结果（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image3.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-122">**Figure 1**: The End Result of This Tutorial ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image3.png))</span></span>

## <a name="step-1-creating-the-master-page"></a><span data-ttu-id="f5f3c-123">步骤1：创建母版页</span><span class="sxs-lookup"><span data-stu-id="f5f3c-123">Step 1: Creating the Master Page</span></span>

<span data-ttu-id="f5f3c-124">第一步是创建站点的母版页。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-124">The first step is to create the master page for the site.</span></span> <span data-ttu-id="f5f3c-125">现在，我们的网站仅由类型化数据集（`Northwind.xsd`、`App_Code` 文件夹）、BLL 类（`ProductsBLL.cs`、`CategoriesBLL.cs`等，它们都在 `App_Code` 文件夹中）、数据库（`NORTHWND.MDF`文件夹中的 `App_Data`）、配置文件（`Web.config`）和 CSS 样式表文件（`Styles.css`）组成。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-125">Right now our website consists of only the Typed DataSet (`Northwind.xsd`, in the `App_Code` folder), the BLL classes (`ProductsBLL.cs`, `CategoriesBLL.cs`, and so on, all in the `App_Code` folder), the database (`NORTHWND.MDF`, in the `App_Data` folder), the configuration file (`Web.config`), and a CSS stylesheet file (`Styles.css`).</span></span> <span data-ttu-id="f5f3c-126">由于我们将在以后的教程中更详细地 reexamining 这些示例，我清理了从前两个教程中使用 DAL 和 BLL 演示的这些页面和文件。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-126">I cleaned out those pages and files demonstrating using the DAL and BLL from the first two tutorials since we will be reexamining those examples in greater detail in future tutorials.</span></span>

![项目中的文件](master-pages-and-site-navigation-cs/_static/image4.png)

<span data-ttu-id="f5f3c-128">**图 2**：项目中的文件</span><span class="sxs-lookup"><span data-stu-id="f5f3c-128">**Figure 2**: The Files in Our Project</span></span>

<span data-ttu-id="f5f3c-129">若要创建母版页，请在解决方案资源管理器中右键单击项目名称，然后选择 "添加新项"。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-129">To create a master page, right-click on the project name in the Solution Explorer and choose Add New Item.</span></span> <span data-ttu-id="f5f3c-130">然后从模板列表中选择 "母版页类型"，并将其命名 `Site.master`。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-130">Then select the Master Page type from the list of templates and name it `Site.master`.</span></span>

<span data-ttu-id="f5f3c-131">[![将新的母版页添加到网站](master-pages-and-site-navigation-cs/_static/image6.png)](master-pages-and-site-navigation-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-131">[![Add a New Master Page to the Website](master-pages-and-site-navigation-cs/_static/image6.png)](master-pages-and-site-navigation-cs/_static/image5.png)</span></span>

<span data-ttu-id="f5f3c-132">**图 3**：向网站添加新的母版页（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image7.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-132">**Figure 3**: Add a New Master Page to the Website ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image7.png))</span></span>

<span data-ttu-id="f5f3c-133">在此母版页中定义站点范围的页面布局。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-133">Define the site-wide page layout here in the master page.</span></span> <span data-ttu-id="f5f3c-134">您可以使用设计视图并添加所需的任何布局或 Web 控件，也可以手动在源视图中添加标记。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-134">You can use the Design view and add whatever Layout or Web controls you need, or you can manually add the markup by hand in the Source view.</span></span> <span data-ttu-id="f5f3c-135">在我的母版页中，我将[级联样式表](http://www.w3schools.com/css/default.asp)用于通过在外部文件 `Style.css`中定义的 CSS 设置来定位和样式。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-135">In my master page I use [cascading style sheets](http://www.w3schools.com/css/default.asp) for positioning and styles with the CSS settings defined in the external file `Style.css`.</span></span> <span data-ttu-id="f5f3c-136">虽然无法从下面显示的标记中进行说明，但定义了 CSS 规则，以便将导航 `<div>`的内容绝对定位，使其显示在左侧，并且固定宽度为200像素。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-136">While you cannot tell from the markup shown below, the CSS rules are defined such that the navigation `<div>`'s content is absolutely positioned so that it appears on the left and has a fixed width of 200 pixels.</span></span>

<span data-ttu-id="f5f3c-137">站点主</span><span class="sxs-lookup"><span data-stu-id="f5f3c-137">Site.master</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample1.aspx)]

<span data-ttu-id="f5f3c-138">母版页既定义静态页面布局，也定义可由使用母版页的 ASP.NET 页面编辑的区域。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-138">A master page defines both the static page layout and the regions that can be edited by the ASP.NET pages that use the master page.</span></span> <span data-ttu-id="f5f3c-139">这些内容可编辑区域由 ContentPlaceHolder 控件指示，可在内容 `<div>`中查看。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-139">These content editable regions are indicated by the ContentPlaceHolder control, which can be seen within the content `<div>`.</span></span> <span data-ttu-id="f5f3c-140">母版页有一个 ContentPlaceHolder （`MainContent`），但母版页的可能有多个 Contentplaceholder。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-140">Our master page has a single ContentPlaceHolder (`MainContent`), but master page's may have multiple ContentPlaceHolders.</span></span>

<span data-ttu-id="f5f3c-141">在上面输入的标记中，切换到设计视图显示母版页的布局。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-141">With the markup entered above, switching to the Design view shows the master page's layout.</span></span> <span data-ttu-id="f5f3c-142">使用此母版页的任何 ASP.NET 页面都将具有此统一布局，并能够指定 `MainContent` 区域的标记。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-142">Any ASP.NET pages that use this master page will have this uniform layout, with the ability to specify the markup for the `MainContent` region.</span></span>

<span data-ttu-id="f5f3c-143">[使用 "设计" 视图查看母版页 ![](master-pages-and-site-navigation-cs/_static/image9.png)](master-pages-and-site-navigation-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-143">[![The Master Page, When Viewed Through the Design View](master-pages-and-site-navigation-cs/_static/image9.png)](master-pages-and-site-navigation-cs/_static/image8.png)</span></span>

<span data-ttu-id="f5f3c-144">**图 4**：通过设计视图（[单击查看全尺寸图像](master-pages-and-site-navigation-cs/_static/image10.png)）查看的母版页</span><span class="sxs-lookup"><span data-stu-id="f5f3c-144">**Figure 4**: The Master Page, When Viewed Through the Design View ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image10.png))</span></span>

## <a name="step-2-adding-a-homepage-to-the-website"></a><span data-ttu-id="f5f3c-145">步骤2：将主页添加到网站</span><span class="sxs-lookup"><span data-stu-id="f5f3c-145">Step 2: Adding a Homepage to the Website</span></span>

<span data-ttu-id="f5f3c-146">定义母版页后，可以添加网站的 ASP.NET 页面。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-146">With the master page defined, we're ready to add the ASP.NET pages for the website.</span></span> <span data-ttu-id="f5f3c-147">首先，让我们添加 `Default.aspx`网站主页。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-147">Let's start by adding `Default.aspx`, our website's homepage.</span></span> <span data-ttu-id="f5f3c-148">右键单击 "解决方案资源管理器中的项目名称，然后选择" 添加新项 "。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-148">Right-click on the project name in the Solution Explorer and choose Add New Item.</span></span> <span data-ttu-id="f5f3c-149">从 "模板" 列表中选择 "Web 窗体" 选项，并将文件命名 `Default.aspx`。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-149">Pick the Web Form option from the template list and name the file `Default.aspx`.</span></span> <span data-ttu-id="f5f3c-150">同时，选中 "选择母版页" 复选框。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-150">Also, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="f5f3c-151">[![添加新的 Web 窗体，选中 "选择母版页" 复选框](master-pages-and-site-navigation-cs/_static/image12.png)](master-pages-and-site-navigation-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-151">[![Add a New Web Form, Checking the Select master page Checkbox](master-pages-and-site-navigation-cs/_static/image12.png)](master-pages-and-site-navigation-cs/_static/image11.png)</span></span>

<span data-ttu-id="f5f3c-152">**图 5**：添加新的 Web 窗体，选中 "选择母版页" 复选框（[单击查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image13.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-152">**Figure 5**: Add a New Web Form, Checking the Select master page Checkbox ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image13.png))</span></span>

<span data-ttu-id="f5f3c-153">单击 "确定" 按钮后，系统将要求您选择此新 ASP.NET 页应使用的母版页。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-153">After clicking the OK button, we're asked to choose what master page this new ASP.NET page should use.</span></span> <span data-ttu-id="f5f3c-154">虽然你的项目中可以有多个母版页，但我们只有一个母版页。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-154">While you can have multiple master pages in your project, we have only one.</span></span>

<span data-ttu-id="f5f3c-155">[![选择此 ASP.NET 页应使用的母版页](master-pages-and-site-navigation-cs/_static/image15.png)](master-pages-and-site-navigation-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-155">[![Choose the Master Page this ASP.NET Page Should Use](master-pages-and-site-navigation-cs/_static/image15.png)](master-pages-and-site-navigation-cs/_static/image14.png)</span></span>

<span data-ttu-id="f5f3c-156">**图 6**：选择此 ASP.NET 页应使用的母版页（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image16.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-156">**Figure 6**: Choose the Master Page this ASP.NET Page Should Use ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image16.png))</span></span>

<span data-ttu-id="f5f3c-157">选取母版页后，新的 ASP.NET 页面将包含以下标记：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-157">After picking the master page, the new ASP.NET pages will contain the following markup:</span></span>

<span data-ttu-id="f5f3c-158">Default.aspx</span><span class="sxs-lookup"><span data-stu-id="f5f3c-158">Default.aspx</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample2.aspx)]

<span data-ttu-id="f5f3c-159">在 `@Page` 指令中，有一个对使用的母版页文件的引用（`MasterPageFile="~/Site.master"`），ASP.NET 页的标记包含在母版页中定义的每个 ContentPlaceHolder 控件的内容控件，并 `ContentPlaceHolderID` 将内容控件映射到特定 ContentPlaceHolder。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-159">In the `@Page` directive there's a reference to the master page file used (`MasterPageFile="~/Site.master"`), and the ASP.NET page's markup contains a Content control for each of the ContentPlaceHolder controls defined in the master page, with the control's `ContentPlaceHolderID` mapping the Content control to a specific ContentPlaceHolder.</span></span> <span data-ttu-id="f5f3c-160">内容控件是您要在相应 ContentPlaceHolder 中显示的标记的位置。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-160">The Content control is where you place the markup you want to appear in the corresponding ContentPlaceHolder.</span></span> <span data-ttu-id="f5f3c-161">将 `@Page` 指令的 `Title` 属性设置为 Home，并向内容控件添加一些欢迎内容：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-161">Set the `@Page` directive's `Title` attribute to Home and add some welcoming content to the Content control:</span></span>

<span data-ttu-id="f5f3c-162">Default.aspx</span><span class="sxs-lookup"><span data-stu-id="f5f3c-162">Default.aspx</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample3.aspx)]

<span data-ttu-id="f5f3c-163">通过 `@Page` 指令中的 `Title` 属性，我们可以从 ASP.NET 页设置页面标题，即使在母版页中定义了 `<title>` 元素也是如此。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-163">The `Title` attribute in the `@Page` directive allows us to set the page's title from the ASP.NET page, even though the `<title>` element is defined in the master page.</span></span> <span data-ttu-id="f5f3c-164">还可以使用 `Page.Title`以编程方式设置标题。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-164">We can also set the title programmatically, using `Page.Title`.</span></span> <span data-ttu-id="f5f3c-165">另请注意，母版页对样式表的引用（如 `Style.css`）会自动更新，以便它们可以在任何 ASP.NET 页上工作，而与 ASP.NET 页相对于母版页的目录无关。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-165">Also note that the master page's references to stylesheets (such as `Style.css`) are automatically updated so that they work in any ASP.NET page, regardless of what directory the ASP.NET page is in relative to the master page.</span></span>

<span data-ttu-id="f5f3c-166">切换到设计视图可以看到页面在浏览器中的显示方式。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-166">Switching to the Design view we can see how our page will look in a browser.</span></span> <span data-ttu-id="f5f3c-167">请注意，在 "ASP.NET" 页的设计视图中，只有内容可编辑区域是可编辑的，在母版页中定义的非 ContentPlaceHolder 标记将灰显。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-167">Note that in the Design view for the ASP.NET page that only the content editable regions are editable the non-ContentPlaceHolder markup defined in the master page is grayed out.</span></span>

<span data-ttu-id="f5f3c-168">[!["ASP.NET" 页的 "设计" 视图显示可编辑区域和不可编辑区域](master-pages-and-site-navigation-cs/_static/image18.png)](master-pages-and-site-navigation-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-168">[![The Design View for the ASP.NET Page Shows Both the Editable and Non-Editable Regions](master-pages-and-site-navigation-cs/_static/image18.png)](master-pages-and-site-navigation-cs/_static/image17.png)</span></span>

<span data-ttu-id="f5f3c-169">**图 7**： "ASP.NET" 页的 "设计" 视图显示可编辑区域和不可编辑区域（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image19.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-169">**Figure 7**: The Design View for the ASP.NET Page Shows Both the Editable and Non-Editable Regions ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image19.png))</span></span>

<span data-ttu-id="f5f3c-170">当浏览器访问 `Default.aspx` 页面时，ASP.NET 引擎会自动合并页面的母版页内容和 ASP。NET 的内容，并将合并的内容呈现到发送给请求浏览器的最终 HTML 中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-170">When the `Default.aspx` page is visited by a browser, the ASP.NET engine automatically merges the page's master page content and the ASP.NET's content, and renders the merged content into the final HTML that is sent down to the requesting browser.</span></span> <span data-ttu-id="f5f3c-171">更新母版页的内容时，使用此母版页的所有 ASP.NET 页面将在下一次请求时将其内容 remerged 为新的母版页内容。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-171">When the master page's content is updated, all ASP.NET pages that use this master page will have their content remerged with the new master page content the next time they are requested.</span></span> <span data-ttu-id="f5f3c-172">简而言之，母版页模型允许定义单一页面布局模板（母版页），其更改会立即反映在整个站点中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-172">In short, the master page model allows for a single page layout template to be defined (the master page) whose changes are immediately reflected across the entire site.</span></span>

## <a name="adding-additional-aspnet-pages-to-the-website"></a><span data-ttu-id="f5f3c-173">向网站添加其他 ASP.NET 页面</span><span class="sxs-lookup"><span data-stu-id="f5f3c-173">Adding Additional ASP.NET Pages to the Website</span></span>

<span data-ttu-id="f5f3c-174">让我们花点时间将其他 ASP.NET 页面存根添加到站点，最终将保存各种报告演示。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-174">Let's take a moment to add additional ASP.NET page stubs to the site that will eventually hold the various reporting demos.</span></span> <span data-ttu-id="f5f3c-175">总共会有35个演示，而不是创建所有的存根页面，只需创建前几页即可。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-175">There will be more than 35 demos in total, so rather than creating all of the stub pages let's just create the first few.</span></span> <span data-ttu-id="f5f3c-176">由于还将有很多类别的演示，因此更好地管理演示添加类别的文件夹。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-176">Since there will also be many categories of demos, to better manage the demos add a folder for the categories.</span></span> <span data-ttu-id="f5f3c-177">现在添加以下三个文件夹：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-177">Add the following three folders for now:</span></span>

- `BasicReporting`
- `Filtering`
- `CustomFormatting`

<span data-ttu-id="f5f3c-178">最后，添加新文件，如图8中的解决方案资源管理器所示。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-178">Finally, add new files as shown in the Solution Explorer in Figure 8.</span></span> <span data-ttu-id="f5f3c-179">添加每个文件时，请记住选中 "选择母版页" 复选框。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-179">When adding each file, remember to check the "Select master page" checkbox.</span></span>

![添加以下文件](master-pages-and-site-navigation-cs/_static/image20.png)

<span data-ttu-id="f5f3c-181">**图 8**：添加以下文件</span><span class="sxs-lookup"><span data-stu-id="f5f3c-181">**Figure 8**: Add the Following Files</span></span>

## <a name="step-2-creating-a-site-map"></a><span data-ttu-id="f5f3c-182">步骤2：创建站点映射</span><span class="sxs-lookup"><span data-stu-id="f5f3c-182">Step 2: Creating a Site Map</span></span>

<span data-ttu-id="f5f3c-183">管理包含多个页面的网站的难题之一是为访问者提供一种直接的方法来浏览网站。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-183">One of the challenges of managing a website composed of more than a handful of pages is providing a straightforward way for visitors to navigate through the site.</span></span> <span data-ttu-id="f5f3c-184">首先，必须定义站点的导航结构。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-184">To begin with, the site's navigational structure must be defined.</span></span> <span data-ttu-id="f5f3c-185">接下来，必须将此结构转换为可导航的用户界面元素，例如菜单或痕迹导航。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-185">Next, this structure must be translated into navigable user interface elements, such as menus or breadcrumbs.</span></span> <span data-ttu-id="f5f3c-186">最后，在将新页面添加到站点并删除现有页面之前，需要维护和更新整个流程。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-186">Finally, this whole process needs to be maintained and updated as new pages are added to the site and existing ones removed.</span></span> <span data-ttu-id="f5f3c-187">在 ASP.NET 2.0 之前，开发人员自行负责创建网站的导航结构，对其进行维护，并将其转换为可导航的用户界面元素。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-187">Prior to ASP.NET 2.0, developers were on their own for creating the site's navigational structure, maintaining it, and translating it into navigable user interface elements.</span></span> <span data-ttu-id="f5f3c-188">但对于 ASP.NET 2.0，开发人员可以利用非常灵活的内置站点导航系统。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-188">With ASP.NET 2.0, however, developers can utilize the very flexible built in site navigation system.</span></span>

<span data-ttu-id="f5f3c-189">ASP.NET 2.0 站点导航系统为开发人员提供了一种方法，用于定义站点地图，然后通过编程 API 访问此信息。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-189">The ASP.NET 2.0 site navigation system provides a means for a developer to define a site map and to then access this information through a programmatic API.</span></span> <span data-ttu-id="f5f3c-190">ASP.NET 附带了一个站点地图提供程序，该提供程序希望站点地图数据存储在以特定方式进行格式化的 XML 文件中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-190">ASP.NET ships with a site map provider that expects site map data to be stored in an XML file formatted in a particular way.</span></span> <span data-ttu-id="f5f3c-191">但由于站点导航系统是在[提供程序模型](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)的基础上构建的，因此可以对其进行扩展，以支持序列化站点地图信息的替代方法。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-191">But, since the site navigation system is built on the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx) it can be extended to support alternative ways for serializing the site map information.</span></span> <span data-ttu-id="f5f3c-192">Jeff Prosise 的文章中，[你已在等待的 SQL 站点地图提供程序](https://msdn.microsoft.com/msdnmag/issues/06/02/WickedCode/default.aspx)演示了如何创建一个站点地图提供程序，用于将站点地图存储在 SQL Server 数据库中;另一种方法是[基于文件系统结构创建站点地图提供程序](http://aspnet.4guysfromrolla.com/articles/020106-1.aspx)。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-192">Jeff Prosise's article, [The SQL Site Map Provider You've Been Waiting For](https://msdn.microsoft.com/msdnmag/issues/06/02/WickedCode/default.aspx) shows how to create a site map provider that stores the site map in a SQL Server database; another option is to create [a site map provider based on the file system structure](http://aspnet.4guysfromrolla.com/articles/020106-1.aspx).</span></span>

<span data-ttu-id="f5f3c-193">但对于本教程，我们将使用 ASP.NET 2.0 附带的默认站点地图提供程序。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-193">For this tutorial, however, let's use the default site map provider that ships with ASP.NET 2.0.</span></span> <span data-ttu-id="f5f3c-194">若要创建站点地图，只需右键单击 "解决方案资源管理器中的项目名称，选择" 添加新项 "，然后选择" 站点地图 "选项。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-194">To create the site map, simply right-click on the project name in the Solution Explorer, choose Add New Item, and choose the Site Map option.</span></span> <span data-ttu-id="f5f3c-195">将名称保留为 "`Web.sitemap`"，然后单击 "添加" 按钮。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-195">Leave the name as `Web.sitemap` and click the Add button.</span></span>

<span data-ttu-id="f5f3c-196">[![将网站图添加到你的项目](master-pages-and-site-navigation-cs/_static/image22.png)](master-pages-and-site-navigation-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-196">[![Add a Site Map to Your Project](master-pages-and-site-navigation-cs/_static/image22.png)](master-pages-and-site-navigation-cs/_static/image21.png)</span></span>

<span data-ttu-id="f5f3c-197">**图 9**：向项目添加站点地图（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image23.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-197">**Figure 9**: Add a Site Map to Your Project ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image23.png))</span></span>

<span data-ttu-id="f5f3c-198">站点地图文件是一个 XML 文件。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-198">The site map file is an XML file.</span></span> <span data-ttu-id="f5f3c-199">请注意，Visual Studio 为站点地图结构提供 IntelliSense。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-199">Note that Visual Studio provides IntelliSense for the site map structure.</span></span> <span data-ttu-id="f5f3c-200">站点地图文件必须将 `<siteMap>` 节点作为根节点，该节点必须正好包含一个 `<siteMapNode>` 子元素。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-200">The site map file must have the `<siteMap>` node as its root node, which must contain precisely one `<siteMapNode>` child element.</span></span> <span data-ttu-id="f5f3c-201">首先 `<siteMapNode>` 元素可以包含任意数量的后代 `<siteMapNode>` 元素。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-201">That first `<siteMapNode>` element can then contain an arbitrary number of descendent `<siteMapNode>` elements.</span></span>

<span data-ttu-id="f5f3c-202">定义用于模拟文件系统结构的站点地图。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-202">Define the site map to mimic the file system structure.</span></span> <span data-ttu-id="f5f3c-203">也就是说，为三个文件夹中的每个文件夹添加一个 `<siteMapNode>` 元素，为这些文件夹中的每个 ASP.NET 页面添加子 `<siteMapNode>` 元素，如下所示：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-203">That is, add a `<siteMapNode>` element for each of the three folders, and child `<siteMapNode>` elements for each of the ASP.NET pages in those folders, like so:</span></span>

<span data-ttu-id="f5f3c-204">Web.sitemap</span><span class="sxs-lookup"><span data-stu-id="f5f3c-204">Web.sitemap</span></span>

[!code-xml[Main](master-pages-and-site-navigation-cs/samples/sample4.xml)]

<span data-ttu-id="f5f3c-205">站点地图定义网站的导航结构，该结构是描述网站各个部分的层次结构。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-205">The site map defines the website's navigational structure, which is a hierarchy that describes the various sections of the site.</span></span> <span data-ttu-id="f5f3c-206">`Web.sitemap` 中的每个 `<siteMapNode>` 元素都表示站点的导航结构中的一个部分。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-206">Each `<siteMapNode>` element in `Web.sitemap` represents a section in the site's navigational structure.</span></span>

<span data-ttu-id="f5f3c-207">[![站点地图表示分层导航结构](master-pages-and-site-navigation-cs/_static/image25.png)](master-pages-and-site-navigation-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-207">[![The Site Map Represents a Hierarchical Navigational Structure](master-pages-and-site-navigation-cs/_static/image25.png)](master-pages-and-site-navigation-cs/_static/image24.png)</span></span>

<span data-ttu-id="f5f3c-208">**图 10**：站点地图表示分层的导航结构（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image26.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-208">**Figure 10**: The Site Map Represents a Hierarchical Navigational Structure ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image26.png))</span></span>

<span data-ttu-id="f5f3c-209">ASP.NET 通过 .NET Framework 的[站点地图类](https://msdn.microsoft.com/library/system.web.sitemap.aspx)公开站点地图的结构。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-209">ASP.NET exposes the site map's structure through the .NET Framework's [SiteMap class](https://msdn.microsoft.com/library/system.web.sitemap.aspx).</span></span> <span data-ttu-id="f5f3c-210">此类具有一个 `CurrentNode` 属性，该属性返回有关用户当前访问的部分的信息;`RootNode` 属性返回站点图的根（在我们的站点图中）。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-210">This class has a `CurrentNode` property, which returns information about the section the user is currently visiting; the `RootNode` property returns the root of the site map (Home, in our site map).</span></span> <span data-ttu-id="f5f3c-211">`CurrentNode` 和 `RootNode` 属性都返回[SiteMapNode](https://msdn.microsoft.com/library/system.web.sitemapnode.aspx)实例，这些实例具有 `ParentNode`、`ChildNodes`、`NextSibling`、`PreviousSibling`等属性，从而允许遍历站点地图层次结构。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-211">Both the `CurrentNode` and `RootNode` properties return [SiteMapNode](https://msdn.microsoft.com/library/system.web.sitemapnode.aspx) instances, which have properties like `ParentNode`, `ChildNodes`, `NextSibling`, `PreviousSibling`, and so on, that allow for the site map hierarchy to be walked.</span></span>

## <a name="step-3-displaying-a-menu-based-on-the-site-map"></a><span data-ttu-id="f5f3c-212">步骤3：基于站点地图显示菜单</span><span class="sxs-lookup"><span data-stu-id="f5f3c-212">Step 3: Displaying a Menu Based on the Site Map</span></span>

<span data-ttu-id="f5f3c-213">访问 ASP.NET 2.0 中的数据可通过编程方式（如 ASP.NET 1.x）或通过新[数据源控件](https://msdn.microsoft.com/library/ms227679.aspx)以声明方式完成。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-213">Accessing data in ASP.NET 2.0 can be accomplished programmatically, like in ASP.NET 1.x, or declaratively, through the new [data source controls](https://msdn.microsoft.com/library/ms227679.aspx).</span></span> <span data-ttu-id="f5f3c-214">有几个内置的数据源控件，如 SqlDataSource 控件、用于访问关系数据库数据的数据源控件、ObjectDataSource 控件、用于从类访问数据的控件等。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-214">There are several built-in data source controls such as the SqlDataSource control, for accessing relational database data, the ObjectDataSource control, for accessing data from classes, and others.</span></span> <span data-ttu-id="f5f3c-215">你甚至可以创建自己的[自定义数据源控件](https://msdn.microsoft.com/asp.net/reference/data/default.aspx?pull=/library/dnvs05/html/DataSourceCon1.asp)。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-215">You can even create your own [custom data source controls](https://msdn.microsoft.com/asp.net/reference/data/default.aspx?pull=/library/dnvs05/html/DataSourceCon1.asp).</span></span>

<span data-ttu-id="f5f3c-216">数据源控件充当 ASP.NET 页与基础数据之间的代理。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-216">The data source controls serve as a proxy between your ASP.NET page and the underlying data.</span></span> <span data-ttu-id="f5f3c-217">为了显示数据源控件检索到的数据，通常会将另一个 Web 控件添加到页面，并将其绑定到数据源控件。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-217">In order to display a data source control's retrieved data, we'll typically add another Web control to the page and bind it to the data source control.</span></span> <span data-ttu-id="f5f3c-218">若要将 Web 控件绑定到数据源控件，只需将 Web 控件的 `DataSourceID` 属性设置为数据源控件的 `ID` 属性的值。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-218">To bind a Web control to a data source control, simply set the Web control's `DataSourceID` property to the value of the data source control's `ID` property.</span></span>

<span data-ttu-id="f5f3c-219">为了帮助处理网站图的数据，ASP.NET 包含 SiteMapDataSource 控件，该控件允许我们将 Web 控件绑定到网站的网站图。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-219">To aid in working with the site map's data, ASP.NET includes the SiteMapDataSource control, which allows us to bind a Web control against our website's site map.</span></span> <span data-ttu-id="f5f3c-220">两个 Web 控件 TreeView 和菜单通常用于提供导航用户界面。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-220">Two Web controls the TreeView and Menu are commonly used to provide a navigation user interface.</span></span> <span data-ttu-id="f5f3c-221">若要将站点地图数据绑定到这两个控件之一，只需将 SiteMapDataSource 添加到页面，并将其设置为 `DataSourceID` 属性的 TreeView 或 Menu 控件。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-221">To bind the site map data to one of these two controls, simply add a SiteMapDataSource to the page along with a TreeView or Menu control whose `DataSourceID` property is set accordingly.</span></span> <span data-ttu-id="f5f3c-222">例如，我们可以使用以下标记向母版页添加菜单控件：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-222">For example, we could add a Menu control to the master page using the following markup:</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample5.aspx)]

<span data-ttu-id="f5f3c-223">为了更好地控制发出的 HTML，我们可以将 SiteMapDataSource 控件绑定到 Repeater 控件，如下所示：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-223">For a finer degree of control over the emitted HTML, we can bind the SiteMapDataSource control to the Repeater control, like so:</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample6.aspx)]

<span data-ttu-id="f5f3c-224">SiteMapDataSource 控件一次返回一个级别的站点地图层次结构，从根站点地图节点开始（在我们的站点映射中），然后是下一级别（基本报表、筛选报表和自定义格式设置）等。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-224">The SiteMapDataSource control returns the site map hierarchy one level at a time, starting with the root site map node (Home, in our site map), then the next level (Basic Reporting, Filtering Reports, and Customized Formatting), and so on.</span></span> <span data-ttu-id="f5f3c-225">将 SiteMapDataSource 绑定到中继器时，它会枚举返回的第一个级别，并实例化第一个级别中每个 `SiteMapNode` 实例的 `ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-225">When binding the SiteMapDataSource to a Repeater, it enumerates the first level returned and instantiates the `ItemTemplate` for each `SiteMapNode` instance in that first level.</span></span> <span data-ttu-id="f5f3c-226">若要访问 `SiteMapNode`的特定属性，我们可以使用 `Eval(propertyName)`，这就是我们为每个 `SiteMapNode`的 `Url` 和 `Title` 属性获取 HyperLink 控件的方式。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-226">To access a particular property of the `SiteMapNode`, we can use `Eval(propertyName)`, which is how we get each `SiteMapNode`'s `Url` and `Title` properties for the HyperLink control.</span></span>

<span data-ttu-id="f5f3c-227">上述中继器示例将呈现以下标记：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-227">The Repeater example above will render the following markup:</span></span>

[!code-html[Main](master-pages-and-site-navigation-cs/samples/sample7.html)]

<span data-ttu-id="f5f3c-228">这些站点地图节点（基本报表、筛选报表和自定义格式设置）构成了呈现的*第二级*站点映射，而不是第一个。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-228">These site map nodes (Basic Reporting, Filtering Reports, and Customized Formatting) comprise the *second* level of the site map being rendered, not the first.</span></span> <span data-ttu-id="f5f3c-229">这是因为 SiteMapDataSource 的 `ShowStartingNode` 属性设置为 False，导致 SiteMapDataSource 绕过根站点地图节点，而是首先返回站点地图层次结构中的第二个级别。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-229">This is because the SiteMapDataSource's `ShowStartingNode` property is set to False, causing the SiteMapDataSource to bypass the root site map node and instead begin by returning the second level in the site map hierarchy.</span></span>

<span data-ttu-id="f5f3c-230">若要显示基本报表、筛选报表和自定义格式 `SiteMapNode` 的子节点，可以将另一个 Repeater 添加到初始 Repeater 的 `ItemTemplate`中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-230">To display the children for the Basic Reporting, Filtering Reports, and Customized Formatting `SiteMapNode` s, we can add another Repeater to the initial Repeater's `ItemTemplate`.</span></span> <span data-ttu-id="f5f3c-231">此第二个 Repeater 将绑定到 `SiteMapNode` 实例的 `ChildNodes` 属性，如下所示：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-231">This second Repeater will be bound to the `SiteMapNode` instance's `ChildNodes` property, like so:</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample8.aspx)]

<span data-ttu-id="f5f3c-232">这两个中继器会生成以下标记（为了简洁起见，已经删除了某些标记）：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-232">These two Repeaters result in the following markup (some markup has been removed for brevity):</span></span>

[!code-html[Main](master-pages-and-site-navigation-cs/samples/sample9.html)]

<span data-ttu-id="f5f3c-233">使用从[Rachel Andrew](http://www.rachelandrew.co.uk/)的书籍中选择的 CSS 样式[css Anthology：101基本提示、技巧、&amp; 黑客](https://www.amazon.com/gp/product/0957921888/qid=1137565739/sr=8-1/ref=pd_bbs_1/103-0562306-3386214?n=507846&amp;s=books&amp;v=glance)、`<ul>` 和 `<li>` 元素的样式，以使标记产生以下视觉输出：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-233">Using CSS styles chosen from [Rachel Andrew](http://www.rachelandrew.co.uk/)'s book [The CSS Anthology: 101 Essential Tips, Tricks, &amp; Hacks](https://www.amazon.com/gp/product/0957921888/qid=1137565739/sr=8-1/ref=pd_bbs_1/103-0562306-3386214?n=507846&amp;s=books&amp;v=glance), the `<ul>` and `<li>` elements are styled such that the markup produces the following visual output:</span></span>

![由两个中继器和一些 CSS 组成的菜单](master-pages-and-site-navigation-cs/_static/image27.png)

<span data-ttu-id="f5f3c-235">**图 11**：由两个中继器和一些 CSS 组成的菜单</span><span class="sxs-lookup"><span data-stu-id="f5f3c-235">**Figure 11**: A Menu Composed from Two Repeaters and Some CSS</span></span>

<span data-ttu-id="f5f3c-236">此菜单位于母版页中并绑定到 `Web.sitemap`中定义的站点图，这意味着对站点图的任何更改将立即反映在使用 `Site.master` 母版页的所有页面上。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-236">This menu is in the master page and bound to the site map defined in `Web.sitemap`, meaning that any change to the site map will be immediately reflected on all pages that use the `Site.master` master page.</span></span>

## <a name="disabling-viewstate"></a><span data-ttu-id="f5f3c-237">禁用 ViewState</span><span class="sxs-lookup"><span data-stu-id="f5f3c-237">Disabling ViewState</span></span>

<span data-ttu-id="f5f3c-238">所有 ASP.NET 控件都可以选择将其状态保存到[视图状态](https://msdn.microsoft.com/msdnmag/issues/03/02/CuttingEdge/)，该状态在呈现的 HTML 中序列化为隐藏的窗体字段。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-238">All ASP.NET controls can optionally persist their state to the [view state](https://msdn.microsoft.com/msdnmag/issues/03/02/CuttingEdge/), which is serialized as a hidden form field in the rendered HTML.</span></span> <span data-ttu-id="f5f3c-239">视图状态由控件用来记住跨回发的以编程方式更改的状态，例如绑定到数据 Web 控件的数据。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-239">View state is used by controls to remember their programmatically-changed state across postbacks, such as the data bound to a data Web control.</span></span> <span data-ttu-id="f5f3c-240">当视图状态允许跨回发记住信息时，它会增加必须发送到客户端的标记的大小，并且如果未经过密切监视，则可能会导致严重页面膨胀。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-240">While view state permits information to be remembered across postbacks, it increases the size of the markup that must be sent to the client and can lead to severe page bloat if not closely monitored.</span></span> <span data-ttu-id="f5f3c-241">对于将数十个额外的标记添加到页面中，数据 Web 控件（特别是 GridView）尤其棘手。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-241">Data Web controls especially the GridView are particularly notorious for adding dozens of extra kilobytes of markup to a page.</span></span> <span data-ttu-id="f5f3c-242">虽然宽带或 intranet 用户的此类增长可能会忽略不计，但对于拨号用户，视图状态可能会在往返行程中增加几秒钟。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-242">While such an increase may be negligible for broadband or intranet users, view state can add several seconds to the round trip for dial-up users.</span></span>

<span data-ttu-id="f5f3c-243">若要查看视图状态的影响，请访问浏览器中的页面，然后查看网页发送的源（在 Internet Explorer 中，单击 "查看" 菜单，然后选择 "源" 选项）。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-243">To see the impact of view state, visit a page in a browser and then view the source sent by the web page (in Internet Explorer, go to the View menu and choose the Source option).</span></span> <span data-ttu-id="f5f3c-244">还可以打开[页面跟踪](https://msdn.microsoft.com/library/sfbfw58f.aspx)，查看页面上每个控件使用的视图状态分配。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-244">You can also turn on [page tracing](https://msdn.microsoft.com/library/sfbfw58f.aspx) to see the view state allocation used by each of the controls on the page.</span></span> <span data-ttu-id="f5f3c-245">视图状态信息在名为 `__VIEWSTATE`的隐藏窗体字段中序列化，该字段位于开始 `<form>` 标记后面的 `<div>` 元素中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-245">The view state information is serialized in a hidden form field named `__VIEWSTATE`, located in a `<div>` element immediately after the opening `<form>` tag.</span></span> <span data-ttu-id="f5f3c-246">仅当使用 Web 窗体时才会保留视图状态;如果 ASP.NET 页在其声明性语法中不包含 `<form runat="server">`，则在呈现的标记中将不会有 `__VIEWSTATE` 的隐藏窗体字段。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-246">View state is only persisted when there is a Web Form being used; if your ASP.NET page does not include a `<form runat="server">` in its declarative syntax there won't be a `__VIEWSTATE` hidden form field in the rendered markup.</span></span>

<span data-ttu-id="f5f3c-247">母版页生成的 `__VIEWSTATE` 窗体字段向页面的生成标记添加大约1800字节。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-247">The `__VIEWSTATE` form field generated by the master page adds roughly 1,800 bytes to the page's generated markup.</span></span> <span data-ttu-id="f5f3c-248">由于 SiteMapDataSource 控件的内容将保留在视图状态中，因此这一额外的膨胀主要是在 Repeater 控件中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-248">This extra bloat is due primarily to the Repeater control, as the contents of the SiteMapDataSource control are persisted to view state.</span></span> <span data-ttu-id="f5f3c-249">尽管额外的1800字节可能并不太大，但在使用包含多个字段和记录的 GridView 时，视图状态可以通过10个或更多的因子轻松 swell。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-249">While an extra 1,800 bytes may not seem like much to get excited about, when using a GridView with many fields and records, the view state can easily swell by a factor of 10 or more.</span></span>

<span data-ttu-id="f5f3c-250">可以通过将 `EnableViewState` 属性设置为 `false`来禁用页或控件级别的视图状态，从而减少所呈现标记的大小。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-250">View state can be disabled at the page or control level by setting the `EnableViewState` property to `false`, thereby reducing the size of the rendered markup.</span></span> <span data-ttu-id="f5f3c-251">由于数据 Web 控件的视图状态会在每次回发时将绑定到数据 Web 控件的数据保持不变，因此，在为数据 Web 控件禁用视图状态时，必须在每个回发上绑定数据。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-251">Since the view state for a data Web control persists the data bound to the data Web control across postbacks, when disabling the view state for a data Web control the data must be bound on each and every postback.</span></span> <span data-ttu-id="f5f3c-252">在 ASP.NET 版本1.x 中，此责任落在页面开发人员的需要肩负上;但对于 ASP.NET 2.0，数据 Web 控件将在每次回发时重新绑定到其数据源控件（如果需要）。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-252">In ASP.NET version 1.x this responsibility fell on the shoulders of the page developer; with ASP.NET 2.0, however, the data Web controls will rebind to their data source control on each postback if needed.</span></span>

<span data-ttu-id="f5f3c-253">若要缩小页面的视图状态，请将 Repeater 控件的 `EnableViewState` 属性设置为 `false`。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-253">To reduce the page's view state let's set the Repeater control's `EnableViewState` property to `false`.</span></span> <span data-ttu-id="f5f3c-254">可以通过设计器中的属性窗口或在源视图中以声明方式完成此操作。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-254">This can be done through the Properties window in the Designer or declaratively in the Source view.</span></span> <span data-ttu-id="f5f3c-255">做出此更改后，中继器的声明性标记应如下所示：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-255">After making this change the Repeater's declarative markup should look like:</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample10.aspx)]

<span data-ttu-id="f5f3c-256">在此更改后，页面的呈现视图状态大小已缩小为仅52字节，而视图状态大小节省97%！</span><span class="sxs-lookup"><span data-stu-id="f5f3c-256">After this change, the page's rendered view state size has shrunk to a mere 52 bytes, a 97% savings in view state size!</span></span> <span data-ttu-id="f5f3c-257">在本系列教程中，我们默认禁用数据 Web 控件的视图状态，以便减小呈现的标记的大小。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-257">In the tutorials throughout this series we'll disable the view state of the data Web controls by default in order to reduce the size of the rendered markup.</span></span> <span data-ttu-id="f5f3c-258">在大多数示例中，`EnableViewState` 属性将设置为 `false` 并完成，而不提及。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-258">In the majority of the examples the `EnableViewState` property will be set to `false` and done so without mention.</span></span> <span data-ttu-id="f5f3c-259">只有在启用视图状态时，才会对其进行讨论，以便数据 Web 控件能够提供其预期功能。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-259">The only time view state will be discussed is in scenarios where it must be enabled in order for the data Web control to provide its expected functionality.</span></span>

## <a name="step-4-adding-breadcrumb-navigation"></a><span data-ttu-id="f5f3c-260">步骤4：添加痕迹导航</span><span class="sxs-lookup"><span data-stu-id="f5f3c-260">Step 4: Adding Breadcrumb Navigation</span></span>

<span data-ttu-id="f5f3c-261">若要完成母版页，请向每个页面添加一个痕迹导航 UI 元素。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-261">To complete the master page, let's add a breadcrumb navigation UI element to each page.</span></span> <span data-ttu-id="f5f3c-262">痕迹导航会快速向用户显示其在站点层次结构中的当前位置。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-262">The breadcrumb quickly shows users their current position within the site hierarchy.</span></span> <span data-ttu-id="f5f3c-263">在 ASP.NET 2.0 中添加痕迹只是将 SiteMapPath 控件添加到页面上;无需任何代码。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-263">Adding a breadcrumb in ASP.NET 2.0 is easy just add a SiteMapPath control to the page; no code is needed.</span></span>

<span data-ttu-id="f5f3c-264">对于我们的站点，请将此控件添加到标头 `<div>`：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-264">For our site, add this control to the header `<div>`:</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample11.aspx)]

<span data-ttu-id="f5f3c-265">痕迹导航显示用户在站点图层次结构中访问的当前页面以及该站点地图节点的 "上级"，一直到根节点（位于我们的站点图中）。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-265">The breadcrumb shows the current page the user is visiting in the site map hierarchy as well as that site map node's "ancestors," all the way up to the root (Home, in our site map).</span></span>

![痕迹导航显示当前页及其在站点地图层次结构中的上级](master-pages-and-site-navigation-cs/_static/image28.png)

<span data-ttu-id="f5f3c-267">**图 12**：痕迹导航显示当前页及其在站点地图层次结构中的上级</span><span class="sxs-lookup"><span data-stu-id="f5f3c-267">**Figure 12**: The Breadcrumb Displays the Current Page and its Ancestors in the Site Map Hierarchy</span></span>

## <a name="step-5-adding-the-default-page-for-each-section"></a><span data-ttu-id="f5f3c-268">步骤5：为每个部分添加默认页面</span><span class="sxs-lookup"><span data-stu-id="f5f3c-268">Step 5: Adding the Default Page for Each Section</span></span>

<span data-ttu-id="f5f3c-269">我们的网站中的教程划分为不同类别的基本报告、筛选、自定义格式等，并使用每个类别的文件夹和相应教程作为该文件夹中的 ASP.NET 页面。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-269">The tutorials in our site are broken down into different categories Basic Reporting, Filtering, Custom Formatting, and so on with a folder for each category and the corresponding tutorials as ASP.NET pages within that folder.</span></span> <span data-ttu-id="f5f3c-270">此外，每个文件夹都包含一个 `Default.aspx` 页面。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-270">Additionally, each folder contains a `Default.aspx` page.</span></span> <span data-ttu-id="f5f3c-271">对于此默认页面，我们将显示当前部分的所有教程。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-271">For this default page, let's display all of the tutorials for the current section.</span></span> <span data-ttu-id="f5f3c-272">也就是说，对于 `BasicReporting` 文件夹中的 `Default.aspx`，我们需要链接到 `SimpleDisplay.aspx`、`DeclarativeParams.aspx`和 `ProgrammaticParams.aspx`。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-272">That is, for the `Default.aspx` in the `BasicReporting` folder we'd have links to `SimpleDisplay.aspx`, `DeclarativeParams.aspx`, and `ProgrammaticParams.aspx`.</span></span> <span data-ttu-id="f5f3c-273">接下来，我们可以使用 `SiteMap` 类和数据 Web 控件基于 `Web.sitemap`中定义的站点地图来显示此信息。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-273">Here, again, we can use the `SiteMap` class and a data Web control to display this information based upon the site map defined in `Web.sitemap`.</span></span>

<span data-ttu-id="f5f3c-274">让我们再次使用中继器显示未排序的列表，但这次我们将显示教程的标题和说明。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-274">Let's display an unordered list using a Repeater again, but this time we'll display the title and description of the tutorials.</span></span> <span data-ttu-id="f5f3c-275">由于用于实现此目的的标记和代码需要为每个 `Default.aspx` 页重复，因此，我们可以将此 UI 逻辑封装在[用户控件](https://msdn.microsoft.com/library/y6wb1a0e.aspx)中。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-275">Since the markup and code to accomplish this will need to be repeated for each `Default.aspx` page, we can encapsulate this UI logic in a [User Control](https://msdn.microsoft.com/library/y6wb1a0e.aspx).</span></span> <span data-ttu-id="f5f3c-276">在名为 `UserControls` 的网站中创建一个文件夹，并添加到名为 `SectionLevelTutorialListing.ascx`的 Web 用户控件的新项，并添加以下标记：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-276">Create a folder in the website called `UserControls` and add to that a new item of type Web User Control named `SectionLevelTutorialListing.ascx`, and add the following markup:</span></span>

<span data-ttu-id="f5f3c-277">[![将新的 Web 用户控件添加到 Usercontrol 文件夹](master-pages-and-site-navigation-cs/_static/image30.png)](master-pages-and-site-navigation-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-277">[![Add a New Web User Control to the UserControls Folder](master-pages-and-site-navigation-cs/_static/image30.png)](master-pages-and-site-navigation-cs/_static/image29.png)</span></span>

<span data-ttu-id="f5f3c-278">**图 13**：将新的 Web 用户控件添加到 `UserControls` 文件夹（[单击查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image31.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-278">**Figure 13**: Add a New Web User Control to the `UserControls` Folder ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image31.png))</span></span>

<span data-ttu-id="f5f3c-279">SectionLevelTutorialListing.ascx</span><span class="sxs-lookup"><span data-stu-id="f5f3c-279">SectionLevelTutorialListing.ascx</span></span>

[!code-aspx[Main](master-pages-and-site-navigation-cs/samples/sample12.aspx)]

<span data-ttu-id="f5f3c-280">SectionLevelTutorialListing.ascx.cs</span><span class="sxs-lookup"><span data-stu-id="f5f3c-280">SectionLevelTutorialListing.ascx.cs</span></span>

[!code-csharp[Main](master-pages-and-site-navigation-cs/samples/sample13.cs)]

<span data-ttu-id="f5f3c-281">在以前的中继器示例中，我们以声明方式将 `SiteMap` 数据绑定到中继器;但 `SectionLevelTutorialListing` 用户控件以编程方式执行此操作。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-281">In the previous Repeater example we bound the `SiteMap` data to the Repeater declaratively; the `SectionLevelTutorialListing` User Control, however, does so programmatically.</span></span> <span data-ttu-id="f5f3c-282">在 `Page_Load` 事件处理程序中，将进行检查以确保此页的 URL 映射到站点地图中的节点。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-282">In the `Page_Load` event handler, a check is made to ensure that this page s URL maps to a node in the site map.</span></span> <span data-ttu-id="f5f3c-283">如果在没有相应 `<siteMapNode>` 条目的页面中使用此用户控件，`SiteMap.CurrentNode` 将返回 `null`，并且不会将任何数据绑定到 Repeater。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-283">If this User Control is used in a page that does not have a corresponding `<siteMapNode>` entry, `SiteMap.CurrentNode` will return `null` and no data will be bound to the Repeater.</span></span> <span data-ttu-id="f5f3c-284">假设我们有 `CurrentNode`，则将其 `ChildNodes` 集合绑定到中继器。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-284">Assuming we have a `CurrentNode`, we bind its `ChildNodes` collection to the Repeater.</span></span> <span data-ttu-id="f5f3c-285">由于我们已设置了站点映射，因此每个部分中的 "`Default.aspx`" 页是该部分中所有教程的父节点，此代码将显示该部分教程的链接和说明，如以下屏幕截图所示。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-285">Since our site map is set up such that the `Default.aspx` page in each section is the parent node of all of the tutorials within that section, this code will display links to and descriptions of all of the section's tutorials, as shown in the screen shot below.</span></span>

<span data-ttu-id="f5f3c-286">创建此中继器后，打开每个文件夹中的 `Default.aspx` 页面，进入设计视图，只需将用户控件从解决方案资源管理器拖到要在其中显示教程列表的设计图面。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-286">Once this Repeater has been created, open the `Default.aspx` pages in each of the folders, go to the Design view, and simply drag the User Control from the Solution Explorer onto the Design surface where you want the tutorial list to appear.</span></span>

<span data-ttu-id="f5f3c-287">[![用户控件已添加到 default.aspx](master-pages-and-site-navigation-cs/_static/image33.png)](master-pages-and-site-navigation-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-287">[![The User Control has Been Added to Default.aspx](master-pages-and-site-navigation-cs/_static/image33.png)](master-pages-and-site-navigation-cs/_static/image32.png)</span></span>

<span data-ttu-id="f5f3c-288">**图 14**：已将用户控件添加到 `Default.aspx` （[单击查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image34.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-288">**Figure 14**: The User Control has Been Added to `Default.aspx` ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image34.png))</span></span>

<span data-ttu-id="f5f3c-289">[![列出了基本报表教程](master-pages-and-site-navigation-cs/_static/image36.png)](master-pages-and-site-navigation-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-289">[![The Basic Reporting Tutorials are Listed](master-pages-and-site-navigation-cs/_static/image36.png)](master-pages-and-site-navigation-cs/_static/image35.png)</span></span>

<span data-ttu-id="f5f3c-290">**图 15**：列出了基本报表教程（[单击以查看完全大小的图像](master-pages-and-site-navigation-cs/_static/image37.png)）</span><span class="sxs-lookup"><span data-stu-id="f5f3c-290">**Figure 15**: The Basic Reporting Tutorials are Listed ([Click to view full-size image](master-pages-and-site-navigation-cs/_static/image37.png))</span></span>

## <a name="summary"></a><span data-ttu-id="f5f3c-291">摘要</span><span class="sxs-lookup"><span data-stu-id="f5f3c-291">Summary</span></span>

<span data-ttu-id="f5f3c-292">定义站点地图并完成母版页后，我们为数据相关的教程提供了一致的页面布局和导航方案。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-292">With the site map defined and the master page complete, we now have a consistent page layout and navigation scheme for our data-related tutorials.</span></span> <span data-ttu-id="f5f3c-293">无论我们将多少页添加到我们的网站，更新站点范围的页面布局或站点导航信息都是一种快速而简单的过程，因为此信息是集中式的。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-293">Regardless of how many pages we add to our site, updating the site-wide page layout or site navigation information is a quick and simple process due to this information being centralized.</span></span> <span data-ttu-id="f5f3c-294">具体而言，页面布局信息在母版页 `Site.master` 中定义，并在 `Web.sitemap`中的站点映射中定义。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-294">Specifically, the page layout information is defined in the master page `Site.master` and the site map in `Web.sitemap`.</span></span> <span data-ttu-id="f5f3c-295">我们无需编写*任何*代码即可实现此站点范围的页面布局和导航机制，并在 Visual Studio 中保留完整的 WYSIWYG 设计器支持。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-295">We didn't need to write *any* code to achieve this site-wide page layout and navigation mechanism, and we retain full WYSIWYG designer support in Visual Studio.</span></span>

<span data-ttu-id="f5f3c-296">完成了数据访问层和业务逻辑层，并定义了一致的页面布局和站点导航后，就可以开始探索常见的报表模式了。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-296">Having completed the Data Access Layer and Business Logic Layer and having a consistent page layout and site navigation defined, we're ready to begin exploring common reporting patterns.</span></span> <span data-ttu-id="f5f3c-297">在[接下来](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md)的三个教程中，我们将介绍显示从 GridView、DetailsView 和 FormView 控件中的 BLL 检索到的数据的基本报表任务。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-297">In the [next](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) three tutorials we'll look at basic reporting tasks displaying data retrieved from the BLL in the GridView, DetailsView, and FormView controls.</span></span>

<span data-ttu-id="f5f3c-298">很高兴编程！</span><span class="sxs-lookup"><span data-stu-id="f5f3c-298">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="f5f3c-299">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="f5f3c-299">Further Reading</span></span>

<span data-ttu-id="f5f3c-300">有关本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="f5f3c-300">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="f5f3c-301">ASP.NET 母版页概述</span><span class="sxs-lookup"><span data-stu-id="f5f3c-301">ASP.NET Master Pages Overview</span></span>](https://msdn.microsoft.com/library/wtxbf3hh.aspx)
- [<span data-ttu-id="f5f3c-302">ASP.NET 2.0 中的母版页</span><span class="sxs-lookup"><span data-stu-id="f5f3c-302">Master Pages in ASP.NET 2.0</span></span>](http://odetocode.com/Articles/419.aspx)
- [<span data-ttu-id="f5f3c-303">ASP.NET 2.0 设计模板</span><span class="sxs-lookup"><span data-stu-id="f5f3c-303">ASP.NET 2.0 Design Templates</span></span>](https://msdn.microsoft.com/asp.net/reference/design/templates/default.aspx)
- [<span data-ttu-id="f5f3c-304">ASP.NET 站点导航概述</span><span class="sxs-lookup"><span data-stu-id="f5f3c-304">ASP.NET Site Navigation Overview</span></span>](https://msdn.microsoft.com/library/e468hxky.aspx)
- [<span data-ttu-id="f5f3c-305">检查 ASP.NET 2.0 的站点导航</span><span class="sxs-lookup"><span data-stu-id="f5f3c-305">Examining ASP.NET 2.0's Site Navigation</span></span>](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [<span data-ttu-id="f5f3c-306">ASP.NET 2.0 站点导航功能</span><span class="sxs-lookup"><span data-stu-id="f5f3c-306">ASP.NET 2.0 Site Navigation Features</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/20/431019.aspx)
- [<span data-ttu-id="f5f3c-307">了解 ASP.NET 视图状态</span><span class="sxs-lookup"><span data-stu-id="f5f3c-307">Understanding ASP.NET View State</span></span>](https://msdn.microsoft.com/library/default.asp?url=/library/dnaspp/html/viewstate.asp)
- [<span data-ttu-id="f5f3c-308">如何：为 ASP.NET 页启用跟踪</span><span class="sxs-lookup"><span data-stu-id="f5f3c-308">How to: Enable Tracing for an ASP.NET Page</span></span>](https://msdn.microsoft.com/library/94c55d08%28VS.80%29.aspx)
- [<span data-ttu-id="f5f3c-309">ASP.NET 用户控件</span><span class="sxs-lookup"><span data-stu-id="f5f3c-309">ASP.NET User Controls</span></span>](https://msdn.microsoft.com/library/y6wb1a0e.aspx)

## <a name="about-the-author"></a><span data-ttu-id="f5f3c-310">关于作者</span><span class="sxs-lookup"><span data-stu-id="f5f3c-310">About the Author</span></span>

<span data-ttu-id="f5f3c-311">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，创始人的[4GuysFromRolla.com](http://www.4guysfromrolla.com)，已在使用 Microsoft Web 技术，自1998开始。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-311">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f5f3c-312">Scott 的工作方式是独立的顾问、培训师和撰稿人。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-312">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f5f3c-313">他的最新书籍是，[*在24小时内，sam ASP.NET 2.0*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-313">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f5f3c-314">可以[mitchell@4GuysFromRolla.com访问。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-314">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f5f3c-315">或通过他的博客，可以在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)找到。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-315">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f5f3c-316">特别感谢</span><span class="sxs-lookup"><span data-stu-id="f5f3c-316">Special Thanks To</span></span>

<span data-ttu-id="f5f3c-317">此教程系列由许多有用的审阅者查看。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-317">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f5f3c-318">本教程的主管评审者是 Liz Shulok、Dennis Patterson 将和 Hilton Giesenow。</span><span class="sxs-lookup"><span data-stu-id="f5f3c-318">Lead reviewers for this tutorial were Liz Shulok, Dennis Patterson, and Hilton Giesenow.</span></span> <span data-ttu-id="f5f3c-319">想要查看我即将发布的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="f5f3c-319">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f5f3c-320">如果是这样，请在mitchell@4GuysFromRolla.com放置一行[。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-320">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f5f3c-321">[上一页](creating-a-business-logic-layer-cs.md)
> [下一页](creating-a-data-access-layer-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f5f3c-321">[Previous](creating-a-business-logic-layer-cs.md)
[Next](creating-a-data-access-layer-vb.md)</span></span>
