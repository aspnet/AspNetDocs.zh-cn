---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: 批处理删除（C#） |Microsoft Docs
author: rick-anderson
description: 了解如何在一个操作中删除多个数据库记录。 在用户界面层中，我们构建了一个在早期 tut 中创建的增强 GridView 。
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: ed832c38b4972f440ab64c141e29c85f0a9df920
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2020
ms.locfileid: "78476606"
---
# <a name="batch-deleting-c"></a><span data-ttu-id="d6f3a-104">批量删除 (C#)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-104">Batch Deleting (C#)</span></span>

<span data-ttu-id="d6f3a-105">作者： [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d6f3a-106">[下载代码](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip)或[下载 PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-106">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="d6f3a-107">了解如何在一个操作中删除多个数据库记录。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="d6f3a-108">在上一教程中创建的增强 GridView 的用户界面层中。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="d6f3a-109">在数据访问层中，我们将多个删除操作打包到一个事务中，以确保所有删除操作成功或回滚所有删除操作。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="d6f3a-110">简介</span><span class="sxs-lookup"><span data-stu-id="d6f3a-110">Introduction</span></span>

<span data-ttu-id="d6f3a-111">[前面的教程](batch-updating-cs.md)探讨了如何使用完全可编辑的 GridView 创建批处理编辑界面。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="d6f3a-112">在用户经常编辑多个记录的情况下，批处理编辑接口需要的回发和键盘到鼠标的上下文切换更少，从而提高最终用户的工作效率。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="d6f3a-113">此方法同样适用于用户经常在一次删除多个记录的页面。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="d6f3a-114">使用了联机电子邮件客户端的任何人都已熟悉最常见的一批删除接口：网格中每行的复选框以及相应的 "删除所有选中项" 按钮（参见图1）。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="d6f3a-115">本教程非常简短，因为我们已经在创建基于 web 的界面和一种方法将一系列记录作为单个原子操作来删除。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="d6f3a-116">在[复选框的 "添加 gridview" 列](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)教程中，我们创建了一个包含一列 Checkbox 的 GridView，并在[事务中包装数据库修改](wrapping-database-modifications-within-a-transaction-cs.md)中，我们在 BLL 中创建了一个方法，该方法使用事务来删除 `ProductID` 值的 `List<T>`。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="d6f3a-117">在本教程中，我们将生成并合并以前的体验，以创建工作批删除示例。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>

<span data-ttu-id="d6f3a-118">[每行 ![都包含一个复选框](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="d6f3a-119">**图 1**：每行都包含一个复选框（[单击查看完全尺寸的图像](batch-deleting-cs/_static/image2.png)）</span><span class="sxs-lookup"><span data-stu-id="d6f3a-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>

## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="d6f3a-120">步骤1：创建批处理删除接口</span><span class="sxs-lookup"><span data-stu-id="d6f3a-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="d6f3a-121">由于我们已在添加 "复选框" 教程的 "[添加 GridView" 列](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)中创建了批处理删除界面，因此我们只需将其复制到 `BatchDelete.aspx` 而不是从头开始创建。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="d6f3a-122">首先打开 `BatchData` 文件夹中的 "`BatchDelete.aspx`" 页，并打开 `EnhancedGridView` 文件夹中的 "`CheckBoxField.aspx`" 页。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="d6f3a-123">从 "`CheckBoxField.aspx`" 页上，中转到 "源" 视图，然后复制 `<asp:Content>` 标记之间的标记，如图2所示。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>

<span data-ttu-id="d6f3a-124">[![将 CheckBoxField 的声明性标记复制到剪贴板](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="d6f3a-125">**图 2**：将 `CheckBoxField.aspx` 的声明性标记复制到剪贴板（[单击以查看完全大小的图像](batch-deleting-cs/_static/image4.png)）</span><span class="sxs-lookup"><span data-stu-id="d6f3a-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>

<span data-ttu-id="d6f3a-126">接下来，`BatchDelete.aspx` 中的 "源" 视图，并将剪贴板的内容粘贴到 `<asp:Content>` 标记中。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="d6f3a-127">此外，请从 `CheckBoxField.aspx.cs` 中的代码隐藏类中复制并粘贴代码，使其在 `BatchDelete.aspx.cs` 中的代码隐藏类（`DeleteSelectedProducts` "`Click`" 事件处理程序、`ToggleCheckState` 方法和 `Click` 和 `CheckAll` 的事件处理程序）中。`UncheckAll`</span><span class="sxs-lookup"><span data-stu-id="d6f3a-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="d6f3a-128">复制此内容后，`BatchDelete.aspx` 页 s 代码隐藏类应包含以下代码：</span><span class="sxs-lookup"><span data-stu-id="d6f3a-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="d6f3a-129">复制声明性标记和源代码后，请花点时间通过浏览器查看 `BatchDelete.aspx` 来测试。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="d6f3a-130">你应该会看到一个 gridview，其中列出了 GridView 中的前十个产品，每行都列出了产品的名称、类别和价格以及复选框。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="d6f3a-131">应有三个按钮：选中 "全部"、"取消选中" 和 "删除所选产品"。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="d6f3a-132">单击 "全部选中" 按钮将选中所有复选框，而取消选中 "全部" 将清除所有复选框。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="d6f3a-133">单击 "删除所选产品" 会显示一条消息，其中列出了所选产品的 `ProductID` 值，但并不实际删除产品。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>

<span data-ttu-id="d6f3a-134">[![CheckBoxField 中的接口已移动到 BatchDeleting](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="d6f3a-135">**图 3**： `CheckBoxField.aspx` 的接口已移动到 `BatchDeleting.aspx` （[单击以查看完全大小的图像](batch-deleting-cs/_static/image6.png)）</span><span class="sxs-lookup"><span data-stu-id="d6f3a-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>

## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="d6f3a-136">步骤2：使用事务删除选中的产品</span><span class="sxs-lookup"><span data-stu-id="d6f3a-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="d6f3a-137">将批处理删除接口成功复制到 `BatchDeleting.aspx`后，剩下的就是更新代码，以便使用 `ProductsBLL` 类中的 `DeleteProductsWithTransaction` 方法删除已选中的产品。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="d6f3a-138">此方法在[事务教程内的包装数据库修改](wrapping-database-modifications-within-a-transaction-cs.md)中添加，接受作为其输入 `List<T>` `ProductID` 值，并删除事务范围内的每个相应 `ProductID`。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="d6f3a-139">`DeleteSelectedProducts` 按钮 `Click` 事件处理程序当前使用以下 `foreach` 循环遍历每个 GridView 行：</span><span class="sxs-lookup"><span data-stu-id="d6f3a-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="d6f3a-140">对于每一行，将以编程方式引用 `ProductSelector` 复选框 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="d6f3a-141">如果已选中此选项，则将从 `DataKeys` 集合中检索行 `ProductID`，并更新 `DeleteResults` 标签 `Text` 属性，以包括一条消息，指示已选择要删除的行。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="d6f3a-142">在注释掉对 `ProductsBLL` 类 `Delete` 方法的调用时，上面的代码并不会实际删除任何记录。如果要应用此 delete 逻辑，代码将删除产品，但不会删除原子操作。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="d6f3a-143">也就是说，如果序列中的前几个删除操作成功，但之后的几个删除失败（可能是由于外键约束冲突），则会引发异常，但已删除的那些产品仍将被删除。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="d6f3a-144">为了确保原子性，我们需要改用 `ProductsBLL` 类的 `DeleteProductsWithTransaction` 方法。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="d6f3a-145">由于此方法接受 `ProductID` 值的列表，因此，需要先从网格中编译此列表，然后将其作为参数传递。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="d6f3a-146">首先创建 `int`类型的 `List<T>` 的实例。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="d6f3a-147">在 `foreach` 循环中，我们需要将所选产品 `ProductID` 值添加到此 `List<T>`。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="d6f3a-148">循环之后，必须将此 `List<T>` 传递到 `ProductsBLL` 类 s `DeleteProductsWithTransaction` 方法。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="d6f3a-149">将 `DeleteSelectedProducts` "按钮 s `Click` 事件处理程序更新为以下代码：</span><span class="sxs-lookup"><span data-stu-id="d6f3a-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="d6f3a-150">更新后的代码创建 `int` （`productIDsToDelete`）类型的 `List<T>`，并用要删除的 `ProductID` 值填充该类型。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="d6f3a-151">`foreach` 循环后，如果至少选择了一个产品，将调用 `ProductsBLL` 类 `DeleteProductsWithTransaction` 方法并传递此列表。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="d6f3a-152">还会显示 `DeleteResults` 标签，并将数据重新绑定到 GridView （以便新删除的记录不再作为网格中的行出现）。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="d6f3a-153">图4显示了选择删除多行后的 GridView。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="d6f3a-154">图5在单击 "删除所选产品" 按钮后立即显示屏幕。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="d6f3a-155">请注意，在图5中，已删除记录的 `ProductID` 值将显示在 GridView 下的标签中，这些行不再位于 GridView 中。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>

<span data-ttu-id="d6f3a-156">[将删除所选产品 ![](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="d6f3a-157">**图 4**：选定的产品将被删除（[单击以查看完全大小的图像](batch-deleting-cs/_static/image8.png)）</span><span class="sxs-lookup"><span data-stu-id="d6f3a-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>

<span data-ttu-id="d6f3a-158">[![已删除的产品 ProductID 值列在 GridView 下面](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="d6f3a-159">**图 5**：已删除的产品 `ProductID` 值列在 GridView 下面（[单击以查看完全大小的图像](batch-deleting-cs/_static/image10.png)）</span><span class="sxs-lookup"><span data-stu-id="d6f3a-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>

> [!NOTE]
> <span data-ttu-id="d6f3a-160">若要测试 `DeleteProductsWithTransaction` 方法的原子性，请在 "`Order Details`" 表中为产品手动添加一个条目，然后尝试删除该产品（以及其他产品）。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="d6f3a-161">尝试删除具有关联顺序的产品时，将会收到外键约束冲突，但请注意其他选定的产品删除如何回滚。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>

## <a name="summary"></a><span data-ttu-id="d6f3a-162">摘要</span><span class="sxs-lookup"><span data-stu-id="d6f3a-162">Summary</span></span>

<span data-ttu-id="d6f3a-163">创建批处理删除接口涉及到添加一个包含复选框列和一个按钮 Web 控件的 GridView，单击该按钮时，将删除所有选定的行作为单个原子操作。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="d6f3a-164">在本教程中，我们通过将两个前几个教程中完成的工作拼凑在一起来构建此类接口，[添加了一个 "GridView" 列并将](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md)[数据库中的数据库修改包装](wrapping-database-modifications-within-a-transaction-cs.md)起来。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="d6f3a-165">在第一个教程中，我们创建了一个包含 checkbox 列的 GridView，并在其中实现了一个方法，该方法是在对 `ProductID` 值 `List<T>` 传递的情况下，在事务范围内删除了这些值。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="d6f3a-166">在下一教程中，我们将创建一个接口，用于执行批量插入。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="d6f3a-167">很高兴编程！</span><span class="sxs-lookup"><span data-stu-id="d6f3a-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="d6f3a-168">关于作者</span><span class="sxs-lookup"><span data-stu-id="d6f3a-168">About the Author</span></span>

<span data-ttu-id="d6f3a-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)，创始人的[4GuysFromRolla.com](http://www.4guysfromrolla.com)，已在使用 Microsoft Web 技术，自1998开始。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d6f3a-170">Scott 的工作方式是独立的顾问、培训师和撰稿人。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d6f3a-171">他的最新书籍是，[*在24小时内，sam ASP.NET 2.0*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="d6f3a-172">可以[mitchell@4GuysFromRolla.com访问。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="d6f3a-173">或通过他的博客，可以在[http://ScottOnWriting.NET](http://ScottOnWriting.NET)找到。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="d6f3a-174">特别感谢</span><span class="sxs-lookup"><span data-stu-id="d6f3a-174">Special Thanks To</span></span>

<span data-ttu-id="d6f3a-175">此教程系列由许多有用的审阅者查看。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d6f3a-176">本教程的主管评审者是 Hilton Giesenow 和 Teresa Murphy。</span><span class="sxs-lookup"><span data-stu-id="d6f3a-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="d6f3a-177">想要查看我即将发布的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="d6f3a-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d6f3a-178">如果是这样，请在mitchell@4GuysFromRolla.com放置一行[。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d6f3a-179">[上一页](batch-updating-cs.md)
> [下一页](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="d6f3a-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
