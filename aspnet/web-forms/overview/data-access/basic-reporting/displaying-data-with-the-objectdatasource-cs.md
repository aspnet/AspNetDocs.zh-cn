---
uid: web-forms/overview/data-access/basic-reporting/displaying-data-with-the-objectdatasource-cs
title: 显示数据使用 ObjectDataSource (C#) |Microsoft Docs
author: rick-anderson
description: 本教程讨论 ObjectDataSource 控件使用此控件可以绑定 BLL 而无需 havi 在上一教程中创建从检索数据...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: af882aef-56f5-4e9a-8f95-3977fde20e74
msc.legacyurl: /web-forms/overview/data-access/basic-reporting/displaying-data-with-the-objectdatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: a861fbbf2813a659f5301e43bd851345cac34e9f
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/09/2019
ms.locfileid: "59380023"
---
# <a name="displaying-data-with-the-objectdatasource-c"></a><span data-ttu-id="0dbc4-103">使用 ObjectDataSource 显示数据 (C#)</span><span class="sxs-lookup"><span data-stu-id="0dbc4-103">Displaying Data With the ObjectDataSource (C#)</span></span>

<span data-ttu-id="0dbc4-104">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0dbc4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="0dbc4-105">[下载示例应用程序](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_4_CS.exe)或[下载 PDF](displaying-data-with-the-objectdatasource-cs/_static/datatutorial04cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="0dbc4-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_4_CS.exe) or [Download PDF](displaying-data-with-the-objectdatasource-cs/_static/datatutorial04cs1.pdf)</span></span>

> <span data-ttu-id="0dbc4-106">本教程讨论 ObjectDataSource 控件使用此控件可以绑定从 BLL 而无需编写一行代码创建上一教程中检索的数据 ！</span><span class="sxs-lookup"><span data-stu-id="0dbc4-106">This tutorial looks at the ObjectDataSource control Using this control you can bind data retrieved from the BLL created in the previous tutorial without having to write a line of code!</span></span>


## <a name="introduction"></a><span data-ttu-id="0dbc4-107">介绍</span><span class="sxs-lookup"><span data-stu-id="0dbc4-107">Introduction</span></span>

<span data-ttu-id="0dbc4-108">我们应用程序体系结构和网站页的布局完成，我们准备开始探索如何完成各种常见数据和报告相关的任务。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-108">With our application architecture and website page layout complete, we're ready to start exploring how to accomplish a variety of common data- and reporting-related tasks.</span></span> <span data-ttu-id="0dbc4-109">在前面的教程，我们已了解如何以编程方式将数据从 DAL 和 BLL 绑定到数据 Web 控件在 ASP.NET 页中。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-109">In the previous tutorials we've seen how to programmatically bind data from the DAL and BLL to a data Web control in an ASP.NET page.</span></span> <span data-ttu-id="0dbc4-110">分配的数据 Web 控件的此语法`DataSource`属性设置为将数据显示，然后再调用控件的`DataBind()`方法已在 ASP.NET 1.x 应用程序中使用的模式，可以继续在 2.0 应用程序中使用。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-110">This syntax assigning the data Web control's `DataSource` property to the data to display and then calling the control's `DataBind()` method was the pattern used in ASP.NET 1.x applications, and can continue to be used in your 2.0 applications.</span></span> <span data-ttu-id="0dbc4-111">但是，ASP.NET 2.0 的新数据源控件提供的声明性方式处理数据。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-111">However, ASP.NET 2.0's new data source controls offer a declarative way to work with data.</span></span> <span data-ttu-id="0dbc4-112">使用这些控件可以绑定从 BLL 检索的数据中创建[前一篇教程](../introduction/creating-a-business-logic-layer-cs.md)而无需编写代码 ！</span><span class="sxs-lookup"><span data-stu-id="0dbc4-112">Using these controls you can bind data retrieved from the BLL created in the [previous tutorial](../introduction/creating-a-business-logic-layer-cs.md) without having to write a line of code!</span></span>

<span data-ttu-id="0dbc4-113">ASP.NET 2.0 附带有五个内置数据源控件[SqlDataSource](https://msdn.microsoft.com/library/dz12d98w(vs.80).aspx)， [AccessDataSource](https://msdn.microsoft.com/library/8e5545e1.aspx)， [ObjectDataSource](https://msdn.microsoft.com/library/9a4kyhcx.aspx)， [XmlDataSource](https://msdn.microsoft.com/library/e8d8587a(en-US,VS.80).aspx)，并[SiteMapDataSource](https://msdn.microsoft.com/library/5ex9t96x(en-US,VS.80).aspx)尽管您可以构建你自己[自定义数据源控件](https://msdn.microsoft.com/library/default.asp?url=/library/dnvs05/html/DataSourceCon1.asp)，如果需要。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-113">ASP.NET 2.0 ships with five built-in data source controls [SqlDataSource](https://msdn.microsoft.com/library/dz12d98w(vs.80).aspx), [AccessDataSource](https://msdn.microsoft.com/library/8e5545e1.aspx), [ObjectDataSource](https://msdn.microsoft.com/library/9a4kyhcx.aspx), [XmlDataSource](https://msdn.microsoft.com/library/e8d8587a(en-US,VS.80).aspx), and [SiteMapDataSource](https://msdn.microsoft.com/library/5ex9t96x(en-US,VS.80).aspx) although you can build your own [custom data source controls](https://msdn.microsoft.com/library/default.asp?url=/library/dnvs05/html/DataSourceCon1.asp), if needed.</span></span> <span data-ttu-id="0dbc4-114">由于我们开发了一种体系结构，我们的教程应用程序，我们将使用 ObjectDataSource 针对我们 BLL 类。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-114">Since we have developed an architecture for our tutorial application, we'll be using the ObjectDataSource against our BLL classes.</span></span>


![ASP.NET 2.0 包括五个内置数据源控件](displaying-data-with-the-objectdatasource-cs/_static/image1.png)

<span data-ttu-id="0dbc4-116">**图 1**:ASP.NET 2.0 包括五个内置数据源控件</span><span class="sxs-lookup"><span data-stu-id="0dbc4-116">**Figure 1**: ASP.NET 2.0 Includes Five Built-In Data Source Controls</span></span>


<span data-ttu-id="0dbc4-117">ObjectDataSource 用于处理与其他某些对象充当代理。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-117">The ObjectDataSource serves as a proxy for working with some other object.</span></span> <span data-ttu-id="0dbc4-118">若要配置 ObjectDataSource 我们指定此基础对象和其方法如何映射到的 ObjectDataSource `Select`， `Insert`， `Update`，和`Delete`方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-118">To configure the ObjectDataSource we specify this underlying object and how its methods map to the ObjectDataSource's `Select`, `Insert`, `Update`, and `Delete` methods.</span></span> <span data-ttu-id="0dbc4-119">后指定了此基础对象，其方法映射到 ObjectDataSource 的我们然后可以将对象数据源绑定到数据 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-119">Once this underlying object has been specified and its methods mapped to the ObjectDataSource's, we can then bind the ObjectDataSource to a data Web control.</span></span> <span data-ttu-id="0dbc4-120">ASP.NET 附带了很多数据 Web 控件，包括 GridView、 DetailsView、 RadioButtonList 和下拉列表中，等等。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-120">ASP.NET ships with many data Web controls, including the GridView, DetailsView, RadioButtonList, and DropDownList, among others.</span></span> <span data-ttu-id="0dbc4-121">在页生命周期中，Web 控件的数据可能需要访问的数据绑定，它将通过调用其 ObjectDataSource 完成`Select`方法; 如果数据 Web 控件支持插入、 更新或删除，调用可能会对其ObjectDataSource 的`Insert`， `Update`，或`Delete`方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-121">During the page lifecycle, the data Web control may need to access the data it's bound to, which it will accomplish by invoking its ObjectDataSource's `Select` method; if the data Web control supports inserting, updating, or deleting, calls may be made to its ObjectDataSource's `Insert`, `Update`, or `Delete` methods.</span></span> <span data-ttu-id="0dbc4-122">这些调用被路由到适当的基础对象的方法的 ObjectDataSource 通过如以下关系图所示。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-122">These calls are then routed by the ObjectDataSource to the appropriate underlying object's methods as the following diagram illustrates.</span></span>


[![T<span data-ttu-id="0dbc4-123">他 ObjectDataSource 充当代理]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-123">he ObjectDataSource Serves as a Proxy]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image3.png)](displaying-data-with-the-objectdatasource-cs/_static/image2.png)

<span data-ttu-id="0dbc4-124">**图 2**:ObjectDataSource 充当代理 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-124">**Figure 2**: The ObjectDataSource Serves as a Proxy ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image4.png))</span></span>


<span data-ttu-id="0dbc4-125">尽管可以使用 ObjectDataSource 调用插入方法，更新或删除数据，让我们只需专注于返回的数据;将来的教程将探讨使用 ObjectDataSource 和数据修改的数据的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-125">While the ObjectDataSource can be used to invoke methods for inserting, updating, or deleting data, let's just focus on returning data; future tutorials will explore using the ObjectDataSource and data Web controls that modify data.</span></span>

## <a name="step-1-adding-and-configuring-the-objectdatasource-control"></a><span data-ttu-id="0dbc4-126">步骤 1：添加和配置 ObjectDataSource 控件</span><span class="sxs-lookup"><span data-stu-id="0dbc4-126">Step 1: Adding and Configuring the ObjectDataSource Control</span></span>

<span data-ttu-id="0dbc4-127">首先打开`SimpleDisplay.aspx`页中`BasicReporting`文件夹中，切换到设计视图中，并从工具箱拖到页面的设计图面将 ObjectDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-127">Start by opening the `SimpleDisplay.aspx` page in the `BasicReporting` folder, switch to Design view, and then drag an ObjectDataSource control from the Toolbox onto the page's design surface.</span></span> <span data-ttu-id="0dbc4-128">对象数据源将显示为灰色框，在设计图面上，因为它不会生成任何标记;它只需通过调用从指定的对象的方法访问数据。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-128">The ObjectDataSource appears as a gray box on the design surface because it does not produce any markup; it simply accesses data by invoking a method from a specified object.</span></span> <span data-ttu-id="0dbc4-129">返回对象数据源的数据可以显示数据 Web 控件，如 GridView、 DetailsView、 FormView 和等等。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-129">The data returned by an ObjectDataSource can be displayed by a data Web control, such as the GridView, DetailsView, FormView, and so on.</span></span>

> [!NOTE]
> <span data-ttu-id="0dbc4-130">或者，你可能会先向页面添加数据 Web 控件，然后，从其智能标记上，选择&lt;新的数据源&gt;从下拉列表选项。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-130">Alternatively, you may first add the data Web control to the page and then, from its smart tag, choose the &lt;New data source&gt; option from the drop-down list.</span></span>


<span data-ttu-id="0dbc4-131">若要指定 ObjectDataSource 的基础对象和该对象的方法如何映射到 ObjectDataSource 的请单击 ObjectDataSource 的智能标记中的配置数据源链接。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-131">To specify the ObjectDataSource's underlying object and how that object's methods map to the ObjectDataSource's, click on the Configure Data Source link from the ObjectDataSource's smart tag.</span></span>


[![C<span data-ttu-id="0dbc4-132">单击智能标记中的配置数据源链接]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-132">lick the Configure Data Source Link from the Smart Tag]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image6.png)](displaying-data-with-the-objectdatasource-cs/_static/image5.png)

<span data-ttu-id="0dbc4-133">**图 3**:单击智能标记中的配置数据源链接 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-133">**Figure 3**: Click the Configure Data Source Link from the Smart Tag ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image7.png))</span></span>


<span data-ttu-id="0dbc4-134">此时会打开配置数据源向导。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-134">This brings up the Configure Data Source wizard.</span></span> <span data-ttu-id="0dbc4-135">首先，我们必须指定要使用 ObjectDataSource 的对象。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-135">First, we must specify the object the ObjectDataSource is to work with.</span></span> <span data-ttu-id="0dbc4-136">如果选中"仅数据组件显示"复选框，在此屏幕上的下拉列表列出了这些对象`DataObject`属性。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-136">If the "Show only data components" checkbox is checked, the drop-down list on this screen lists only those objects that have been decorated with the `DataObject` attribute.</span></span> <span data-ttu-id="0dbc4-137">目前我们的列表类型化数据集，我们在上一教程中创建的 BLL 类包括 Tableadapter。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-137">Currently our list includes the TableAdapters in the Typed DataSet and the BLL classes we created in the previous tutorial.</span></span> <span data-ttu-id="0dbc4-138">如果你忘记添加`DataObject`属性的业务逻辑层类为您看不到他们在此列表中。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-138">If you forgot to add the `DataObject` attribute to the Business Logic Layer classes you won't see them in this list.</span></span> <span data-ttu-id="0dbc4-139">在这种情况下，取消选中"仅数据组件显示"复选框以查看所有对象，其中应包括 BLL 类 （和其他类中的类型化数据集 DataTables、 Datarow，依此类推）。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-139">In that case, uncheck the "Show only data components" checkbox to view all objects, which should include the BLL classes (along with the other classes in the Typed DataSet the DataTables, DataRows, and so on).</span></span>

<span data-ttu-id="0dbc4-140">从第一个屏幕中选择`ProductsBLL`类从下拉列表，并单击下一步。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-140">From this first screen choose the `ProductsBLL` class from the drop-down list and click Next.</span></span>


[![S<span data-ttu-id="0dbc4-141">指定使用 ObjectDataSource 控件，该对象]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-141">pecify the Object to Use with the ObjectDataSource Control]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image9.png)](displaying-data-with-the-objectdatasource-cs/_static/image8.png)

<span data-ttu-id="0dbc4-142">**图 4**:使用 ObjectDataSource 控件指定使用的对象 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-142">**Figure 4**: Specify the Object to Use with the ObjectDataSource Control ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image10.png))</span></span>


<span data-ttu-id="0dbc4-143">在向导的下一个屏幕会提示您选择 ObjectDataSource 应调用什么方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-143">The next screen in the wizard prompts you to select what method the ObjectDataSource should invoke.</span></span> <span data-ttu-id="0dbc4-144">下拉列表列出了从上一屏幕中选择的对象中返回数据的这些方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-144">The drop-down lists those methods that return data in the object selected from the previous screen.</span></span> <span data-ttu-id="0dbc4-145">这里我们可以看到`GetProductByProductID`， `GetProducts`， `GetProductsByCategoryID`，和`GetProductsBySupplierID`。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-145">Here we see `GetProductByProductID`, `GetProducts`, `GetProductsByCategoryID`, and `GetProductsBySupplierID`.</span></span> <span data-ttu-id="0dbc4-146">选择`GetProducts`方法从该下拉列表并单击完成 (如果您添加`DataObjectMethodAttribute`到`ProductBLL`的方法，如前面的教程，此选项中所示将选择默认情况下)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-146">Select the `GetProducts` method from the drop-down list and click Finish (if you added the `DataObjectMethodAttribute` to the `ProductBLL`'s methods as shown in the previous tutorial, this option will be selected by default).</span></span>


[![C<span data-ttu-id="0dbc4-147">选择选择选项卡中返回数据的方法]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-147">hoose the Method for Returning Data from the SELECT Tab]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image12.png)](displaying-data-with-the-objectdatasource-cs/_static/image11.png)

<span data-ttu-id="0dbc4-148">**图 5**:从选择选项卡中选择返回数据的方法 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-148">**Figure 5**: Choose the Method for Returning Data from the SELECT Tab ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image13.png))</span></span>


## <a name="configure-the-objectdatasource-manually"></a><span data-ttu-id="0dbc4-149">手动配置 ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="0dbc4-149">Configure the ObjectDataSource Manually</span></span>

<span data-ttu-id="0dbc4-150">ObjectDataSource 的配置数据源向导提供了一种来指定它使用的对象并将关联的对象的哪些方法调用的快速方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-150">The ObjectDataSource's Configure Data Source wizard offers a quick way to specify the object it uses and to associate what methods of the object are invoked.</span></span> <span data-ttu-id="0dbc4-151">但是，可以配置其属性，通过属性窗口或在声明性标记中直接通过对象数据源。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-151">You can, however, configure the ObjectDataSource through its properties, either through the Properties window or directly in the declarative markup.</span></span> <span data-ttu-id="0dbc4-152">只需将设置`TypeName`属性设置为要使用的基础对象的类型和`SelectMethod`到检索数据时要调用的方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-152">Simply set the `TypeName` property to the type of the underlying object to be used, and the `SelectMethod` to the method to invoke when retrieving data.</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample1.aspx)]

<span data-ttu-id="0dbc4-153">即使您更喜欢可能存在，您需要手动配置对象数据源，因为该向导仅列出了开发人员创建类的配置数据源向导。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-153">Even if you prefer the Configure Data Source wizard there may be times when you need to manually configure the ObjectDataSource, as the wizard only lists developer-created classes.</span></span> <span data-ttu-id="0dbc4-154">如果你想要将对象数据源绑定到.NET Framework 中的类如[成员资格类](https://msdn.microsoft.com/library/system.web.security.membership.aspx)，以访问用户帐户信息，或[Directory 类](https://msdn.microsoft.com/library/system.io.directory.aspx)若要使用文件系统信息你将需要手动设置 ObjectDataSource 的属性。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-154">If you want to bind the ObjectDataSource to a class in the .NET Framework such as the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx), to access user account information, or the [Directory class](https://msdn.microsoft.com/library/system.io.directory.aspx) to work with file system information you'll need to manually set the ObjectDataSource's properties.</span></span>

## <a name="step-2-adding-a-data-web-control-and-binding-it-to-the-objectdatasource"></a><span data-ttu-id="0dbc4-155">步骤 2：添加数据 Web 控件并将其绑定到对象数据源</span><span class="sxs-lookup"><span data-stu-id="0dbc4-155">Step 2: Adding a Data Web Control and Binding it to the ObjectDataSource</span></span>

<span data-ttu-id="0dbc4-156">ObjectDataSource 具有已添加到页并配置后，我们就可以将数据 Web 控件添加到要显示所返回的对象数据源的数据的页面`Select`方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-156">Once the ObjectDataSource has been added to the page and configured, we're ready to add data Web controls to the page to display the data returned by the ObjectDataSource's `Select` method.</span></span> <span data-ttu-id="0dbc4-157">可将任何数据 Web 控件绑定到对象数据源;让我们看看在 GridView、 DetailsView 和 FormView 中显示对象数据源的数据。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-157">Any data Web control can be bound to an ObjectDataSource; let's look at displaying the ObjectDataSource's data in a GridView, DetailsView, and FormView.</span></span>

## <a name="binding-a-gridview-to-the-objectdatasource"></a><span data-ttu-id="0dbc4-158">将 GridView 绑定到对象数据源</span><span class="sxs-lookup"><span data-stu-id="0dbc4-158">Binding a GridView to the ObjectDataSource</span></span>

<span data-ttu-id="0dbc4-159">添加 GridView 控件从工具箱拖到`SimpleDisplay.aspx`的设计图面。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-159">Add a GridView control from the Toolbox to `SimpleDisplay.aspx`'s design surface.</span></span> <span data-ttu-id="0dbc4-160">从 GridView 的智能标记上，选择我们在步骤 1 中添加的 ObjectDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-160">From the GridView's smart tag, choose the ObjectDataSource control we added in Step 1.</span></span> <span data-ttu-id="0dbc4-161">这会自动将每个属性返回的数据从 ObjectDataSource 的 GridView 中创建 BoundField`Select`方法 （即，由产品数据表中定义的属性）。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-161">This will automatically create a BoundField in the GridView for each property returned by the data from the ObjectDataSource's `Select` method (namely, the properties defined by the Products DataTable).</span></span>


[![A <span data-ttu-id="0dbc4-162">GridView 已添加到页面并将其绑定到 ObjectDataSource]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-162">GridView Has Been Added to the Page and Bound to the ObjectDataSource]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image15.png)](displaying-data-with-the-objectdatasource-cs/_static/image14.png)

<span data-ttu-id="0dbc4-163">**图 6**:GridView 已添加到页上，然后绑定到对象数据源 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-163">**Figure 6**: A GridView Has Been Added to the Page and Bound to the ObjectDataSource ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image16.png))</span></span>


<span data-ttu-id="0dbc4-164">然后可以自定义、 重新排列，或单击智能标记中的编辑列选项删除 GridView 的 BoundFields。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-164">You can then customize, rearrange, or remove the GridView's BoundFields by clicking the Edit Columns option from the smart tag.</span></span>


[![M<span data-ttu-id="0dbc4-165">管理 GridView BoundFields 通过编辑列对话框]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-165">anage the GridView's BoundFields Through the Edit Columns Dialog Box]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image18.png)](displaying-data-with-the-objectdatasource-cs/_static/image17.png)

<span data-ttu-id="0dbc4-166">**图 7**:GridView 的 BoundFields 通过编辑列管理对话框 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-166">**Figure 7**: Manage the GridView's BoundFields Through the Edit Columns Dialog Box ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image19.png))</span></span>


<span data-ttu-id="0dbc4-167">请花费片刻时间来修改 GridView 的 BoundFields，删除`ProductID`， `SupplierID`， `CategoryID`， `QuantityPerUnit`， `UnitsInStock`， `UnitsOnOrder`，和`ReorderLevel`BoundFields。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-167">Take a moment to modify the GridView's BoundFields, removing the `ProductID`, `SupplierID`, `CategoryID`, `QuantityPerUnit`, `UnitsInStock`, `UnitsOnOrder`, and `ReorderLevel` BoundFields.</span></span> <span data-ttu-id="0dbc4-168">只需从左下角中的列表中选择 BoundField 并单击删除按钮 (红色的 X) 将其删除。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-168">Simply select the BoundField from the list in the bottom left and click the delete button (the red X) to remove them.</span></span> <span data-ttu-id="0dbc4-169">接下来，重新排列 BoundFields，以便`CategoryName`并`SupplierName`BoundFields 前加上`UnitPrice`BoundField 通过选择这些 BoundFields 并单击向上箭头。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-169">Next, Rearrange the BoundFields so that the `CategoryName` and `SupplierName` BoundFields precede the `UnitPrice` BoundField by selecting these BoundFields and clicking the up arrow.</span></span> <span data-ttu-id="0dbc4-170">设置`HeaderText`属性为剩余 BoundFields `Products`， `Category`， `Supplier`，和`Price`分别。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-170">Set the `HeaderText` properties of the remaining BoundFields to `Products`, `Category`, `Supplier`, and `Price`, respectively.</span></span> <span data-ttu-id="0dbc4-171">接下来，让`Price`BoundField 设置为货币格式设置 BoundField`HtmlEncode`属性设置为 False 并将其`DataFormatString`属性设置为`{0:c}`。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-171">Next, have the `Price` BoundField formatted as a currency by setting the BoundField's `HtmlEncode` property to False and its `DataFormatString` property to `{0:c}`.</span></span> <span data-ttu-id="0dbc4-172">最后，水平对齐`Price`向右和`Discontinued`通过中心中的复选框`ItemStyle` / `HorizontalAlign`属性。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-172">Finally, horizontally align the `Price` to the right and the `Discontinued` checkbox in the center via the `ItemStyle`/`HorizontalAlign` property.</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample2.aspx)]


[![T<span data-ttu-id="0dbc4-173">他 GridView BoundFields 已自定义]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-173">he GridView's BoundFields Have Been Customized]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image21.png)](displaying-data-with-the-objectdatasource-cs/_static/image20.png)

<span data-ttu-id="0dbc4-174">**图 8**:GridView 的 BoundFields 已自定义 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-174">**Figure 8**: The GridView's BoundFields Have Been Customized ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image22.png))</span></span>


## <a name="using-themes-for-a-consistent-look"></a><span data-ttu-id="0dbc4-175">使用一致的外观的主题</span><span class="sxs-lookup"><span data-stu-id="0dbc4-175">Using Themes for a Consistent Look</span></span>

<span data-ttu-id="0dbc4-176">这些教程致力于删除任何控件级样式设置，而不使用级联样式表尽可能与外部文件中定义。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-176">These tutorials strive to remove any control-level style settings, instead using cascading style sheets defined in an external file whenever possible.</span></span> <span data-ttu-id="0dbc4-177">`Styles.css`文件包含`DataWebControlStyle`， `HeaderStyle`， `RowStyle`，和`AlternatingRowStyle`应该用于规定数据的外观的 CSS 类 Web 这些教程中使用的控件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-177">The `Styles.css` file contains `DataWebControlStyle`, `HeaderStyle`, `RowStyle`, and `AlternatingRowStyle` CSS classes that should be used to dictate the appearance of the data Web controls used in these tutorials.</span></span> <span data-ttu-id="0dbc4-178">若要实现此目的，我们无法设置 GridView`CssClass`属性设置为`DataWebControlStyle`，并将其`HeaderStyle`， `RowStyle`，并`AlternatingRowStyle`属性的`CssClass`属性相应地。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-178">To accomplish this, we could set the GridView's `CssClass` property to `DataWebControlStyle`, and its `HeaderStyle`, `RowStyle`, and `AlternatingRowStyle` properties' `CssClass` properties accordingly.</span></span>

<span data-ttu-id="0dbc4-179">如果将这些设置`CssClass`属性在 Web 控件需要记住来显式设置这些属性值为每个数据 Web 控件添加到我们的教程。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-179">If we set these `CssClass` properties at the Web control we'd need to remember to explicitly set these property values for each and every data Web control added to our tutorials.</span></span> <span data-ttu-id="0dbc4-180">更易于管理的方法是为 GridView、 DetailsView，定义的默认 CSS 相关的属性和 FormView 控件使用的主题。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-180">A more manageable approach is to define the default CSS-related properties for the GridView, DetailsView, and FormView controls using a Theme.</span></span> <span data-ttu-id="0dbc4-181">主题是一系列控制级别的属性设置、 图像和可应用于页面跨站点来强制执行常见的外观的 CSS 类。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-181">A Theme is a collection of control-level property settings, images, and CSS classes that can be applied to pages across a site to enforce a common look and feel.</span></span>

<span data-ttu-id="0dbc4-182">我们的主题不包含任何图像或 CSS 文件 (我们将暂时使用样式表`Styles.css`为的，定义 web 应用程序的根文件夹中)，但将包括两个外观。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-182">Our Theme won't include any images or CSS files (we'll leave the stylesheet `Styles.css` as-is, defined in the root folder of the web application), but will include two Skins.</span></span> <span data-ttu-id="0dbc4-183">外观是定义 Web 控件的默认属性的文件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-183">A Skin is a file that defines the default properties for a Web control.</span></span> <span data-ttu-id="0dbc4-184">具体而言，我们将使用 GridView 和 DetailsView 控件中，将外观文件默认值，该值指示`CssClass`-与相关的属性。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-184">Specifically, we'll have a Skin file for the GridView and DetailsView controls, indicating the default `CssClass`-related properties.</span></span>

<span data-ttu-id="0dbc4-185">通过将新的外观文件添加到名为的项目启动`GridView.skin`通过右键单击解决方案资源管理器中的项目名称并选择添加新项。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-185">Start by adding a new Skin File to your project named `GridView.skin` by right-clicking on the project name in the Solution Explorer and choosing Add New Item.</span></span>


[![A<span data-ttu-id="0dbc4-186">dd 外观文件命名为 GridView.skin]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-186">dd a Skin File Named GridView.skin]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image24.png)](displaying-data-with-the-objectdatasource-cs/_static/image23.png)

<span data-ttu-id="0dbc4-187">**图 9**:添加外观文件命名为`GridView.skin`([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-187">**Figure 9**: Add a Skin File Named `GridView.skin` ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image25.png))</span></span>


<span data-ttu-id="0dbc4-188">外观文件需要放在一个主题，其中位于`App_Themes`文件夹。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-188">Skin files need to be placed in a Theme, which are located in the `App_Themes` folder.</span></span> <span data-ttu-id="0dbc4-189">由于我们还没有这样的文件夹，将请先将其提供 Visual Studio 创建一个对我们添加我们的第一个外观时。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-189">Since we don't yet have such a folder, Visual Studio will kindly offer to create one for us when adding our first Skin.</span></span> <span data-ttu-id="0dbc4-190">单击是以创建`App_Theme`文件夹和放置新`GridView.skin`文件存在。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-190">Click Yes to create the `App_Theme` folder and place the new `GridView.skin` file there.</span></span>


[![L<span data-ttu-id="0dbc4-191">设置 Visual Studio 创建 App_Theme 文件夹]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-191">et Visual Studio Create the App_Theme Folder]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image27.png)](displaying-data-with-the-objectdatasource-cs/_static/image26.png)

<span data-ttu-id="0dbc4-192">**图 10**:让 Visual Studio 创建`App_Theme`文件夹 ([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-192">**Figure 10**: Let Visual Studio Create the `App_Theme` Folder ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image28.png))</span></span>


<span data-ttu-id="0dbc4-193">这将创建的新主题`App_Themes`外观文件中名为 GridView 文件夹`GridView.skin`。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-193">This will create a new Theme in the `App_Themes` folder named GridView with the Skin file `GridView.skin`.</span></span>


![GridView 主题具有已添加到 App_Theme 文件夹](displaying-data-with-the-objectdatasource-cs/_static/image29.png)

<span data-ttu-id="0dbc4-195">**图 11**:GridView 主题都有已添加到`App_Theme`文件夹</span><span class="sxs-lookup"><span data-stu-id="0dbc4-195">**Figure 11**: The GridView Theme has Been Added to the `App_Theme` Folder</span></span>


<span data-ttu-id="0dbc4-196">将 GridView 主题重命名为 DataWebControls (右键单击 GridView 文件夹`App_Theme`文件夹，然后选择重命名)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-196">Rename the GridView Theme to DataWebControls (right-click on the GridView folder in the `App_Theme` folder and choose Rename).</span></span> <span data-ttu-id="0dbc4-197">接下来，输入到以下标记`GridView.skin`文件：</span><span class="sxs-lookup"><span data-stu-id="0dbc4-197">Next, enter the following markup into the `GridView.skin` file:</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample3.aspx)]

<span data-ttu-id="0dbc4-198">这将定义的默认属性`CssClass`-使用 DataWebControls 主题的所有页面中任何 GridView 的相关属性。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-198">This defines the default properties for the `CssClass`-related properties for any GridView in any page that uses the DataWebControls Theme.</span></span> <span data-ttu-id="0dbc4-199">让我们添加另一个外观的 DetailsView，数据 Web 控件，我们将在稍后使用。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-199">Let's add another Skin for the DetailsView, a data Web control that we'll be using shortly.</span></span> <span data-ttu-id="0dbc4-200">添加到名为 DataWebControls 主题的新外观`DetailsView.skin`并添加以下标记：</span><span class="sxs-lookup"><span data-stu-id="0dbc4-200">Add a new Skin to the DataWebControls Theme named `DetailsView.skin` and add the following markup:</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample4.aspx)]

<span data-ttu-id="0dbc4-201">使用我们定义的主题，最后一步是将主题应用到我们的 ASP.NET 页面。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-201">With our Theme defined, the last step is to apply the Theme to our ASP.NET page.</span></span> <span data-ttu-id="0dbc4-202">可以将主题应用基于页的页或在网站中的所有页面。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-202">A Theme can be applied on a page-by-page basis or for all pages in a website.</span></span> <span data-ttu-id="0dbc4-203">让我们在网站中的所有页面中都使用此主题。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-203">Let's use this theme for all pages in the website.</span></span> <span data-ttu-id="0dbc4-204">若要完成此操作，将添加到以下标记`Web.config`的`<system.web>`部分：</span><span class="sxs-lookup"><span data-stu-id="0dbc4-204">To accomplish this, add the following markup to `Web.config`'s `<system.web>` section:</span></span>


[!code-xml[Main](displaying-data-with-the-objectdatasource-cs/samples/sample5.xml)]

<span data-ttu-id="0dbc4-205">就这么简单！</span><span class="sxs-lookup"><span data-stu-id="0dbc4-205">That's all there is to it!</span></span> <span data-ttu-id="0dbc4-206">`styleSheetTheme`主题中指定的属性应设置指示*不*重写在控件级别指定的属性。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-206">The `styleSheetTheme` setting indicates that the properties specified in the Theme should *not* override the properties specified at the control level.</span></span> <span data-ttu-id="0dbc4-207">若要指定主题设置应该也能带来控制设置，请使用`theme`属性来代替`styleSheetTheme`; 遗憾的是，通过指定的主题设置`theme`属性不会出现在 Visual Studio 设计视图中。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-207">To specify that Theme settings should trump control settings, use the `theme` attribute in place of `styleSheetTheme`; unfortunately, Theme settings specified via the `theme` attribute do not appear in the Visual Studio Design view.</span></span> <span data-ttu-id="0dbc4-208">请参阅[ASP.NET 主题和外观概述](https://msdn.microsoft.com/library/ykzx33wh.aspx)并[服务器端样式使用主题](https://quickstarts.asp.net/quickstartv20/aspnet/doc/themes/stylesheettheme.aspx)有关详细信息的主题和外观; 请参阅[How To:应用 ASP.NET 主题](https://msdn.microsoft.com/library/0yy5hxdk(VS.80).aspx)配置页后，可以使用主题的详细信息。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-208">Refer to [ASP.NET Themes and Skins Overview](https://msdn.microsoft.com/library/ykzx33wh.aspx) and [Server-Side Styles Using Themes](https://quickstarts.asp.net/quickstartv20/aspnet/doc/themes/stylesheettheme.aspx) for more information on Themes and Skins; see [How To: Apply ASP.NET Themes](https://msdn.microsoft.com/library/0yy5hxdk(VS.80).aspx) for more on configuring a page to use a theme.</span></span>


[![T<span data-ttu-id="0dbc4-209">他 GridView 显示产品的名称、 类别、 供应商、 价格和停用信息]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-209">he GridView Displays the Product's Name, Category, Supplier, Price, and Discontinued Information]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image31.png)](displaying-data-with-the-objectdatasource-cs/_static/image30.png)

<span data-ttu-id="0dbc4-210">**图 12**:GridView 显示产品的名称、 类别、 供应商、 价格和停用信息 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-210">**Figure 12**: The GridView Displays the Product's Name, Category, Supplier, Price, and Discontinued Information ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image32.png))</span></span>


## <a name="displaying-one-record-at-a-time-in-the-detailsview"></a><span data-ttu-id="0dbc4-211">在 DetailsView 中一次显示一条记录</span><span class="sxs-lookup"><span data-stu-id="0dbc4-211">Displaying One Record at a Time in the DetailsView</span></span>

<span data-ttu-id="0dbc4-212">GridView 显示个返回的数据源控件绑定到每个记录都占一行。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-212">The GridView displays one row for each record returned by the data source control to which it's bound.</span></span> <span data-ttu-id="0dbc4-213">有些的时候，但是，我们可能希望每次显示的唯一记录或只是一条记录。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-213">There are times, however, when we may want to display a sole record or just one record at a time.</span></span> <span data-ttu-id="0dbc4-214">[DetailsView 控件](https://msdn.microsoft.com/library/s3w1w7t4.aspx)提供此功能，以 HTML 形式呈现`<table>`包含两列和每个列或属性绑定到控件的一个行。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-214">The [DetailsView control](https://msdn.microsoft.com/library/s3w1w7t4.aspx) offers this functionality, rendering as an HTML `<table>` with two columns and one row for each column or property bound to the control.</span></span> <span data-ttu-id="0dbc4-215">可以在 DetailsView 视为与单个记录的旋转 90 度 GridView。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-215">You can think of the DetailsView as a GridView with a single record rotated 90 degrees.</span></span>

<span data-ttu-id="0dbc4-216">首先，通过添加的 DetailsView 控件*上面*GridView 中的`SimpleDisplay.aspx`。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-216">Start by adding a DetailsView control *above* the GridView in `SimpleDisplay.aspx`.</span></span> <span data-ttu-id="0dbc4-217">接下来，将其绑定到相同的 ObjectDataSource 控件为 GridView。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-217">Next, bind it to the same ObjectDataSource control as the GridView.</span></span> <span data-ttu-id="0dbc4-218">正如 gridview，BoundField 将添加到对象数据源返回的对象中每个属性 DetailsView`Select`方法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-218">Like with the GridView, a BoundField will be added to the DetailsView for each property in the object returned by the ObjectDataSource's `Select` method.</span></span> <span data-ttu-id="0dbc4-219">唯一的区别是水平方向而不是垂直 DetailsView BoundFields 的布局方式。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-219">The only difference is that the DetailsView's BoundFields are laid out horizontally rather than vertically.</span></span>


[![A<span data-ttu-id="0dbc4-220">dd DetailsView 到页面并将其绑定到 ObjectDataSource]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-220">dd a DetailsView to the Page and Bind it to the ObjectDataSource]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image34.png)](displaying-data-with-the-objectdatasource-cs/_static/image33.png)

<span data-ttu-id="0dbc4-221">**图 13**:添加到页面的 DetailsView 并将其绑定到对象数据源 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-221">**Figure 13**: Add a DetailsView to the Page and Bind it to the ObjectDataSource ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image35.png))</span></span>


<span data-ttu-id="0dbc4-222">如 GridView、 DetailsView BoundFields，就可以调整以提供更多自定义的视图的对象数据源返回的数据。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-222">Like the GridView, the DetailsView's BoundFields can be tweaked to provide a more customized display of the data returned by the ObjectDataSource.</span></span> <span data-ttu-id="0dbc4-223">图 14 显示后其 BoundFields DetailsView 和`CssClass`已配置属性，使其外观类似于 GridView 示例。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-223">Figure 14 shows the DetailsView after its BoundFields and `CssClass` properties have been configured to make its appearance similar to the GridView example.</span></span>


[![T<span data-ttu-id="0dbc4-224">他 DetailsView 会显示一条记录]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-224">he DetailsView Shows a Single Record]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image37.png)](displaying-data-with-the-objectdatasource-cs/_static/image36.png)

<span data-ttu-id="0dbc4-225">**图 14**:在 DetailsView 显示一条记录 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-225">**Figure 14**: The DetailsView Shows a Single Record ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image38.png))</span></span>


<span data-ttu-id="0dbc4-226">请注意，DetailsView 仅显示其数据源返回的第一个记录。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-226">Note that the DetailsView only displays the first record returned by its data source.</span></span> <span data-ttu-id="0dbc4-227">若要允许用户以单步执行的所有记录，一次一个地我们必须启用 DetailsView 的分页。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-227">To allow the user to step through all of the records, one at a time, we must enable paging for the DetailsView.</span></span> <span data-ttu-id="0dbc4-228">为此，请返回到 Visual Studio，并检查 DetailsView 的智能标记中的启用分页复选框。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-228">To do so, return to Visual Studio and check the Enable Paging checkbox in the DetailsView's smart tag.</span></span>


[![E<span data-ttu-id="0dbc4-229">启用分页，DetailsView 控件中]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-229">nable Paging in the DetailsView Control]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image40.png)](displaying-data-with-the-objectdatasource-cs/_static/image39.png)

<span data-ttu-id="0dbc4-230">**图 15**:在 DetailsView 控件中启用分页 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-230">**Figure 15**: Enable Paging in the DetailsView Control ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image41.png))</span></span>


[![W<span data-ttu-id="0dbc4-231">第 i 个分页启用 DetailsView 允许用户查看的任何产品]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-231">ith Paging Enabled, the DetailsView Allows the User to View Any of the Products]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image43.png)](displaying-data-with-the-objectdatasource-cs/_static/image42.png)

<span data-ttu-id="0dbc4-232">**图 16**:使用启用了分页，DetailsView 允许用户查看的任何产品 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-232">**Figure 16**: With Paging Enabled, the DetailsView Allows the User to View Any of the Products ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image44.png))</span></span>


<span data-ttu-id="0dbc4-233">我们将详细介绍有关分页在将来的教程。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-233">We'll talk more about paging in future tutorials.</span></span>

## <a name="a-more-flexible-layout-for-showing-one-record-at-a-time"></a><span data-ttu-id="0dbc4-234">一次显示一条记录更灵活的布局</span><span class="sxs-lookup"><span data-stu-id="0dbc4-234">A More Flexible Layout for Showing One Record at a Time</span></span>

<span data-ttu-id="0dbc4-235">在 DetailsView 是非常严格中从对象数据源返回每个记录的显示方式。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-235">The DetailsView is pretty rigid in how it displays each record returned from the ObjectDataSource.</span></span> <span data-ttu-id="0dbc4-236">我们可以更灵活的数据的视图。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-236">We may want a more flexible view of the data.</span></span> <span data-ttu-id="0dbc4-237">例如，而不会在一个单独的行上显示产品的名称、 类别、 供应商、 价格和已停止使用的信息，我们可能想要显示产品名称和价格中`<h4>`标题，使其不显示的类别和供应商信息下面的名称和价格的较小的字体大小。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-237">For example, rather than showing the product's name, category, supplier, price, and discontinued information each on a separate row, we may want to show the product name and price in an `<h4>` heading, with the category and supplier information appearing below the name and price in a smaller font size.</span></span> <span data-ttu-id="0dbc4-238">并且，我们可能不会介意以显示值旁边的属性名称 （产品、 类别和等等）。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-238">And we may not care to show the property names (Product, Category, and so on) next to the values.</span></span>

<span data-ttu-id="0dbc4-239">[FormView 控件](https://msdn.microsoft.com/library/fyf1dk77.aspx)提供此级别的自定义项。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-239">The [FormView control](https://msdn.microsoft.com/library/fyf1dk77.aspx) provides this level of customization.</span></span> <span data-ttu-id="0dbc4-240">FormView 使用模板，允许混合使用 Web 控件，静态 HTML，而不是使用字段 （如 GridView 和 DetailsView 执行操作），并[数据绑定语法](http://www.15seconds.com/issue/040630.htm)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-240">Rather than using fields (like the GridView and DetailsView do), the FormView uses templates, which allow for a mix of Web controls, static HTML, and [databinding syntax](http://www.15seconds.com/issue/040630.htm).</span></span> <span data-ttu-id="0dbc4-241">如果您熟悉 Repeater 控件从 ASP.NET 1.x 中，您可以将 FormView 视为 Repeater 显示一条记录。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-241">If you are familiar with the Repeater control from ASP.NET 1.x, you can think of the FormView as the Repeater for showing a single record.</span></span>

<span data-ttu-id="0dbc4-242">添加到 FormView 控件`SimpleDisplay.aspx`页面的设计图面。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-242">Add a FormView control to the `SimpleDisplay.aspx` page's design surface.</span></span> <span data-ttu-id="0dbc4-243">最初 FormView 显示为灰色块，告知我们，我们需要提供，最小值，该控件的`ItemTemplate`。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-243">Initially the FormView displays as a gray block, informing us that we need to provide, at minimum, the control's `ItemTemplate`.</span></span>


[![T<span data-ttu-id="0dbc4-244">他 FormView 必须包括 ItemTemplate]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-244">he FormView Must Include an ItemTemplate]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image46.png)](displaying-data-with-the-objectdatasource-cs/_static/image45.png)

<span data-ttu-id="0dbc4-245">**图 17**:FormView 必须包括`ItemTemplate`([单击以查看实际尺寸的图像](displaying-data-with-the-objectdatasource-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-245">**Figure 17**: The FormView Must Include an `ItemTemplate` ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image47.png))</span></span>


<span data-ttu-id="0dbc4-246">可以对通过 FormView 的智能标记，将创建默认的数据源控件直接绑定 FormView`ItemTemplate`自动 (连同`EditItemTemplate`并`InsertItemTemplate`，如果 ObjectDataSource 控件`InsertMethod`和`UpdateMethod`属性设置)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-246">You can bind the FormView directly to a data source control through the FormView's smart tag, which will create a default `ItemTemplate` automatically (along with an `EditItemTemplate` and `InsertItemTemplate`, if the ObjectDataSource control's `InsertMethod` and `UpdateMethod` properties are set).</span></span> <span data-ttu-id="0dbc4-247">但是，对于此示例中让我们将数据绑定到 FormView，然后指定其`ItemTemplate`手动。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-247">However, for this example let's bind the data to the FormView and specify its `ItemTemplate` manually.</span></span> <span data-ttu-id="0dbc4-248">首先设置 FormView`DataSourceID`属性设置为`ID`的 ObjectDataSource 控件， `ObjectDataSource1`。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-248">Start by setting the FormView's `DataSourceID` property to the `ID` of the ObjectDataSource control, `ObjectDataSource1`.</span></span> <span data-ttu-id="0dbc4-249">接下来，创建`ItemTemplate`，以便它显示产品的名称和价格`<h4>`元素以及类别和发运方名称下方的较小的字体大小。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-249">Next, create the `ItemTemplate` so that it displays the product's name and price in an `<h4>` element and the category and shipper names beneath that in a smaller font size.</span></span>


[!code-aspx[Main](displaying-data-with-the-objectdatasource-cs/samples/sample6.aspx)]


[![T<span data-ttu-id="0dbc4-250">自定义格式显示他的第一个产品 (Chai)]</span><span class="sxs-lookup"><span data-stu-id="0dbc4-250">he First Product (Chai) is Displayed in a Custom Format]</span></span>(displaying-data-with-the-objectdatasource-cs/_static/image49.png)](displaying-data-with-the-objectdatasource-cs/_static/image48.png)

<span data-ttu-id="0dbc4-251">**图 18**:第一个产品 (Chai) 显示在自定义格式 ([单击此项可查看原尺寸图像](displaying-data-with-the-objectdatasource-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="0dbc4-251">**Figure 18**: The First Product (Chai) is Displayed in a Custom Format ([Click to view full-size image](displaying-data-with-the-objectdatasource-cs/_static/image50.png))</span></span>


<span data-ttu-id="0dbc4-252">`<%# Eval(propertyName) %>`是数据绑定语法。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-252">The `<%# Eval(propertyName) %>` is the databinding syntax.</span></span> <span data-ttu-id="0dbc4-253">`Eval`方法将返回当前对象要绑定到 FormView 控件的指定属性的值。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-253">The `Eval` method returns the value of the specified property for the current object being bound to the FormView control.</span></span> <span data-ttu-id="0dbc4-254">请参阅 Alex Homer 文章[简体和扩展数据绑定语法在 ASP.NET 2.0](http://www.15seconds.com/issue/040630.htm)有关细节数据绑定的详细信息。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-254">Check out Alex Homer's article [Simplified and Extended Data Binding Syntax in ASP.NET 2.0](http://www.15seconds.com/issue/040630.htm) for more information on the ins and outs of databinding.</span></span>

<span data-ttu-id="0dbc4-255">DetailsView，如 FormView 仅显示从 ObjectDataSource 返回的第一个记录。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-255">Like the DetailsView, the FormView only shows the first record returned from the ObjectDataSource.</span></span> <span data-ttu-id="0dbc4-256">您可以在中启用分页 FormView 以允许访问者，若要逐步执行产品一一次。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-256">You can enable paging in the FormView to allow visitors to step through the products one at a time.</span></span>

## <a name="summary"></a><span data-ttu-id="0dbc4-257">总结</span><span class="sxs-lookup"><span data-stu-id="0dbc4-257">Summary</span></span>

<span data-ttu-id="0dbc4-258">访问和显示业务逻辑层中的数据可以无需编写代码由于 ASP.NET 2.0 具有 ObjectDataSource 控件来实现。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-258">Accessing and displaying data from a Business Logic Layer can be accomplished without writing a line of code thanks to ASP.NET 2.0's ObjectDataSource control.</span></span> <span data-ttu-id="0dbc4-259">ObjectDataSource 调用类的指定的方法并返回结果。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-259">The ObjectDataSource invokes a specified method of a class and returns the results.</span></span> <span data-ttu-id="0dbc4-260">这些结果可以显示在数据绑定到对象数据源的 Web 控件。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-260">These results can be displayed in a data Web control that's bound to the ObjectDataSource.</span></span> <span data-ttu-id="0dbc4-261">在本教程中我们介绍了 GridView、 DetailsView 和 FormView 控件绑定到对象数据源。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-261">In this tutorial we looked at binding the GridView, DetailsView, and FormView controls to the ObjectDataSource.</span></span>

<span data-ttu-id="0dbc4-262">到目前为止我们仅已了解如何使用 ObjectDataSource 调用无参数方法，但如果我们想要调用的方法需要输入参数，如`ProductBLL`类的`GetProductsByCategoryID(categoryID)`？</span><span class="sxs-lookup"><span data-stu-id="0dbc4-262">So far we've only seen how to use the ObjectDataSource to invoke a parameter-less method, but what if we want to invoke a method that expects input parameters, such as the `ProductBLL` class's `GetProductsByCategoryID(categoryID)`?</span></span> <span data-ttu-id="0dbc4-263">若要调用的方法，要求一个或多个参数，我们必须配置对象数据源来指定这些参数的值。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-263">In order to call a method that expects one or more parameters we must configure the ObjectDataSource to specify the values for these parameters.</span></span> <span data-ttu-id="0dbc4-264">我们将了解如何实现此目标我们[下一教程](declarative-parameters-cs.md)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-264">We'll see how to accomplish this in our [next tutorial](declarative-parameters-cs.md).</span></span>

<span data-ttu-id="0dbc4-265">快乐编程 ！</span><span class="sxs-lookup"><span data-stu-id="0dbc4-265">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="0dbc4-266">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="0dbc4-266">Further Reading</span></span>

<span data-ttu-id="0dbc4-267">在本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="0dbc4-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="0dbc4-268">创建你自己的数据源控件</span><span class="sxs-lookup"><span data-stu-id="0dbc4-268">Create Your Own Data Source Controls</span></span>](https://msdn.microsoft.com/library/ms364049.aspx)
- [<span data-ttu-id="0dbc4-269">Asp.net 2.0 GridView 示例</span><span class="sxs-lookup"><span data-stu-id="0dbc4-269">GridView Examples for ASP.NET 2.0</span></span>](https://msdn.microsoft.com/library/aa479339.aspx)
- [<span data-ttu-id="0dbc4-270">简化和扩展数据绑定 ASP.NET 2.0 中的语法</span><span class="sxs-lookup"><span data-stu-id="0dbc4-270">Simplified and Extended Data Binding Syntax in ASP.NET 2.0</span></span>](http://www.15seconds.com/issue/040630.htm)
- [<span data-ttu-id="0dbc4-271">ASP.NET 2.0 中的主题</span><span class="sxs-lookup"><span data-stu-id="0dbc4-271">Themes in ASP.NET 2.0</span></span>](http://www.odetocode.com/Articles/423.aspx)
- [<span data-ttu-id="0dbc4-272">使用主题的服务器端的样式</span><span class="sxs-lookup"><span data-stu-id="0dbc4-272">Server-Side Styles Using Themes</span></span>](https://quickstarts.asp.net/quickstartv20/aspnet/doc/themes/stylesheettheme.aspx)
- [<span data-ttu-id="0dbc4-273">如何：以编程方式应用 ASP.NET 主题</span><span class="sxs-lookup"><span data-stu-id="0dbc4-273">How To: Apply ASP.NET Themes Programmatically</span></span>](https://msdn.microsoft.com/library/tx35bd89.aspx)

## <a name="about-the-author"></a><span data-ttu-id="0dbc4-274">关于作者</span><span class="sxs-lookup"><span data-stu-id="0dbc4-274">About the Author</span></span>

<span data-ttu-id="0dbc4-275">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)的七个部 asp/ASP.NET 书籍并创办了作者[4GuysFromRolla.com](http://www.4guysfromrolla.com)，自 1998 年以来一直致力于 Microsoft Web 技术。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-275">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="0dbc4-276">Scott 是独立的顾问、 培训师和编写器。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-276">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="0dbc4-277">他最新著作是[ *Sams Teach 自己 ASP.NET 2.0 24 小时内*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-277">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="0dbc4-278">他可以到达[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0dbc4-278">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="0dbc4-279">或通过他的博客，其中，请参阅[ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-279">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="0dbc4-280">特别感谢</span><span class="sxs-lookup"><span data-stu-id="0dbc4-280">Special Thanks To</span></span>

<span data-ttu-id="0dbc4-281">很多有用的审阅者已评审本系列教程。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-281">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="0dbc4-282">本教程中的潜在顾客审阅者是 Hilton Giesenow。</span><span class="sxs-lookup"><span data-stu-id="0dbc4-282">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="0dbc4-283">是否有兴趣查看我即将推出的 MSDN 文章？</span><span class="sxs-lookup"><span data-stu-id="0dbc4-283">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="0dbc4-284">如果是这样，给我在行[ mitchell@4GuysFromRolla.com。](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0dbc4-284">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="0dbc4-285">下一步</span><span class="sxs-lookup"><span data-stu-id="0dbc4-285">Next</span></span>](declarative-parameters-cs.md)
