---
uid: web-forms/overview/moving-to-aspnet-20/data-bound-controls
title: 数据绑定控件 |Microsoft Docs
author: microsoft
description: 大多数 ASP.NET 应用程序依赖于后端数据源的某种程度的数据呈现。 数据绑定控件是交互 w ... 的 pivotal 部分
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 0e23ff32-646d-43f3-8bec-6b2313d3abd6
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/data-bound-controls
msc.type: authoredcontent
ms.openlocfilehash: 1154b38e0fa3d9d56cb407ae659c3b0d69871fda
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/06/2020
ms.locfileid: "78488870"
---
# <a name="data-bound-controls"></a><span data-ttu-id="9fda8-104">数据绑定控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-104">Data Bound Controls</span></span>

<span data-ttu-id="9fda8-105">由[Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="9fda8-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="9fda8-106">大多数 ASP.NET 应用程序依赖于后端数据源的某种程度的数据呈现。</span><span class="sxs-lookup"><span data-stu-id="9fda8-106">Most ASP.NET applications rely on some degree of data presentation from a back-end data source.</span></span> <span data-ttu-id="9fda8-107">数据绑定控件是在动态 Web 应用程序中与数据进行交互的 pivotal 部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-107">Data-bound controls have been a pivotal part of interacting with data in dynamic Web applications.</span></span> <span data-ttu-id="9fda8-108">ASP.NET 2.0 引入了对数据绑定控件的一些重大改进，包括新的 BaseDataBoundControl 类和声明性语法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-108">ASP.NET 2.0 introduces some substantial improvements to data-bound controls, including a new BaseDataBoundControl class and declarative syntax.</span></span>

<span data-ttu-id="9fda8-109">大多数 ASP.NET 应用程序依赖于后端数据源的某种程度的数据呈现。</span><span class="sxs-lookup"><span data-stu-id="9fda8-109">Most ASP.NET applications rely on some degree of data presentation from a back-end data source.</span></span> <span data-ttu-id="9fda8-110">数据绑定控件是在动态 Web 应用程序中与数据进行交互的 pivotal 部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-110">Data-bound controls have been a pivotal part of interacting with data in dynamic Web applications.</span></span> <span data-ttu-id="9fda8-111">ASP.NET 2.0 引入了对数据绑定控件的一些重大改进，包括新的 BaseDataBoundControl 类和声明性语法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-111">ASP.NET 2.0 introduces some substantial improvements to data-bound controls, including a new BaseDataBoundControl class and declarative syntax.</span></span>

<span data-ttu-id="9fda8-112">BaseDataBoundControl 充当 DataBoundControl 类和 HierarchicalDataBoundControl 类的基类。</span><span class="sxs-lookup"><span data-stu-id="9fda8-112">The BaseDataBoundControl acts as the base class for the DataBoundControl class and the HierarchicalDataBoundControl class.</span></span> <span data-ttu-id="9fda8-113">在此模块中，我们将讨论从 DataBoundControl 派生的以下类：</span><span class="sxs-lookup"><span data-stu-id="9fda8-113">In this module, we will discuss the following classes that derive from DataBoundControl:</span></span>

- <span data-ttu-id="9fda8-114">AdRotator</span><span class="sxs-lookup"><span data-stu-id="9fda8-114">AdRotator</span></span>
- <span data-ttu-id="9fda8-115">列表控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-115">List controls</span></span>
- <span data-ttu-id="9fda8-116">GridView</span><span class="sxs-lookup"><span data-stu-id="9fda8-116">GridView</span></span>
- <span data-ttu-id="9fda8-117">FormView</span><span class="sxs-lookup"><span data-stu-id="9fda8-117">FormView</span></span>
- <span data-ttu-id="9fda8-118">DetailsView</span><span class="sxs-lookup"><span data-stu-id="9fda8-118">DetailsView</span></span>

<span data-ttu-id="9fda8-119">我们还将讨论派生自 HierarchicalDataBoundControl 类的以下类：</span><span class="sxs-lookup"><span data-stu-id="9fda8-119">We will also discuss the following classes that derive from HierarchicalDataBoundControl class:</span></span>

- <span data-ttu-id="9fda8-120">TreeView</span><span class="sxs-lookup"><span data-stu-id="9fda8-120">TreeView</span></span>
- <span data-ttu-id="9fda8-121">菜单</span><span class="sxs-lookup"><span data-stu-id="9fda8-121">Menu</span></span>
- <span data-ttu-id="9fda8-122">SiteMapPath</span><span class="sxs-lookup"><span data-stu-id="9fda8-122">SiteMapPath</span></span>

## <a name="databoundcontrol-class"></a><span data-ttu-id="9fda8-123">DataBoundControl 类</span><span class="sxs-lookup"><span data-stu-id="9fda8-123">DataBoundControl Class</span></span>

<span data-ttu-id="9fda8-124">DataBoundControl 类是用于与表格或列表样式数据进行交互的抽象类（在 VB 中标记为 MustInherit）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-124">The DataBoundControl class is an abstract class (marked MustInherit in VB) used to interact with tabular or list-style data.</span></span> <span data-ttu-id="9fda8-125">以下控件是派生自 DataBoundControl 的一些控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-125">The following controls are some of the controls that derive from DataBoundControl.</span></span>

## <a name="adrotator"></a><span data-ttu-id="9fda8-126">AdRotator</span><span class="sxs-lookup"><span data-stu-id="9fda8-126">AdRotator</span></span>

<span data-ttu-id="9fda8-127">使用 AdRotator 控件可以在链接到特定 URL 的网页上显示图形横幅。</span><span class="sxs-lookup"><span data-stu-id="9fda8-127">The AdRotator control allows you to display a graphic banner on a Web page that is linked to a specific URL.</span></span> <span data-ttu-id="9fda8-128">使用控件的属性旋转显示的图形。</span><span class="sxs-lookup"><span data-stu-id="9fda8-128">The graphic that is displayed is rotated using properties for the control.</span></span> <span data-ttu-id="9fda8-129">可以使用 "**印记**" 属性配置页面上特定广告显示的频率，可以使用关键字筛选来筛选广告。</span><span class="sxs-lookup"><span data-stu-id="9fda8-129">The frequency of a particular ad displaying on a page can be configured using the **Impressions** property and ads can be filtered using keyword filtering.</span></span>

<span data-ttu-id="9fda8-130">AdRotator 控件使用 XML 文件或数据库中的表来表示数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-130">AdRotator controls use either an XML file or a table in a database for data.</span></span> <span data-ttu-id="9fda8-131">在 XML 文件中使用以下属性来配置 AdRotator 控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-131">The following attributes are used in XML files to configure the AdRotator control.</span></span>

### <a name="imageurl"></a><span data-ttu-id="9fda8-132">ImageUrl</span><span class="sxs-lookup"><span data-stu-id="9fda8-132">ImageUrl</span></span>
<span data-ttu-id="9fda8-133">要为广告显示的图像的 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-133">The URL of an image to display for the ad.</span></span>

### <a name="navigateurl"></a><span data-ttu-id="9fda8-134">NavigateUrl</span><span class="sxs-lookup"><span data-stu-id="9fda8-134">NavigateUrl</span></span>
<span data-ttu-id="9fda8-135">单击广告时应将用户转到的 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-135">The URL that the user should be taken to when the ad is clicked.</span></span> <span data-ttu-id="9fda8-136">应进行 URL 编码。</span><span class="sxs-lookup"><span data-stu-id="9fda8-136">This should be URL encoded.</span></span>

### <a name="alternatetext"></a><span data-ttu-id="9fda8-137">AlternateText</span><span class="sxs-lookup"><span data-stu-id="9fda8-137">AlternateText</span></span>
<span data-ttu-id="9fda8-138">在工具提示中显示并由屏幕阅读器读取的替换文字。</span><span class="sxs-lookup"><span data-stu-id="9fda8-138">The alternate text that is displayed in a tooltip and read by screen readers.</span></span> <span data-ttu-id="9fda8-139">当 ImageUrl 指定的图像不可用时，还会显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-139">Also displays when the image specified by ImageUrl is not available.</span></span>

### <a name="keyword"></a><span data-ttu-id="9fda8-140">关键字</span><span class="sxs-lookup"><span data-stu-id="9fda8-140">Keyword</span></span>
<span data-ttu-id="9fda8-141">定义使用关键字筛选时可以使用的关键字。</span><span class="sxs-lookup"><span data-stu-id="9fda8-141">Defines a keyword that can be used when using keyword filtering.</span></span> <span data-ttu-id="9fda8-142">如果指定，则只显示关键字与关键字筛选器匹配的广告。</span><span class="sxs-lookup"><span data-stu-id="9fda8-142">If specified, only those ads with a keyword matching the keyword filter will be displayed.</span></span>

### <a name="impressions"></a><span data-ttu-id="9fda8-143">形成</span><span class="sxs-lookup"><span data-stu-id="9fda8-143">Impressions</span></span>
<span data-ttu-id="9fda8-144">一个权重号，确定特定广告可能出现的频率。</span><span class="sxs-lookup"><span data-stu-id="9fda8-144">A weighting number that determines how often a particular ad is likely to appear.</span></span> <span data-ttu-id="9fda8-145">它相对于同一文件中其他广告的印象。</span><span class="sxs-lookup"><span data-stu-id="9fda8-145">It is relative to the impression of other ads in the same file.</span></span> <span data-ttu-id="9fda8-146">XML 文件中所有广告的集体印象的最大值为 2048000000 1。</span><span class="sxs-lookup"><span data-stu-id="9fda8-146">The maximum value of the collective impressions for all ads in an XML file is 2,048,000,000 1.</span></span>

### <a name="height"></a><span data-ttu-id="9fda8-147">高度</span><span class="sxs-lookup"><span data-stu-id="9fda8-147">Height</span></span>
<span data-ttu-id="9fda8-148">广告的高度（以像素为单位）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-148">The height of the ad in pixels.</span></span>

### <a name="width"></a><span data-ttu-id="9fda8-149">宽度</span><span class="sxs-lookup"><span data-stu-id="9fda8-149">Width</span></span>
<span data-ttu-id="9fda8-150">广告的宽度（以像素为单位）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-150">The width of the ad in pixels.</span></span>

> [!NOTE]
> <span data-ttu-id="9fda8-151">Height 和 Width 属性覆盖 AdRotator 控件本身的高度和宽度。</span><span class="sxs-lookup"><span data-stu-id="9fda8-151">The Height and Width attributes override the height and width for the AdRotator control itself.</span></span>

<span data-ttu-id="9fda8-152">典型的 XML 文件可能如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-152">A typical XML file might look like the following:</span></span>

[!code-xml[Main](data-bound-controls/samples/sample1.xml)]

<span data-ttu-id="9fda8-153">在上面的示例中，Contoso 的广告为 ASP.NET 网站的广告提供的两倍，因为该属性的值为。</span><span class="sxs-lookup"><span data-stu-id="9fda8-153">In the above example, the ad for Contoso is twice as likely to appear as the ad for the ASP.NET Web site because of the value for the Impressions attribute.</span></span>

<span data-ttu-id="9fda8-154">若要显示上述 XML 文件中的广告，请将 AdRotator 控件添加到页面，并将**AdvertisementFile**属性设置为指向该 xml 文件，如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-154">To display ads from the above XML file, add an AdRotator control to a page and set the **AdvertisementFile** property to point to the XML file as shown below:</span></span>

[!code-aspx[Main](data-bound-controls/samples/sample2.aspx)]

<span data-ttu-id="9fda8-155">如果选择使用数据库表作为 AdRotator 控件的数据源，则首先需要使用以下架构设置数据库：</span><span class="sxs-lookup"><span data-stu-id="9fda8-155">If you choose to use a database table as the data source for your AdRotator control, you will first need to set up a database using the following schema:</span></span>

| <span data-ttu-id="9fda8-156">**列名**</span><span class="sxs-lookup"><span data-stu-id="9fda8-156">**Column name**</span></span> | <span data-ttu-id="9fda8-157">**Data type**</span><span class="sxs-lookup"><span data-stu-id="9fda8-157">**Data type**</span></span> | <span data-ttu-id="9fda8-158">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-158">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9fda8-159">Id</span><span class="sxs-lookup"><span data-stu-id="9fda8-159">ID</span></span> | <span data-ttu-id="9fda8-160">int</span><span class="sxs-lookup"><span data-stu-id="9fda8-160">int</span></span> | <span data-ttu-id="9fda8-161">主密钥。</span><span class="sxs-lookup"><span data-stu-id="9fda8-161">Primary key.</span></span> <span data-ttu-id="9fda8-162">此列可以包含任何名称。</span><span class="sxs-lookup"><span data-stu-id="9fda8-162">This column can have any name.</span></span> |
| <span data-ttu-id="9fda8-163">ImageUrl</span><span class="sxs-lookup"><span data-stu-id="9fda8-163">ImageUrl</span></span> | <span data-ttu-id="9fda8-164">nvarchar （*长度*）</span><span class="sxs-lookup"><span data-stu-id="9fda8-164">nvarchar(*length*)</span></span> | <span data-ttu-id="9fda8-165">要为广告显示的图像的相对或绝对 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-165">The relative or absolute URL of the image to display for the ad.</span></span> |
| <span data-ttu-id="9fda8-166">NavigateUrl</span><span class="sxs-lookup"><span data-stu-id="9fda8-166">NavigateUrl</span></span> | <span data-ttu-id="9fda8-167">nvarchar （*长度*）</span><span class="sxs-lookup"><span data-stu-id="9fda8-167">nvarchar(*length*)</span></span> | <span data-ttu-id="9fda8-168">广告的目标 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-168">The target URL for the ad.</span></span> <span data-ttu-id="9fda8-169">如果未提供值，则广告不是超链接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-169">If you do not provide a value, the ad is not a hyperlink.</span></span> |
| <span data-ttu-id="9fda8-170">AlternateText</span><span class="sxs-lookup"><span data-stu-id="9fda8-170">AlternateText</span></span> | <span data-ttu-id="9fda8-171">nvarchar （*长度*）</span><span class="sxs-lookup"><span data-stu-id="9fda8-171">nvarchar(*length*)</span></span> | <span data-ttu-id="9fda8-172">当找不到图像时显示的文本。</span><span class="sxs-lookup"><span data-stu-id="9fda8-172">The text displayed if the image cannot be found.</span></span> <span data-ttu-id="9fda8-173">在某些浏览器中，文本显示为工具提示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-173">In some browsers, the text is displayed as a ToolTip.</span></span> <span data-ttu-id="9fda8-174">替代文本还可用于辅助功能，以便无法看到图形的用户可以听到大声朗读的说明。</span><span class="sxs-lookup"><span data-stu-id="9fda8-174">Alternate text is also used for accessibility so that users who cannot see the graphic can hear its description read out loud.</span></span> |
| <span data-ttu-id="9fda8-175">关键字</span><span class="sxs-lookup"><span data-stu-id="9fda8-175">Keyword</span></span> | <span data-ttu-id="9fda8-176">nvarchar （*长度*）</span><span class="sxs-lookup"><span data-stu-id="9fda8-176">nvarchar(*length*)</span></span> | <span data-ttu-id="9fda8-177">可在其中筛选页面的广告的类别。</span><span class="sxs-lookup"><span data-stu-id="9fda8-177">A category for the ad on which the page can filter.</span></span> |
| <span data-ttu-id="9fda8-178">形成</span><span class="sxs-lookup"><span data-stu-id="9fda8-178">Impressions</span></span> | <span data-ttu-id="9fda8-179">int(4)</span><span class="sxs-lookup"><span data-stu-id="9fda8-179">int(4)</span></span> | <span data-ttu-id="9fda8-180">指示广告显示频率的数字。</span><span class="sxs-lookup"><span data-stu-id="9fda8-180">A number that indicates the likelihood of how often the ad is displayed.</span></span> <span data-ttu-id="9fda8-181">数字越大，显示广告的频率就越多。</span><span class="sxs-lookup"><span data-stu-id="9fda8-181">The larger the number, the more often the ad will be displayed.</span></span> <span data-ttu-id="9fda8-182">XML 文件中所有印记值的总和不得超过 2048000000-1。</span><span class="sxs-lookup"><span data-stu-id="9fda8-182">The total of all impressions values in the XML file may not exceed 2,048,000,000 - 1.</span></span> |
| <span data-ttu-id="9fda8-183">宽度</span><span class="sxs-lookup"><span data-stu-id="9fda8-183">Width</span></span> | <span data-ttu-id="9fda8-184">int(4)</span><span class="sxs-lookup"><span data-stu-id="9fda8-184">int(4)</span></span> | <span data-ttu-id="9fda8-185">图像的宽度（以像素为单位）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-185">The width of the image in pixels.</span></span> |
| <span data-ttu-id="9fda8-186">高度</span><span class="sxs-lookup"><span data-stu-id="9fda8-186">Height</span></span> | <span data-ttu-id="9fda8-187">int(4)</span><span class="sxs-lookup"><span data-stu-id="9fda8-187">int(4)</span></span> | <span data-ttu-id="9fda8-188">图像的高度（以像素为单位）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-188">The height of the image in pixels.</span></span> |

<span data-ttu-id="9fda8-189">如果你已有一个具有不同架构的数据库，则可以使用**AlternateTextField**、 **ImageUrlField**和**NavigateUrlField**属性将 AdRotator 特性映射到现有数据库。</span><span class="sxs-lookup"><span data-stu-id="9fda8-189">In cases where you already have a database with a different schema, you can use the **AlternateTextField**, **ImageUrlField**, and **NavigateUrlField** properties to map the AdRotator attributes to your existing database.</span></span> <span data-ttu-id="9fda8-190">若要在 AdRotator 控件中显示数据库中的数据，请向页面中添加一个数据源控件，将数据源控件的连接字符串配置为指向您的数据库，并将 AdRotator 控件的**DataSourceID**属性设置为数据源控件的 ID。</span><span class="sxs-lookup"><span data-stu-id="9fda8-190">To display the data from the database in the AdRotator control, add a data source control to the page, configure the connection string for the data source control to point to your database, and set the AdRotator control's **DataSourceID** property to the ID of the data source control.</span></span> <span data-ttu-id="9fda8-191">如果需要以编程方式配置 AdRotator 广告，请使用 AdCreated 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-191">In cases where you have a need to configure AdRotator ads programmatically, use the AdCreated event.</span></span> <span data-ttu-id="9fda8-192">AdCreated 事件采用两个参数;一个对象，另一个是 AdCreatedEventArgs 的实例。</span><span class="sxs-lookup"><span data-stu-id="9fda8-192">The AdCreated event takes two parameters; one an object, and the other an instance of AdCreatedEventArgs.</span></span> <span data-ttu-id="9fda8-193">AdCreatedEventArgs 是对正在创建的广告的引用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-193">The AdCreatedEventArgs is a reference to the ad that is being created.</span></span>

<span data-ttu-id="9fda8-194">以下代码片段以编程方式为 ad 设置 ImageUrl、NavigateUrl 和 AlternateText：</span><span class="sxs-lookup"><span data-stu-id="9fda8-194">The following code snippet sets the ImageUrl, NavigateUrl, and AlternateText for an ad programmatically:</span></span>

[!code-csharp[Main](data-bound-controls/samples/sample3.cs)]

## <a name="list-controls"></a><span data-ttu-id="9fda8-195">列表控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-195">List Controls</span></span>

<span data-ttu-id="9fda8-196">列表控件包括 ListBox、DropDownList、CheckBoxList、RadioButtonList 和 BulletedList。</span><span class="sxs-lookup"><span data-stu-id="9fda8-196">List controls include the ListBox, DropDownList, CheckBoxList, RadioButtonList, and BulletedList.</span></span> <span data-ttu-id="9fda8-197">其中每个控件都可以是绑定到数据源的数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-197">Each of these controls can be data bound to a data source.</span></span> <span data-ttu-id="9fda8-198">它们使用数据源中的一个字段作为显示文本，并且可以选择使用第二个字段作为项的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-198">They use one field in the data source as the display text and can optionally use a second field as the value of an item.</span></span> <span data-ttu-id="9fda8-199">还可以在设计时静态地添加项，并可以混合从数据源添加的静态项和动态项。</span><span class="sxs-lookup"><span data-stu-id="9fda8-199">Items can also be added statically at design-time, and you can mix static items and dynamic items added from a data source.</span></span>

<span data-ttu-id="9fda8-200">若要将列表控件绑定到数据，请将数据源控件添加到该页。</span><span class="sxs-lookup"><span data-stu-id="9fda8-200">To data bind a list control, add a data source control to the page.</span></span> <span data-ttu-id="9fda8-201">为数据源控件指定选择命令，然后将列表控件的 DataSourceID 属性设置为数据源控件的 ID。</span><span class="sxs-lookup"><span data-stu-id="9fda8-201">Specify a SELECT command for the data source control and then set the DataSourceID property of the list control to the ID of the data source control.</span></span> <span data-ttu-id="9fda8-202">使用**DataTextField**和**DataValueField**属性定义控件的显示文本和值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-202">Use the **DataTextField** and **DataValueField** properties to define the display text and the value for the control.</span></span> <span data-ttu-id="9fda8-203">此外，还可以使用**DataTextFormatString**属性来控制显示文本的外观，如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-203">Additionally, you can use the **DataTextFormatString** property to control the appearance of the display text as follows:</span></span>

| <span data-ttu-id="9fda8-204">**表达式**</span><span class="sxs-lookup"><span data-stu-id="9fda8-204">**Expression**</span></span> | <span data-ttu-id="9fda8-205">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-205">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-206">价格： {0:C}</span><span class="sxs-lookup"><span data-stu-id="9fda8-206">Price: {0:C}</span></span> | <span data-ttu-id="9fda8-207">对于数字/小数数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-207">For numeric/decimal data.</span></span> <span data-ttu-id="9fda8-208">显示文本 "Price："，后跟以货币格式表示的数字。</span><span class="sxs-lookup"><span data-stu-id="9fda8-208">Displays the literal "Price:" followed by numbers in currency format.</span></span> <span data-ttu-id="9fda8-209">货币格式取决于在**Page**指令或 web.config 文件中的 culture 特性中指定的区域性设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-209">The currency format depends on the culture setting specified in the culture attribute on the **Page** directive or in the Web.config file.</span></span> |
| {0:D4} | <span data-ttu-id="9fda8-210">对于整数数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-210">For integer data.</span></span> <span data-ttu-id="9fda8-211">不能与十进制数一起使用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-211">Cannot be used with decimal numbers.</span></span> <span data-ttu-id="9fda8-212">整数显示在宽度为4个字符的零填充字段中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-212">Integers are displayed in a zero-padded field that is four characters wide.</span></span> |
| <span data-ttu-id="9fda8-213">{0:N2}%</span><span class="sxs-lookup"><span data-stu-id="9fda8-213">{0:N2}%</span></span> | <span data-ttu-id="9fda8-214">用于数值数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-214">For numeric data.</span></span> <span data-ttu-id="9fda8-215">显示数字，其后跟文本 "%"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-215">Displays the number with 2-decimal place precision followed by the literal "%".</span></span> |
| <span data-ttu-id="9fda8-216">{0:000.0}</span><span class="sxs-lookup"><span data-stu-id="9fda8-216">{0:000.0}</span></span> | <span data-ttu-id="9fda8-217">对于数字/小数数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-217">For numeric/decimal data.</span></span> <span data-ttu-id="9fda8-218">数字舍入为一个小数位。</span><span class="sxs-lookup"><span data-stu-id="9fda8-218">Numbers are rounded to one decimal place.</span></span> <span data-ttu-id="9fda8-219">不到三位的数字用零填充。</span><span class="sxs-lookup"><span data-stu-id="9fda8-219">Numbers less than three digits are zero-padded.</span></span> |
| {0:D} | <span data-ttu-id="9fda8-220">对于日期/时间数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-220">For date/time data.</span></span> <span data-ttu-id="9fda8-221">显示长日期格式（"星期四，6月6日，1996"）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-221">Displays long date format ("Thursday, August 06, 1996").</span></span> <span data-ttu-id="9fda8-222">日期格式取决于页面或 Web.config 文件的区域性设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-222">Date format depends on the culture setting of the page or the Web.config file.</span></span> |
| {0:d} | <span data-ttu-id="9fda8-223">对于日期/时间数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-223">For date/time data.</span></span> <span data-ttu-id="9fda8-224">显示短日期格式（"12/31/99"）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-224">Displays short date format ("12/31/99").</span></span> |
| <span data-ttu-id="9fda8-225">{0:yy-MM-dd}</span><span class="sxs-lookup"><span data-stu-id="9fda8-225">{0:yy-MM-dd}</span></span> | <span data-ttu-id="9fda8-226">对于日期/时间数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-226">For date/time data.</span></span> <span data-ttu-id="9fda8-227">按数字年-月-日格式显示日期（96-08-06）</span><span class="sxs-lookup"><span data-stu-id="9fda8-227">Displays date in numeric year-month-day format (96-08-06)</span></span> |

## <a name="gridview"></a><span data-ttu-id="9fda8-228">GridView</span><span class="sxs-lookup"><span data-stu-id="9fda8-228">GridView</span></span>

<span data-ttu-id="9fda8-229">GridView 控件允许使用声明性方法显示和编辑表格数据，并且是 DataGrid 控件的后继控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-229">The GridView control allows for tabular data display and editing using a declarative approach and is the successor to the DataGrid control.</span></span> <span data-ttu-id="9fda8-230">以下功能在 GridView 控件中可用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-230">The following features are available in the GridView control.</span></span>

- <span data-ttu-id="9fda8-231">绑定到数据源控件，如 SqlDataSource。</span><span class="sxs-lookup"><span data-stu-id="9fda8-231">Binding to data source controls, such as SqlDataSource.</span></span>
- <span data-ttu-id="9fda8-232">内置的排序功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-232">Built-in sorting capabilities.</span></span>
- <span data-ttu-id="9fda8-233">内置的更新和删除功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-233">Built-in updating and deleting capabilities.</span></span>
- <span data-ttu-id="9fda8-234">内置的分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-234">Built-in paging capabilities.</span></span>
- <span data-ttu-id="9fda8-235">内置行选择功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-235">Built-in row selection capabilities.</span></span>
- <span data-ttu-id="9fda8-236">以编程方式访问 GridView 对象模型，以动态设置属性、处理事件等。</span><span class="sxs-lookup"><span data-stu-id="9fda8-236">Programmatic access to the GridView object model to dynamically set properties, handle events, and so on.</span></span>
- <span data-ttu-id="9fda8-237">多个键字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-237">Multiple key fields.</span></span>
- <span data-ttu-id="9fda8-238">超链接列的多个数据字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-238">Multiple data fields for the hyperlink columns.</span></span>
- <span data-ttu-id="9fda8-239">通过主题和样式自定义外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-239">Customizable appearance through themes and styles.</span></span>

<span data-ttu-id="9fda8-240">**列字段**</span><span class="sxs-lookup"><span data-stu-id="9fda8-240">**Column Fields**</span></span>

<span data-ttu-id="9fda8-241">GridView 控件中的每一列都由一个 DataControlField 对象表示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-241">Each column in the GridView control is represented by a DataControlField object.</span></span> <span data-ttu-id="9fda8-242">默认情况下，AutoGenerateColumns 属性设置为**true**，这将为数据源中的每个字段创建 AutoGeneratedField 对象。</span><span class="sxs-lookup"><span data-stu-id="9fda8-242">By default, the AutoGenerateColumns property is set to **true**, which creates an AutoGeneratedField object for each field in the data source.</span></span> <span data-ttu-id="9fda8-243">然后，每个字段都按每个字段在数据源中出现的顺序呈现为 GridView 控件中的一列。</span><span class="sxs-lookup"><span data-stu-id="9fda8-243">Each field is then rendered as a column in the GridView control in the order that each field appears in the data source.</span></span> <span data-ttu-id="9fda8-244">还可以通过将 " **AutoGenerateColumns** " 属性设置为 " **false** "，然后定义自己的列字段集合，手动控制在**GridView**控件中显示的列字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-244">You can also manually control which column fields appear in the **GridView** control by setting the **AutoGenerateColumns** property to **false** and then defining your own column field collection.</span></span> <span data-ttu-id="9fda8-245">不同的列字段类型确定控件中列的行为。</span><span class="sxs-lookup"><span data-stu-id="9fda8-245">Different column field types determine the behavior of the columns in the control.</span></span>

<span data-ttu-id="9fda8-246">下表列出了可以使用的不同列字段类型。</span><span class="sxs-lookup"><span data-stu-id="9fda8-246">The following table lists the different column field types that can be used.</span></span>

| <span data-ttu-id="9fda8-247">**列字段类型**</span><span class="sxs-lookup"><span data-stu-id="9fda8-247">**Column field type**</span></span> | <span data-ttu-id="9fda8-248">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-248">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-249">BoundField</span><span class="sxs-lookup"><span data-stu-id="9fda8-249">BoundField</span></span> | <span data-ttu-id="9fda8-250">显示数据源中的字段的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-250">Displays the value of a field in a data source.</span></span> <span data-ttu-id="9fda8-251">这是 GridView 控件的默认列类型。</span><span class="sxs-lookup"><span data-stu-id="9fda8-251">This is the default column type of the GridView control.</span></span> |
| <span data-ttu-id="9fda8-252">ButtonField</span><span class="sxs-lookup"><span data-stu-id="9fda8-252">ButtonField</span></span> | <span data-ttu-id="9fda8-253">显示 GridView 控件中每个项的命令按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-253">Displays a command button for each item in the GridView control.</span></span> <span data-ttu-id="9fda8-254">这允许您创建自定义按钮控件的列，如 "添加" 或 "移除" 按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-254">This allows you to create a column of custom button controls, such as the Add or the Remove button.</span></span> |
| <span data-ttu-id="9fda8-255">CheckBoxField</span><span class="sxs-lookup"><span data-stu-id="9fda8-255">CheckBoxField</span></span> | <span data-ttu-id="9fda8-256">显示 GridView 控件中每个项的复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-256">Displays a check box for each item in the GridView control.</span></span> <span data-ttu-id="9fda8-257">此列字段类型通常用于显示具有布尔值的字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-257">This column field type is commonly used to display fields with a Boolean value.</span></span> |
| <span data-ttu-id="9fda8-258">CommandField</span><span class="sxs-lookup"><span data-stu-id="9fda8-258">CommandField</span></span> | <span data-ttu-id="9fda8-259">显示预定义的命令按钮，以执行选择、编辑或删除操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-259">Displays predefined command buttons to perform selecting, editing, or deleting operations.</span></span> |
| <span data-ttu-id="9fda8-260">HyperLinkField</span><span class="sxs-lookup"><span data-stu-id="9fda8-260">HyperLinkField</span></span> | <span data-ttu-id="9fda8-261">将数据源中的字段值显示为超链接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-261">Displays the value of a field in a data source as a hyperlink.</span></span> <span data-ttu-id="9fda8-262">通过此列字段类型，可以将第二个字段绑定到超链接的 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-262">This column field type allows you to bind a second field to the hyperlink's URL.</span></span> |
| <span data-ttu-id="9fda8-263">ImageField</span><span class="sxs-lookup"><span data-stu-id="9fda8-263">ImageField</span></span> | <span data-ttu-id="9fda8-264">显示 GridView 控件中每个项的图像。</span><span class="sxs-lookup"><span data-stu-id="9fda8-264">Displays an image for each item in the GridView control.</span></span> |
| <span data-ttu-id="9fda8-265">TemplateField</span><span class="sxs-lookup"><span data-stu-id="9fda8-265">TemplateField</span></span> | <span data-ttu-id="9fda8-266">根据指定的模板，显示 GridView 控件中每个项的用户定义内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-266">Displays user-defined content for each item in the GridView control according to a specified template.</span></span> <span data-ttu-id="9fda8-267">此列字段类型允许您创建自定义列字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-267">This column field type allows you to create a custom column field.</span></span> |

<span data-ttu-id="9fda8-268">若要以声明方式定义列字段集合，请首先在 GridView 控件的开始标记和结束标记之间添加开始和结束 **&lt;列&gt;** 标记。</span><span class="sxs-lookup"><span data-stu-id="9fda8-268">To define a column field collection declaratively, first add opening and closing **&lt;Columns&gt;** tags between the opening and closing tags of the GridView control.</span></span> <span data-ttu-id="9fda8-269">接下来，列出要在开始和结束 **&lt;列&gt;** 标记之间包括的列字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-269">Next, list the column fields that you want to include between the opening and closing **&lt;Columns&gt;** tags.</span></span> <span data-ttu-id="9fda8-270">指定的列将按所列顺序添加到 Columns 集合中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-270">The columns specified are added to the Columns collection in the order listed.</span></span> <span data-ttu-id="9fda8-271">**Columns**集合存储控件中的所有列字段，并允许你以编程方式管理 GridView 控件中的列字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-271">The **Columns** collection stores all the column fields in the control and allows you to programmatically manage the column fields in the GridView control.</span></span>

<span data-ttu-id="9fda8-272">显式声明的列字段可与自动生成的列字段一起显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-272">Explicitly declared column fields can be displayed in combination with automatically generated column fields.</span></span> <span data-ttu-id="9fda8-273">如果同时使用这两个列，则将首先呈现显式声明的列字段，后跟自动生成的列字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-273">When both are used, explicitly declared column fields are rendered first, followed by the automatically generated column fields.</span></span>

## <a name="binding-to-data"></a><span data-ttu-id="9fda8-274">绑定到数据</span><span class="sxs-lookup"><span data-stu-id="9fda8-274">Binding to Data</span></span>

<span data-ttu-id="9fda8-275">GridView 控件可以绑定到数据源控件（如 SqlDataSource、 **ObjectDataSource**等），以及任何实现了接口的数据源（例如，system.web、node.js、或 system.web..........）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-275">The GridView control can be bound to a data source control (such as **SqlDataSource**, **ObjectDataSource**, and so on), as well as any data source that implements the System.Collections.IEnumerable interface (such as System.Data.DataView, System.Collections.ArrayList, or System.Collections.Hashtable).</span></span> <span data-ttu-id="9fda8-276">使用以下方法之一将 GridView 控件绑定到相应的数据源类型：</span><span class="sxs-lookup"><span data-stu-id="9fda8-276">Use one of the following methods to bind the GridView control to the appropriate data source type:</span></span>

- <span data-ttu-id="9fda8-277">若要绑定到数据源控件，请将 GridView 控件的 DataSourceID 属性设置为数据源控件的 ID 值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-277">To bind to a data source control, set the DataSourceID property of the GridView control to the ID value of the data source control.</span></span> <span data-ttu-id="9fda8-278">GridView 控件将自动绑定到指定的数据源控件，并可以利用数据源控件的功能执行排序、更新、删除和分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-278">The GridView control automatically binds to the specified data source control and can take advantage of the data source control's capabilities to perform sorting, updating, deleting, and paging functionality.</span></span> <span data-ttu-id="9fda8-279">这是绑定到数据的首选方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-279">This is the preferred method to bind to data.</span></span>
- <span data-ttu-id="9fda8-280">若要绑定到实现 System.web 接口的数据源，请以编程方式将 GridView 控件的 DataSource 属性设置为数据源，然后调用 DataBind 方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-280">To bind to a data source that implements the System.Collections.IEnumerable interface, programmatically set the DataSource property of the GridView control to the data source and then call the DataBind method.</span></span> <span data-ttu-id="9fda8-281">使用此方法时，GridView 控件不提供内置排序、更新、删除和分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-281">When using this method, the GridView control does not provide built-in sorting, updating, deleting, and paging functionality.</span></span> <span data-ttu-id="9fda8-282">你需要自行提供此功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-282">You need to provide this functionality yourself.</span></span>

## <a name="data-operations"></a><span data-ttu-id="9fda8-283">数据操作</span><span class="sxs-lookup"><span data-stu-id="9fda8-283">Data Operations</span></span>

<span data-ttu-id="9fda8-284">GridView 控件提供了许多内置功能，使用户可以对控件中的项进行排序、更新、删除、选择和分页。</span><span class="sxs-lookup"><span data-stu-id="9fda8-284">The GridView control provides many built-in capabilities that allow the user to sort, update, delete, select, and page through items in the control.</span></span> <span data-ttu-id="9fda8-285">当 GridView 控件绑定到数据源控件时，GridView 控件可以利用数据源控件的功能，并提供自动排序、更新和删除功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-285">When the GridView control is bound to a data source control, the GridView control can take advantage of the data source control's capabilities and provide automatic sorting, updating, and deleting functionality.</span></span>

> [!NOTE]
> <span data-ttu-id="9fda8-286">GridView 控件可以提供对其他类型的数据源的排序、更新和删除的支持;但是，你将需要为这些操作的实现提供相应的事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="9fda8-286">The GridView control can provide support for sorting, updating, and deleting with other types of data sources; however, you will need to provide an appropriate event handler with the implementation for these operations.</span></span>

<span data-ttu-id="9fda8-287">排序允许用户通过单击列的标题，对 GridView 控件中的项进行排序。</span><span class="sxs-lookup"><span data-stu-id="9fda8-287">Sorting allows the user to sort the items in the GridView control with respect to a specific column by clicking on the column's header.</span></span> <span data-ttu-id="9fda8-288">若要启用排序，请将 AllowSorting 属性设置为**true**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-288">To enable sorting, set the AllowSorting property to **true**.</span></span>

<span data-ttu-id="9fda8-289">单击 " **ButtonField** " 或 " **TemplateField** " 列字段中的按钮时，将启用自动更新、删除和选择功能，分别为命令名称为 "编辑"、"删除" 和 "选择"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-289">The automatic updating, deleting, and selection functionalities are enabled when a button in a **ButtonField** or **TemplateField** column field, with a command name of "Edit", "Delete", and "Select", respectively, is clicked.</span></span> <span data-ttu-id="9fda8-290">如果 "AutoGenerateEditButton"、"AutoGenerateDeleteButton" 或 "AutoGenerateSelectButton" 属性分别设置为 " **true**"，则 GridView 控件可以使用 "编辑"、"删除" 或 "选择" 按钮自动添加**CommandField**列字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-290">The GridView control can automatically add a **CommandField** column field with an Edit, Delete, or Select button if the AutoGenerateEditButton, AutoGenerateDeleteButton, or AutoGenerateSelectButton property is set to **true**, respectively.</span></span>

> [!NOTE]
> <span data-ttu-id="9fda8-291">GridView 控件不直接支持将记录插入到数据源中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-291">Inserting records into the data source is not directly supported by the GridView control.</span></span> <span data-ttu-id="9fda8-292">但是，也可以通过将 GridView 控件与 DetailsView 或 FormView 控件结合使用来插入记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-292">However, it is possible to insert records by using the GridView control in conjunction with the DetailsView or FormView control.</span></span>

<span data-ttu-id="9fda8-293">GridView 控件可以自动将记录拆分为多个页面，而不是同时在数据源中显示所有记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-293">Instead of displaying all the records in the data source at the same time, the GridView control can automatically break the records up into pages.</span></span> <span data-ttu-id="9fda8-294">若要启用分页，请将 AllowPaging 属性设置为**true**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-294">To enable paging, set the AllowPaging property to **true**.</span></span>

## <a name="customizing-the-user-interface"></a><span data-ttu-id="9fda8-295">自定义用户界面</span><span class="sxs-lookup"><span data-stu-id="9fda8-295">Customizing the User Interface</span></span>

<span data-ttu-id="9fda8-296">您可以通过设置控件的不同部分的样式属性来自定义 GridView 控件的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-296">You can customize the appearance of the GridView control by setting the style properties for the different parts of the control.</span></span> <span data-ttu-id="9fda8-297">下表列出了不同的样式属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-297">The following table lists the different style properties.</span></span>

| <span data-ttu-id="9fda8-298">**Style 属性**</span><span class="sxs-lookup"><span data-stu-id="9fda8-298">**Style property**</span></span> | <span data-ttu-id="9fda8-299">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-299">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-300">AlternatingRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-300">AlternatingRowStyle</span></span> | <span data-ttu-id="9fda8-301">GridView 控件中的交替数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-301">The style settings for the alternating data rows in the GridView control.</span></span> <span data-ttu-id="9fda8-302">设置此属性时，数据行将在 RowStyle 设置和**AlternatingRowStyle**设置之间交替显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-302">When this property is set, the data rows are displayed alternating between the RowStyle settings and the **AlternatingRowStyle** settings.</span></span> |
| <span data-ttu-id="9fda8-303">EditRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-303">EditRowStyle</span></span> | <span data-ttu-id="9fda8-304">GridView 控件中正在编辑的行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-304">The style settings for the row being edited in the GridView control.</span></span> |
| <span data-ttu-id="9fda8-305">EmptyDataRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-305">EmptyDataRowStyle</span></span> | <span data-ttu-id="9fda8-306">当数据源不包含任何记录时，在 GridView 控件中显示的空数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-306">The style settings for the empty data row displayed in the GridView control when the data source does not contain any records.</span></span> |
| <span data-ttu-id="9fda8-307">FooterStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-307">FooterStyle</span></span> | <span data-ttu-id="9fda8-308">GridView 控件的脚注行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-308">The style settings for the footer row of the GridView control.</span></span> |
| <span data-ttu-id="9fda8-309">HeaderStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-309">HeaderStyle</span></span> | <span data-ttu-id="9fda8-310">GridView 控件的标题行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-310">The style settings for the header row of the GridView control.</span></span> |
| <span data-ttu-id="9fda8-311">PagerStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-311">PagerStyle</span></span> | <span data-ttu-id="9fda8-312">GridView 控件的页导航行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-312">The style settings for the pager row of the GridView control.</span></span> |
| <span data-ttu-id="9fda8-313">RowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-313">RowStyle</span></span> | <span data-ttu-id="9fda8-314">GridView 控件中的数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-314">The style settings for the data rows in the GridView control.</span></span> <span data-ttu-id="9fda8-315">如果同时设置了**AlternatingRowStyle**属性，则会在 " **RowStyle** " 设置和 " **AlternatingRowStyle** " 设置之间交替显示数据行。</span><span class="sxs-lookup"><span data-stu-id="9fda8-315">When the **AlternatingRowStyle** property is also set, the data rows are displayed alternating between the **RowStyle** settings and the **AlternatingRowStyle** settings.</span></span> |
| <span data-ttu-id="9fda8-316">SelectedRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-316">SelectedRowStyle</span></span> | <span data-ttu-id="9fda8-317">GridView 控件中选定行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-317">The style settings for the selected row in the GridView control.</span></span> |

<span data-ttu-id="9fda8-318">还可以显示或隐藏控件的不同部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-318">You can also show or hide different parts of the control.</span></span> <span data-ttu-id="9fda8-319">下表列出了属性，这些属性控制要显示或隐藏的部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-319">The following table lists the properties that control which parts are shown or hidden.</span></span>

| <span data-ttu-id="9fda8-320">**Property**</span><span class="sxs-lookup"><span data-stu-id="9fda8-320">**Property**</span></span> | <span data-ttu-id="9fda8-321">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-321">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-322">ShowFooter</span><span class="sxs-lookup"><span data-stu-id="9fda8-322">ShowFooter</span></span> | <span data-ttu-id="9fda8-323">显示或隐藏 GridView 控件的页脚部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-323">Shows or hides the footer section of the GridView control.</span></span> |
| <span data-ttu-id="9fda8-324">ShowHeader</span><span class="sxs-lookup"><span data-stu-id="9fda8-324">ShowHeader</span></span> | <span data-ttu-id="9fda8-325">显示或隐藏 GridView 控件的标头部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-325">Shows or hides the header section of the GridView control.</span></span> |

### <a name="events"></a><span data-ttu-id="9fda8-326">事件</span><span class="sxs-lookup"><span data-stu-id="9fda8-326">Events</span></span>

<span data-ttu-id="9fda8-327">GridView 控件提供了几个可对其进行编程的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-327">The GridView control provides several events that you can program against.</span></span> <span data-ttu-id="9fda8-328">这使您可以在每次发生事件时运行自定义例程。</span><span class="sxs-lookup"><span data-stu-id="9fda8-328">This allows you to run a custom routine whenever an event occurs.</span></span> <span data-ttu-id="9fda8-329">下表列出了 GridView 控件支持的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-329">The following table lists the events supported by the GridView control.</span></span>

| <span data-ttu-id="9fda8-330">**Event**</span><span class="sxs-lookup"><span data-stu-id="9fda8-330">**Event**</span></span> | <span data-ttu-id="9fda8-331">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-331">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-332">PageIndexChanged</span><span class="sxs-lookup"><span data-stu-id="9fda8-332">PageIndexChanged</span></span> | <span data-ttu-id="9fda8-333">在单击某一页导航按钮时，但在 GridView 控件处理分页操作后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-333">Occurs when one of the pager buttons is clicked, but after the GridView control handles the paging operation.</span></span> <span data-ttu-id="9fda8-334">当用户导航到控件中的其他页面后，如果需要执行某个任务，通常会使用此事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-334">This event is commonly used when you need to perform a task after the user navigates to a different page in the control.</span></span> |
| <span data-ttu-id="9fda8-335">PageIndexChanging</span><span class="sxs-lookup"><span data-stu-id="9fda8-335">PageIndexChanging</span></span> | <span data-ttu-id="9fda8-336">在单击某一页导航按钮时，但在 GridView 控件处理分页操作之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-336">Occurs when one of the pager buttons is clicked, but before the GridView control handles the paging operation.</span></span> <span data-ttu-id="9fda8-337">此事件通常用于取消分页操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-337">This event is often used to cancel the paging operation.</span></span> |
| <span data-ttu-id="9fda8-338">RowCancelingEdit</span><span class="sxs-lookup"><span data-stu-id="9fda8-338">RowCancelingEdit</span></span> | <span data-ttu-id="9fda8-339">在单击某一行的 "取消" 按钮时，但在 GridView 控件退出编辑模式之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-339">Occurs when a row's Cancel button is clicked, but before the GridView control exits edit mode.</span></span> <span data-ttu-id="9fda8-340">此事件通常用于停止取消操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-340">This event is often used to stop the canceling operation.</span></span> |
| <span data-ttu-id="9fda8-341">RowCommand</span><span class="sxs-lookup"><span data-stu-id="9fda8-341">RowCommand</span></span> | <span data-ttu-id="9fda8-342">在 GridView 控件中单击按钮时发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-342">Occurs when a button is clicked in the GridView control.</span></span> <span data-ttu-id="9fda8-343">此事件通常用于在控件中单击按钮时执行任务。</span><span class="sxs-lookup"><span data-stu-id="9fda8-343">This event is often used to perform a task when a button is clicked in the control.</span></span> |
| <span data-ttu-id="9fda8-344">RowCreated</span><span class="sxs-lookup"><span data-stu-id="9fda8-344">RowCreated</span></span> | <span data-ttu-id="9fda8-345">在 GridView 控件中创建新行时发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-345">Occurs when a new row is created in the GridView control.</span></span> <span data-ttu-id="9fda8-346">此事件通常用于在创建行时修改行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-346">This event is often used to modify the contents of a row when the row is created.</span></span> |
| <span data-ttu-id="9fda8-347">RowDataBound</span><span class="sxs-lookup"><span data-stu-id="9fda8-347">RowDataBound</span></span> | <span data-ttu-id="9fda8-348">当数据行绑定到 GridView 控件中的数据时发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-348">Occurs when a data row is bound to data in the GridView control.</span></span> <span data-ttu-id="9fda8-349">当行绑定到数据时，此事件通常用于修改行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-349">This event is often used to modify the contents of a row when the row is bound to data.</span></span> |
| <span data-ttu-id="9fda8-350">RowDeleted</span><span class="sxs-lookup"><span data-stu-id="9fda8-350">RowDeleted</span></span> | <span data-ttu-id="9fda8-351">在单击某一行的 "删除" 按钮时，但在 GridView 控件从数据源中删除该记录之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-351">Occurs when a row's Delete button is clicked, but after the GridView control deletes the record from the data source.</span></span> <span data-ttu-id="9fda8-352">此事件通常用于检查删除操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-352">This event is often used to check the results of the delete operation.</span></span> |
| <span data-ttu-id="9fda8-353">RowDeleting</span><span class="sxs-lookup"><span data-stu-id="9fda8-353">RowDeleting</span></span> | <span data-ttu-id="9fda8-354">在单击某一行的 "删除" 按钮时，但在 GridView 控件从数据源中删除该记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-354">Occurs when a row's Delete button is clicked, but before the GridView control deletes the record from the data source.</span></span> <span data-ttu-id="9fda8-355">此事件通常用于取消删除操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-355">This event is often used to cancel the deleting operation.</span></span> |
| <span data-ttu-id="9fda8-356">RowEditing</span><span class="sxs-lookup"><span data-stu-id="9fda8-356">RowEditing</span></span> | <span data-ttu-id="9fda8-357">在单击某一行的 "编辑" 按钮时，但在 GridView 控件进入编辑模式之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-357">Occurs when a row's Edit button is clicked, but before the GridView control enters edit mode.</span></span> <span data-ttu-id="9fda8-358">此事件通常用于取消编辑操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-358">This event is often used to cancel the editing operation.</span></span> |
| <span data-ttu-id="9fda8-359">RowUpdated</span><span class="sxs-lookup"><span data-stu-id="9fda8-359">RowUpdated</span></span> | <span data-ttu-id="9fda8-360">在单击某一行的 "更新" 按钮时，但在 GridView 控件更新行后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-360">Occurs when a row's Update button is clicked, but after the GridView control updates the row.</span></span> <span data-ttu-id="9fda8-361">此事件通常用于检查更新操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-361">This event is often used to check the results of the update operation.</span></span> |
| <span data-ttu-id="9fda8-362">RowUpdating</span><span class="sxs-lookup"><span data-stu-id="9fda8-362">RowUpdating</span></span> | <span data-ttu-id="9fda8-363">在单击某一行的 "更新" 按钮时，但在 GridView 控件更新行之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-363">Occurs when a row's Update button is clicked, but before the GridView control updates the row.</span></span> <span data-ttu-id="9fda8-364">此事件通常用于取消更新操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-364">This event is often used to cancel the updating operation.</span></span> |
| <span data-ttu-id="9fda8-365">SelectedIndexChanged</span><span class="sxs-lookup"><span data-stu-id="9fda8-365">SelectedIndexChanged</span></span> | <span data-ttu-id="9fda8-366">在单击某一行的 "选择" 按钮时，但在 GridView 控件处理选择操作之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-366">Occurs when a row's Select button is clicked, but after the GridView control handles the select operation.</span></span> <span data-ttu-id="9fda8-367">此事件通常用于在控件中选择行后执行任务。</span><span class="sxs-lookup"><span data-stu-id="9fda8-367">This event is often used to perform a task after a row is selected in the control.</span></span> |
| <span data-ttu-id="9fda8-368">SelectedIndexChanging</span><span class="sxs-lookup"><span data-stu-id="9fda8-368">SelectedIndexChanging</span></span> | <span data-ttu-id="9fda8-369">在单击某一行的 "选择" 按钮时，但在 GridView 控件处理选择操作之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-369">Occurs when a row's Select button is clicked, but before the GridView control handles the select operation.</span></span> <span data-ttu-id="9fda8-370">此事件通常用于取消选择操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-370">This event is often used to cancel the selection operation.</span></span> |
| <span data-ttu-id="9fda8-371">排序</span><span class="sxs-lookup"><span data-stu-id="9fda8-371">Sorted</span></span> | <span data-ttu-id="9fda8-372">当单击用于列排序的超链接时，但在 GridView 控件处理排序操作后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-372">Occurs when the hyperlink to sort a column is clicked, but after the GridView control handles the sort operation.</span></span> <span data-ttu-id="9fda8-373">此事件通常用于在用户单击用于对列进行排序的超链接后执行任务。</span><span class="sxs-lookup"><span data-stu-id="9fda8-373">This event is commonly used to perform a task after the user clicks on a hyperlink to sort a column.</span></span> |
| <span data-ttu-id="9fda8-374">排序</span><span class="sxs-lookup"><span data-stu-id="9fda8-374">Sorting</span></span> | <span data-ttu-id="9fda8-375">当单击用于列排序的超链接时，但在 GridView 控件处理排序操作之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-375">Occurs when the hyperlink to sort a column is clicked, but before the GridView control handles the sort operation.</span></span> <span data-ttu-id="9fda8-376">此事件通常用于取消排序操作或执行自定义的排序例程。</span><span class="sxs-lookup"><span data-stu-id="9fda8-376">This event is often used to cancel the sorting operation or to perform a custom sorting routine.</span></span> |

## <a name="formview"></a><span data-ttu-id="9fda8-377">FormView</span><span class="sxs-lookup"><span data-stu-id="9fda8-377">FormView</span></span>

<span data-ttu-id="9fda8-378">FormView 控件用于显示数据源中的单个记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-378">The FormView control is used to display a single record from a data source.</span></span> <span data-ttu-id="9fda8-379">它类似于 DetailsView 控件，只不过它显示用户定义的模板而不是行字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-379">It is similar to the DetailsView control, except it displays user-defined templates instead of row fields.</span></span> <span data-ttu-id="9fda8-380">创建自己的模板使你可以更灵活地控制数据的显示方式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-380">Creating your own templates gives you greater flexibility in controlling how the data is displayed.</span></span> <span data-ttu-id="9fda8-381">FormView 控件支持以下功能：</span><span class="sxs-lookup"><span data-stu-id="9fda8-381">The FormView control supports the following features:</span></span>

- <span data-ttu-id="9fda8-382">绑定到数据源控件，如 SqlDataSource 和 ObjectDataSource。</span><span class="sxs-lookup"><span data-stu-id="9fda8-382">Binding to data source controls, such as SqlDataSource and ObjectDataSource.</span></span>
- <span data-ttu-id="9fda8-383">内置插入功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-383">Built-in inserting capabilities.</span></span>
- <span data-ttu-id="9fda8-384">内置的更新和删除功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-384">Built-in updating and deleting capabilities.</span></span>
- <span data-ttu-id="9fda8-385">内置的分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-385">Built-in paging capabilities.</span></span>
- <span data-ttu-id="9fda8-386">以编程方式访问 FormView 对象模型，以动态设置属性、处理事件等。</span><span class="sxs-lookup"><span data-stu-id="9fda8-386">Programmatic access to the FormView object model to dynamically set properties, handle events, and so on.</span></span>
- <span data-ttu-id="9fda8-387">通过用户定义的模板、主题和样式可自定义外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-387">Customizable appearance through user-defined templates, themes, and styles.</span></span>

## <a name="templates"></a><span data-ttu-id="9fda8-388">模板</span><span class="sxs-lookup"><span data-stu-id="9fda8-388">Templates</span></span>

<span data-ttu-id="9fda8-389">要使 FormView 控件显示内容，需要为控件的不同部分创建模板。</span><span class="sxs-lookup"><span data-stu-id="9fda8-389">For the FormView control to display content, you need to create templates for the different parts of the control.</span></span> <span data-ttu-id="9fda8-390">大多数模板是可选的;但是，您必须为在其中配置控件的模式创建模板。</span><span class="sxs-lookup"><span data-stu-id="9fda8-390">Most templates are optional; however, you must create a template for the mode in which the control is configured.</span></span> <span data-ttu-id="9fda8-391">例如，支持插入记录的 FormView 控件必须定义插入项模板。</span><span class="sxs-lookup"><span data-stu-id="9fda8-391">For example, a FormView control that supports inserting records must have an insert item template defined.</span></span> <span data-ttu-id="9fda8-392">下表列出了你可以创建的不同模板。</span><span class="sxs-lookup"><span data-stu-id="9fda8-392">The following table lists the different templates that you can create.</span></span>

| <span data-ttu-id="9fda8-393">**模板类型**</span><span class="sxs-lookup"><span data-stu-id="9fda8-393">**Template type**</span></span> | <span data-ttu-id="9fda8-394">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-394">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-395">EditItemTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-395">EditItemTemplate</span></span> | <span data-ttu-id="9fda8-396">定义在 FormView 控件处于编辑模式时数据行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-396">Defines the content for the data row when the FormView control is in edit mode.</span></span> <span data-ttu-id="9fda8-397">此模板通常包含输入控件和命令按钮，用户可以使用这些按钮编辑现有记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-397">This template usually contains input controls and command buttons with which the user can edit an existing record.</span></span> |
| <span data-ttu-id="9fda8-398">EmptyDataTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-398">EmptyDataTemplate</span></span> | <span data-ttu-id="9fda8-399">定义在将 FormView 控件绑定到不包含任何记录的数据源时所显示的空数据行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-399">Defines the content for the empty data row displayed when the FormView control is bound to a data source that does not contain any records.</span></span> <span data-ttu-id="9fda8-400">此模板通常包含用于向用户发出警报，指出数据源不包含任何记录的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-400">This template usually contains content to alert the user that the data source does not contain any records.</span></span> |
| <span data-ttu-id="9fda8-401">FooterTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-401">FooterTemplate</span></span> | <span data-ttu-id="9fda8-402">定义脚注行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-402">Defines the content for the footer row.</span></span> <span data-ttu-id="9fda8-403">此模板通常包含希望在页脚行中显示的任何其他内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-403">This template usually contains any additional content you would like to display in the footer row.</span></span> <span data-ttu-id="9fda8-404">作为替代方法，您可以通过设置 FooterText 属性来指定要在脚注行中显示的文本。</span><span class="sxs-lookup"><span data-stu-id="9fda8-404">As an alternative, you can simply specify text to display in the footer row by setting the FooterText property.</span></span> |
| <span data-ttu-id="9fda8-405">HeaderTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-405">HeaderTemplate</span></span> | <span data-ttu-id="9fda8-406">定义标题行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-406">Defines the content for the header row.</span></span> <span data-ttu-id="9fda8-407">此模板通常包含你希望在标题行中显示的任何其他内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-407">This template usually contains any additional content you would like to display in the header row.</span></span> <span data-ttu-id="9fda8-408">作为替代方法，您可以通过设置 HeaderText 属性来指定要在标题行中显示的文本。</span><span class="sxs-lookup"><span data-stu-id="9fda8-408">As an alternative, you can simply specify text to display in the header row by setting the HeaderText property.</span></span> |
| <span data-ttu-id="9fda8-409">ItemTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-409">ItemTemplate</span></span> | <span data-ttu-id="9fda8-410">定义在 FormView 控件处于只读模式时数据行的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-410">Defines the content for the data row when the FormView control is in read-only mode.</span></span> <span data-ttu-id="9fda8-411">此模板通常包含用于显示现有记录的值的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-411">This template usually contains content to display the values of an existing record.</span></span> |
| <span data-ttu-id="9fda8-412">InsertItemTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-412">InsertItemTemplate</span></span> | <span data-ttu-id="9fda8-413">定义数据行的内容（当 FormView 控件处于插入模式时）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-413">Defines the content for the data row when the FormView control is in insert mode.</span></span> <span data-ttu-id="9fda8-414">此模板通常包含用户可用于添加新记录的输入控件和命令按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-414">This template usually contains input controls and command buttons with which the user can add a new record.</span></span> |
| <span data-ttu-id="9fda8-415">PagerTemplate</span><span class="sxs-lookup"><span data-stu-id="9fda8-415">PagerTemplate</span></span> | <span data-ttu-id="9fda8-416">定义当分页功能处于启用状态时显示的页导航行的内容（当 AllowPaging 属性设置为**true**时）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-416">Defines the content for the pager row displayed when the paging feature is enabled (when the AllowPaging property is set to **true**).</span></span> <span data-ttu-id="9fda8-417">此模板通常包含用户可在其中导航到另一记录的控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-417">This template usually contains controls with which the user can navigate to another record.</span></span> |

<span data-ttu-id="9fda8-418">编辑项模板和插入项模板中的输入控件可以通过使用双向绑定表达式绑定到数据源的字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-418">Input controls in the edit item template and insert item template can be bound to the fields of a data source by using a two-way binding expression.</span></span> <span data-ttu-id="9fda8-419">这允许 FormView 控件自动提取输入控件的值以进行更新或插入操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-419">This allows the FormView control to automatically extract the values of the input control for an update or insert operation.</span></span> <span data-ttu-id="9fda8-420">双向绑定表达式还允许编辑项模板中的输入控件自动显示原始字段值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-420">Two-way binding expressions also allow input controls in an edit item template to automatically display the original field values.</span></span>

### <a name="binding-to-data"></a><span data-ttu-id="9fda8-421">绑定到数据</span><span class="sxs-lookup"><span data-stu-id="9fda8-421">Binding to Data</span></span>

<span data-ttu-id="9fda8-422">FormView 控件可以绑定到数据源控件（如**SqlDataSource**、AccessDataSource、 **ObjectDataSource**等），也可以绑定到任何实现了接口的数据源（例如，、和 system.object）的任何数据源中的数据源。</span><span class="sxs-lookup"><span data-stu-id="9fda8-422">The FormView control can be bound to a data source control (such as **SqlDataSource**, AccessDataSource, **ObjectDataSource** and so on), or to any data source that implements the System.Collections.IEnumerable interface (such as System.Data.DataView, System.Collections.ArrayList, and System.Collections.Hashtable).</span></span> <span data-ttu-id="9fda8-423">使用以下方法之一将 FormView 控件绑定到相应的数据源类型：</span><span class="sxs-lookup"><span data-stu-id="9fda8-423">Use one of the following methods to bind the FormView control to the appropriate data source type:</span></span>

- <span data-ttu-id="9fda8-424">若要绑定到数据源控件，请将 FormView 控件的 DataSourceID 属性设置为数据源控件的 ID 值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-424">To bind to a data source control, set the DataSourceID property of the FormView control to the ID value of the data source control.</span></span> <span data-ttu-id="9fda8-425">FormView 控件会自动绑定到指定的数据源控件，并可以利用数据源控件的功能执行插入、更新、删除和分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-425">The FormView control automatically binds to the specified data source control and can take advantage of the data source control's capabilities to perform inserting, updating, deleting, and paging functionality.</span></span> <span data-ttu-id="9fda8-426">这是绑定到数据的首选方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-426">This is the preferred method to bind to data.</span></span>
- <span data-ttu-id="9fda8-427">若要绑定到实现**system.web**接口的数据源，请以编程方式将 FormView 控件的 DataSource 属性设置为数据源，然后调用 DataBind 方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-427">To bind to a data source that implements the **System.Collections.IEnumerable** interface, programmatically set the DataSource property of the FormView control to the data source and then call the DataBind method.</span></span> <span data-ttu-id="9fda8-428">使用此方法时，FormView 控件不提供内置的插入、更新、删除和分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-428">When using this method, the FormView control does not provide built-in inserting, updating, deleting, and paging functionality.</span></span> <span data-ttu-id="9fda8-429">需要使用相应的事件来提供此功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-429">You need to provide this functionality by using the appropriate event.</span></span>

## <a name="data-operations"></a><span data-ttu-id="9fda8-430">数据操作</span><span class="sxs-lookup"><span data-stu-id="9fda8-430">Data Operations</span></span>

<span data-ttu-id="9fda8-431">FormView 控件提供了许多内置功能，使用户可以对控件中的项进行更新、删除、插入和分页。</span><span class="sxs-lookup"><span data-stu-id="9fda8-431">The FormView control provides many built-in capabilities that allow the user to update, delete, insert, and page through items in the control.</span></span> <span data-ttu-id="9fda8-432">当 FormView 控件绑定到数据源控件时，FormView 控件可以利用数据源控件的功能，并提供自动更新、删除、插入和分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-432">When the FormView control is bound to a data source control, the FormView control can take advantage of the data source control's capabilities and provide automatic updating, deleting, inserting, and paging functionality.</span></span> <span data-ttu-id="9fda8-433">FormView 控件可为与其他类型的数据源的更新、删除、插入和分页操作提供支持;但是，必须为这些操作的实现提供相应的事件处理程序。</span><span class="sxs-lookup"><span data-stu-id="9fda8-433">The FormView control can provide support for update, delete, insert, and paging operations with other types of data sources; however, you must provide an appropriate event handler with the implementation for these operations.</span></span>

<span data-ttu-id="9fda8-434">由于 FormView 控件使用模板，因此它不提供自动生成命令按钮以执行更新、删除或插入操作的方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-434">Because the FormView control uses templates, it does not provide a way to automatically generate command buttons to perform updating, deleting, or inserting operations.</span></span> <span data-ttu-id="9fda8-435">您必须在适当的模板中手动包含这些命令按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-435">You must manually include these command buttons in the appropriate template.</span></span> <span data-ttu-id="9fda8-436">FormView 控件识别某些按钮，这些按钮的**CommandName**属性设置为特定值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-436">The FormView control recognizes certain buttons that have their **CommandName** properties set to specific values.</span></span> <span data-ttu-id="9fda8-437">下表列出了 FormView 控件识别的命令按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-437">The following table lists the command buttons that the FormView control recognizes.</span></span>

| <span data-ttu-id="9fda8-438">**Button**</span><span class="sxs-lookup"><span data-stu-id="9fda8-438">**Button**</span></span> | <span data-ttu-id="9fda8-439">**Commandname 值**</span><span class="sxs-lookup"><span data-stu-id="9fda8-439">**Commandname value**</span></span> | <span data-ttu-id="9fda8-440">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-440">**Description**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9fda8-441">取消</span><span class="sxs-lookup"><span data-stu-id="9fda8-441">Cancel</span></span> | <span data-ttu-id="9fda8-442">退出</span><span class="sxs-lookup"><span data-stu-id="9fda8-442">"Cancel"</span></span> | <span data-ttu-id="9fda8-443">在更新或插入操作中用于取消操作并丢弃用户输入的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-443">Used in updating or inserting operations to cancel the operation and to discard the values entered by the user.</span></span> <span data-ttu-id="9fda8-444">然后，FormView 控件返回到 DefaultMode 属性指定的模式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-444">The FormView control then returns to the mode specified by the DefaultMode property.</span></span> |
| <span data-ttu-id="9fda8-445">删除</span><span class="sxs-lookup"><span data-stu-id="9fda8-445">Delete</span></span> | <span data-ttu-id="9fda8-446">“Delete”</span><span class="sxs-lookup"><span data-stu-id="9fda8-446">"Delete"</span></span> | <span data-ttu-id="9fda8-447">用于删除操作以从数据源中删除所显示的记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-447">Used in deleting operations to delete the displayed record from the data source.</span></span> <span data-ttu-id="9fda8-448">引发 ItemDeleting 和 ItemDeleted 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-448">Raises the ItemDeleting and ItemDeleted events.</span></span> |
| <span data-ttu-id="9fda8-449">编辑</span><span class="sxs-lookup"><span data-stu-id="9fda8-449">Edit</span></span> | <span data-ttu-id="9fda8-450">编辑</span><span class="sxs-lookup"><span data-stu-id="9fda8-450">"Edit"</span></span> | <span data-ttu-id="9fda8-451">用于更新操作以将 FormView 控件置于编辑模式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-451">Used in updating operations to put the FormView control in edit mode.</span></span> <span data-ttu-id="9fda8-452">为数据行显示在**EditItemTemplate**属性中指定的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-452">The content specified in the **EditItemTemplate** property is displayed for the data row.</span></span> |
| <span data-ttu-id="9fda8-453">Insert</span><span class="sxs-lookup"><span data-stu-id="9fda8-453">Insert</span></span> | <span data-ttu-id="9fda8-454">&</span><span class="sxs-lookup"><span data-stu-id="9fda8-454">"Insert"</span></span> | <span data-ttu-id="9fda8-455">在插入操作中用于尝试使用用户提供的值在数据源中插入新记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-455">Used in inserting operations to attempt to insert a new record in the data source using the values provided by the user.</span></span> <span data-ttu-id="9fda8-456">引发 ItemInserting 和 ItemInserted 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-456">Raises the ItemInserting and ItemInserted events.</span></span> |
| <span data-ttu-id="9fda8-457">新的</span><span class="sxs-lookup"><span data-stu-id="9fda8-457">New</span></span> | <span data-ttu-id="9fda8-458">新西兰</span><span class="sxs-lookup"><span data-stu-id="9fda8-458">"New"</span></span> | <span data-ttu-id="9fda8-459">在插入操作中用于将 FormView 控件置于插入模式中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-459">Used in inserting operations to put the FormView control in insert mode.</span></span> <span data-ttu-id="9fda8-460">为数据行显示在**则**属性中指定的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-460">The content specified in the **InsertItemTemplate** property is displayed for the data row.</span></span> |
| <span data-ttu-id="9fda8-461">页面</span><span class="sxs-lookup"><span data-stu-id="9fda8-461">Page</span></span> | <span data-ttu-id="9fda8-462">分页</span><span class="sxs-lookup"><span data-stu-id="9fda8-462">"Page"</span></span> | <span data-ttu-id="9fda8-463">用于在分页操作中表示执行分页的页导航行中的按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-463">Used in paging operations to represent a button in the pager row that performs paging.</span></span> <span data-ttu-id="9fda8-464">若要指定分页操作，请将该按钮的**CommandArgument**属性设置为 "下一步"、"上一步"、"First"、"Last" 或要导航到的页面的索引。</span><span class="sxs-lookup"><span data-stu-id="9fda8-464">To specify the paging operation, set the **CommandArgument** property of the button to "Next", "Prev", "First", "Last", or the index of the page to which to navigate.</span></span> <span data-ttu-id="9fda8-465">引发 PageIndexChanging 和 PageIndexChanged 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-465">Raises the PageIndexChanging and PageIndexChanged events.</span></span> |
| <span data-ttu-id="9fda8-466">更新</span><span class="sxs-lookup"><span data-stu-id="9fda8-466">Update</span></span> | <span data-ttu-id="9fda8-467">时更新</span><span class="sxs-lookup"><span data-stu-id="9fda8-467">"Update"</span></span> | <span data-ttu-id="9fda8-468">用于更新操作，尝试使用用户提供的值更新数据源中显示的记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-468">Used in updating operations to attempt to update the displayed record in the data source with the values provided by the user.</span></span> <span data-ttu-id="9fda8-469">引发 ItemUpdating 和 ItemUpdated 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-469">Raises the ItemUpdating and ItemUpdated events.</span></span> |

<span data-ttu-id="9fda8-470">与 "删除" 按钮（它会立即删除显示的记录）不同，单击 "编辑" 或 "新建" 按钮时，FormView 控件会分别进入 "编辑" 或 "插入" 模式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-470">Unlike the Delete button (which deletes the displayed record immediately), when the Edit or New button is clicked, the FormView control goes into edit or insert mode respectively.</span></span> <span data-ttu-id="9fda8-471">在编辑模式下，为当前数据项显示了**EditItemTemplate**属性中包含的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-471">In edit mode, the content contained in the **EditItemTemplate** property is displayed for the current data item.</span></span> <span data-ttu-id="9fda8-472">通常，编辑项模板的定义使 "编辑" 按钮替换为更新和 "取消" 按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-472">Typically, the edit item template is defined such that the Edit button is replaced with an Update and a Cancel button.</span></span> <span data-ttu-id="9fda8-473">适用于字段的数据类型（例如 TextBox 或 CheckBox 控件）的输入控件通常还显示有字段值，供用户修改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-473">Input controls that are appropriate for the field's data type (such as a TextBox or a CheckBox control) are also usually displayed with a field's value for the user to modify.</span></span> <span data-ttu-id="9fda8-474">单击 "更新" 按钮将更新数据源中的记录，而单击 "取消" 按钮将放弃所有更改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-474">Clicking the Update button updates the record in the data source, while clicking the Cancel button abandons any changes.</span></span>

<span data-ttu-id="9fda8-475">同样，当控件处于插入模式时，将为数据项显示**则**属性中包含的内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-475">Likewise, the content contained in the **InsertItemTemplate** property is displayed for the data item when the control is in insert mode.</span></span> <span data-ttu-id="9fda8-476">插入项模板通常定义为：将 "新建" 按钮替换为 "插入" 和 "取消" 按钮，并为用户显示空输入控件以输入新记录的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-476">The insert item template is typically defined such that the New button is replaced with an Insert and a Cancel button, and empty input controls are displayed for the user to enter the values for the new record.</span></span> <span data-ttu-id="9fda8-477">单击 "插入" 按钮将插入数据源中的记录，而单击 "取消" 按钮将放弃所有更改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-477">Clicking the Insert button inserts the record in the data source, while clicking the Cancel button abandons any changes.</span></span>

<span data-ttu-id="9fda8-478">FormView 控件提供分页功能，该功能允许用户导航到数据源中的其他记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-478">The FormView control provides a paging feature, which allows the user to navigate to other records in the data source.</span></span> <span data-ttu-id="9fda8-479">启用后，页导航行显示在包含页面导航控件的 FormView 控件中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-479">When enabled, a pager row is displayed in the FormView control that contains the page navigation controls.</span></span> <span data-ttu-id="9fda8-480">若要启用分页，请将**AllowPaging**属性设置为**true**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-480">To enable paging, set the **AllowPaging** property to **true**.</span></span> <span data-ttu-id="9fda8-481">通过设置 PagerStyle 和 PagerSettings 属性中包含的对象的属性，可以自定义页导航行。</span><span class="sxs-lookup"><span data-stu-id="9fda8-481">You can customize the pager row by setting the properties of objects contained in the PagerStyle and the PagerSettings property.</span></span> <span data-ttu-id="9fda8-482">您可以使用**PagerTemplate**属性来创建自己的 UI，而不是使用内置的页导航行 ui。</span><span class="sxs-lookup"><span data-stu-id="9fda8-482">Instead of using the built-in pager row UI, you can create your own UI by using the **PagerTemplate** property.</span></span>

## <a name="customizing-the-user-interface"></a><span data-ttu-id="9fda8-483">自定义用户界面</span><span class="sxs-lookup"><span data-stu-id="9fda8-483">Customizing the User Interface</span></span>

<span data-ttu-id="9fda8-484">您可以通过设置控件的不同部分的样式属性来自定义 FormView 控件的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-484">You can customize the appearance of the FormView control by setting the style properties for the different parts of the control.</span></span> <span data-ttu-id="9fda8-485">下表列出了不同的样式属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-485">The following table lists the different style properties.</span></span>

| <span data-ttu-id="9fda8-486">**Style 属性**</span><span class="sxs-lookup"><span data-stu-id="9fda8-486">**Style property**</span></span> | <span data-ttu-id="9fda8-487">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-487">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-488">EditRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-488">EditRowStyle</span></span> | <span data-ttu-id="9fda8-489">当 FormView 控件处于编辑模式时数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-489">The style settings for the data row when the FormView control is in edit mode.</span></span> |
| <span data-ttu-id="9fda8-490">EmptyDataRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-490">EmptyDataRowStyle</span></span> | <span data-ttu-id="9fda8-491">当数据源不包含任何记录时，FormView 控件中显示的空数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-491">The style settings for the empty data row displayed in the FormView control when the data source does not contain any records.</span></span> |
| <span data-ttu-id="9fda8-492">FooterStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-492">FooterStyle</span></span> | <span data-ttu-id="9fda8-493">FormView 控件的脚注行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-493">The style settings for the footer row of the FormView control.</span></span> |
| <span data-ttu-id="9fda8-494">HeaderStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-494">HeaderStyle</span></span> | <span data-ttu-id="9fda8-495">FormView 控件的标题行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-495">The style settings for the header row of the FormView control.</span></span> |
| <span data-ttu-id="9fda8-496">InsertRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-496">InsertRowStyle</span></span> | <span data-ttu-id="9fda8-497">当 FormView 控件处于插入模式时数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-497">The style settings for the data row when the FormView control is in insert mode.</span></span> |
| <span data-ttu-id="9fda8-498">PagerStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-498">PagerStyle</span></span> | <span data-ttu-id="9fda8-499">启用分页功能时，在 FormView 控件中显示的页导航行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-499">The style settings for the pager row displayed in the FormView control when the paging feature is enabled.</span></span> |
| <span data-ttu-id="9fda8-500">RowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-500">RowStyle</span></span> | <span data-ttu-id="9fda8-501">当 FormView 控件处于只读模式时，数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-501">The style settings for the data row when the FormView control is in read-only mode.</span></span> |

## <a name="events"></a><span data-ttu-id="9fda8-502">事件</span><span class="sxs-lookup"><span data-stu-id="9fda8-502">Events</span></span>

<span data-ttu-id="9fda8-503">FormView 控件提供了几个可对其进行编程的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-503">The FormView control provides several events that you can program against.</span></span> <span data-ttu-id="9fda8-504">这使您可以在每次发生事件时运行自定义例程。</span><span class="sxs-lookup"><span data-stu-id="9fda8-504">This allows you to run a custom routine whenever an event occurs.</span></span> <span data-ttu-id="9fda8-505">下表列出了 FormView 控件支持的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-505">The following table lists the events supported by the FormView control.</span></span>

| <span data-ttu-id="9fda8-506">**Event**</span><span class="sxs-lookup"><span data-stu-id="9fda8-506">**Event**</span></span> | <span data-ttu-id="9fda8-507">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-507">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-508">ItemCommand</span><span class="sxs-lookup"><span data-stu-id="9fda8-508">ItemCommand</span></span> | <span data-ttu-id="9fda8-509">在单击 FormView 控件中的按钮时发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-509">Occurs when a button within a FormView control is clicked.</span></span> <span data-ttu-id="9fda8-510">此事件通常用于在控件中单击按钮时执行任务。</span><span class="sxs-lookup"><span data-stu-id="9fda8-510">This event is often used to perform a task when a button is clicked in the control.</span></span> |
| <span data-ttu-id="9fda8-511">ItemCreated</span><span class="sxs-lookup"><span data-stu-id="9fda8-511">ItemCreated</span></span> | <span data-ttu-id="9fda8-512">在 FormView 控件中创建所有 FormViewRow 对象之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-512">Occurs after all FormViewRow objects are created in the FormView control.</span></span> <span data-ttu-id="9fda8-513">此事件通常用于在记录显示之前修改记录的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-513">This event is often used to modify the values of a record before it is displayed.</span></span> |
| <span data-ttu-id="9fda8-514">ItemDeleted</span><span class="sxs-lookup"><span data-stu-id="9fda8-514">ItemDeleted</span></span> | <span data-ttu-id="9fda8-515">在单击 "删除" 按钮（其**CommandName**属性设置为 "Delete" 的按钮）时，但在 FormView 控件从数据源中删除记录之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-515">Occurs when a Delete button (a button with its **CommandName** property set to "Delete") is clicked, but after the FormView control deletes the record from the data source.</span></span> <span data-ttu-id="9fda8-516">此事件通常用于检查删除操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-516">This event is often used to check the results of the delete operation.</span></span> |
| <span data-ttu-id="9fda8-517">ItemDeleting</span><span class="sxs-lookup"><span data-stu-id="9fda8-517">ItemDeleting</span></span> | <span data-ttu-id="9fda8-518">在单击 "删除" 按钮时，但在 FormView 控件从数据源中删除记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-518">Occurs when a Delete button is clicked, but before the FormView control deletes the record from the data source.</span></span> <span data-ttu-id="9fda8-519">此事件通常用于取消删除操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-519">This event is often used to cancel the delete operation.</span></span> |
| <span data-ttu-id="9fda8-520">ItemInserted</span><span class="sxs-lookup"><span data-stu-id="9fda8-520">ItemInserted</span></span> | <span data-ttu-id="9fda8-521">单击 "插入" 按钮（其**CommandName**属性设置为 "插入" 的按钮）时，但在 FormView 控件插入记录后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-521">Occurs when an Insert button (a button with its **CommandName** property set to "Insert") is clicked, but after the FormView control inserts the record.</span></span> <span data-ttu-id="9fda8-522">此事件通常用于检查插入操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-522">This event is often used to check the results of the insert operation.</span></span> |
| <span data-ttu-id="9fda8-523">ItemInserting</span><span class="sxs-lookup"><span data-stu-id="9fda8-523">ItemInserting</span></span> | <span data-ttu-id="9fda8-524">当单击 "插入" 按钮时，但在 FormView 控件插入记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-524">Occurs when an Insert button is clicked, but before the FormView control inserts the record.</span></span> <span data-ttu-id="9fda8-525">此事件通常用于取消插入操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-525">This event is often used to cancel the insert operation.</span></span> |
| <span data-ttu-id="9fda8-526">ItemUpdated</span><span class="sxs-lookup"><span data-stu-id="9fda8-526">ItemUpdated</span></span> | <span data-ttu-id="9fda8-527">在单击 "更新" 按钮（其**CommandName**属性设置为 "Update" 的按钮）时，但在 FormView 控件更新行后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-527">Occurs when an Update button (a button with its **CommandName** property set to "Update") is clicked, but after the FormView control updates the row.</span></span> <span data-ttu-id="9fda8-528">此事件通常用于检查更新操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-528">This event is often used to check the results of the update operation.</span></span> |
| <span data-ttu-id="9fda8-529">ItemUpdating</span><span class="sxs-lookup"><span data-stu-id="9fda8-529">ItemUpdating</span></span> | <span data-ttu-id="9fda8-530">当单击 "更新" 按钮时，但在 FormView 控件更新记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-530">Occurs when an Update button is clicked, but before the FormView control updates the record.</span></span> <span data-ttu-id="9fda8-531">此事件通常用于取消更新操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-531">This event is often used to cancel the update operation.</span></span> |
| <span data-ttu-id="9fda8-532">ModeChanged</span><span class="sxs-lookup"><span data-stu-id="9fda8-532">ModeChanged</span></span> | <span data-ttu-id="9fda8-533">在 FormView 控件更改模式（用于编辑、插入或只读模式）后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-533">Occurs after the FormView control changes modes (to edit, insert, or read-only mode).</span></span> <span data-ttu-id="9fda8-534">此事件通常用于在 FormView 控件更改模式时执行任务。</span><span class="sxs-lookup"><span data-stu-id="9fda8-534">This event is often used to perform a task when the FormView control changes modes.</span></span> |
| <span data-ttu-id="9fda8-535">ModeChanging</span><span class="sxs-lookup"><span data-stu-id="9fda8-535">ModeChanging</span></span> | <span data-ttu-id="9fda8-536">在 FormView 控件更改模式（用于编辑、插入或只读模式）之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-536">Occurs before the FormView control changes modes (to edit, insert, or read-only mode).</span></span> <span data-ttu-id="9fda8-537">此事件通常用于取消模式更改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-537">This event is often used to cancel a mode change.</span></span> |
| <span data-ttu-id="9fda8-538">PageIndexChanged</span><span class="sxs-lookup"><span data-stu-id="9fda8-538">PageIndexChanged</span></span> | <span data-ttu-id="9fda8-539">在单击某一页导航按钮时，但在 FormView 控件处理分页操作之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-539">Occurs when one of the pager buttons is clicked, but after the FormView control handles the paging operation.</span></span> <span data-ttu-id="9fda8-540">此事件通常在用户导航至控件中的其他记录后需要执行任务时使用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-540">This event is commonly used when you need to perform a task after the user navigates to a different record in the control.</span></span> |
| <span data-ttu-id="9fda8-541">PageIndexChanging</span><span class="sxs-lookup"><span data-stu-id="9fda8-541">PageIndexChanging</span></span> | <span data-ttu-id="9fda8-542">在单击某一页导航按钮时，但在 FormView 控件处理分页操作之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-542">Occurs when one of the pager buttons is clicked, but before the FormView control handles the paging operation.</span></span> <span data-ttu-id="9fda8-543">此事件通常用于取消分页操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-543">This event is often used to cancel the paging operation.</span></span> |

## <a name="detailsview"></a><span data-ttu-id="9fda8-544">DetailsView</span><span class="sxs-lookup"><span data-stu-id="9fda8-544">DetailsView</span></span>

<span data-ttu-id="9fda8-545">"DetailsView" 控件用于在表中显示数据源中的单个记录，其中，记录的每个字段都显示在表的一行中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-545">The DetailsView control is used to display a single record from a data source in a table, where each field of the record is displayed in a row of the table.</span></span> <span data-ttu-id="9fda8-546">它可以与主/从方案的 GridView 控件结合使用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-546">It can be used in combination with a GridView control for master-detail scenarios.</span></span> <span data-ttu-id="9fda8-547">DetailsView 控件支持以下功能：</span><span class="sxs-lookup"><span data-stu-id="9fda8-547">The DetailsView control supports the following features:</span></span>

- <span data-ttu-id="9fda8-548">绑定到数据源控件，如 SqlDataSource。</span><span class="sxs-lookup"><span data-stu-id="9fda8-548">Binding to data source controls, such as SqlDataSource.</span></span>
- <span data-ttu-id="9fda8-549">内置插入功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-549">Built-in inserting capabilities.</span></span>
- <span data-ttu-id="9fda8-550">内置的更新和删除功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-550">Built-in updating and deleting capabilities.</span></span>
- <span data-ttu-id="9fda8-551">内置的分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-551">Built-in paging capabilities.</span></span>
- <span data-ttu-id="9fda8-552">以编程方式访问 DetailsView 对象模型，以动态设置属性、处理事件等。</span><span class="sxs-lookup"><span data-stu-id="9fda8-552">Programmatic access to the DetailsView object model to dynamically set properties, handle events, and so on.</span></span>
- <span data-ttu-id="9fda8-553">通过主题和样式自定义外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-553">Customizable appearance through themes and styles.</span></span>

## <a name="row-fields"></a><span data-ttu-id="9fda8-554">行字段</span><span class="sxs-lookup"><span data-stu-id="9fda8-554">Row Fields</span></span>

<span data-ttu-id="9fda8-555">DetailsView 控件中的每个数据行都是通过声明字段控件创建的。</span><span class="sxs-lookup"><span data-stu-id="9fda8-555">Each data row in the DetailsView control is created by declaring a field control.</span></span> <span data-ttu-id="9fda8-556">不同的行字段类型确定控件中行的行为。</span><span class="sxs-lookup"><span data-stu-id="9fda8-556">Different row field types determine the behavior of the rows in the control.</span></span> <span data-ttu-id="9fda8-557">字段控件派生自 DataControlField。</span><span class="sxs-lookup"><span data-stu-id="9fda8-557">Field controls derive from DataControlField.</span></span> <span data-ttu-id="9fda8-558">下表列出了可以使用的不同行字段类型。</span><span class="sxs-lookup"><span data-stu-id="9fda8-558">The following table lists the different row field types that can be used.</span></span>

| <span data-ttu-id="9fda8-559">**列字段类型**</span><span class="sxs-lookup"><span data-stu-id="9fda8-559">**Column field type**</span></span> | <span data-ttu-id="9fda8-560">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-560">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-561">BoundField</span><span class="sxs-lookup"><span data-stu-id="9fda8-561">BoundField</span></span> | <span data-ttu-id="9fda8-562">以文本形式显示数据源中字段的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-562">Displays the value of a field in a data source as text.</span></span> |
| <span data-ttu-id="9fda8-563">ButtonField</span><span class="sxs-lookup"><span data-stu-id="9fda8-563">ButtonField</span></span> | <span data-ttu-id="9fda8-564">在 DetailsView 控件中显示命令按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-564">Displays a command button in the DetailsView control.</span></span> <span data-ttu-id="9fda8-565">这允许您显示具有自定义按钮控件的行，如 "添加" 或 "移除" 按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-565">This allows you to display a row with a custom button control, such as an Add or a Remove button.</span></span> |
| <span data-ttu-id="9fda8-566">CheckBoxField</span><span class="sxs-lookup"><span data-stu-id="9fda8-566">CheckBoxField</span></span> | <span data-ttu-id="9fda8-567">在 DetailsView 控件中显示复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-567">Displays a check box in the DetailsView control.</span></span> <span data-ttu-id="9fda8-568">此行字段类型通常用于显示具有布尔值的字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-568">This row field type is commonly used to display fields with a Boolean value.</span></span> |
| <span data-ttu-id="9fda8-569">CommandField</span><span class="sxs-lookup"><span data-stu-id="9fda8-569">CommandField</span></span> | <span data-ttu-id="9fda8-570">显示内置命令按钮，用于在 DetailsView 控件中执行编辑、插入或删除操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-570">Displays built-in command buttons to perform edit, insert, or delete operations in the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-571">HyperLinkField</span><span class="sxs-lookup"><span data-stu-id="9fda8-571">HyperLinkField</span></span> | <span data-ttu-id="9fda8-572">将数据源中的字段值显示为超链接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-572">Displays the value of a field in a data source as a hyperlink.</span></span> <span data-ttu-id="9fda8-573">此行字段类型允许您将第二个字段绑定到超链接的 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-573">This row field type allows you to bind a second field to the hyperlink's URL.</span></span> |
| <span data-ttu-id="9fda8-574">ImageField</span><span class="sxs-lookup"><span data-stu-id="9fda8-574">ImageField</span></span> | <span data-ttu-id="9fda8-575">在 DetailsView 控件中显示图像。</span><span class="sxs-lookup"><span data-stu-id="9fda8-575">Displays an image in the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-576">TemplateField</span><span class="sxs-lookup"><span data-stu-id="9fda8-576">TemplateField</span></span> | <span data-ttu-id="9fda8-577">根据指定的模板在 DetailsView 控件中显示行的用户定义内容。</span><span class="sxs-lookup"><span data-stu-id="9fda8-577">Displays user-defined content for a row in the DetailsView control according to a specified template.</span></span> <span data-ttu-id="9fda8-578">此行字段类型允许您创建自定义行字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-578">This row field type allows you to create a custom row field.</span></span> |

<span data-ttu-id="9fda8-579">默认情况下，AutoGenerateRows 属性设置为**true**，这将为数据源中的可绑定类型的每个字段自动生成绑定行字段对象。</span><span class="sxs-lookup"><span data-stu-id="9fda8-579">By default, the AutoGenerateRows property is set to **true**, which automatically generates a bound row field object for each field of a bindable type in the data source.</span></span> <span data-ttu-id="9fda8-580">有效的可绑定类型包括 String、DateTime、Decimal、Guid 和基元类型集。</span><span class="sxs-lookup"><span data-stu-id="9fda8-580">Valid bindable types are String, DateTime, Decimal, Guid, and the set of primitive types.</span></span> <span data-ttu-id="9fda8-581">然后，每个字段在行中显示为文本，并按照每个字段在数据源中的显示顺序显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-581">Each field is then displayed in a row as text, in the order in which each field appears in the data source.</span></span>

<span data-ttu-id="9fda8-582">自动生成行可提供一种快速简单的方法来显示记录中的每个字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-582">Automatically generating the rows provides a quick and easy way to display every field in the record.</span></span> <span data-ttu-id="9fda8-583">但是，若要使用 DetailsView 控件的高级功能，必须显式声明要包含在 DetailsView 控件中的行字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-583">However, to make use of the DetailsView control's advanced capabilities you must explicitly declare the row fields to include in the DetailsView control.</span></span> <span data-ttu-id="9fda8-584">若要声明行字段，请首先将**AutoGenerateRows**属性设置为**false**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-584">To declare the row fields, first set the **AutoGenerateRows** property to **false**.</span></span> <span data-ttu-id="9fda8-585">接下来，在 DetailsView 控件的开始标记和结束标记之间添加开始和结束 **&lt;字段&gt;** 标记。</span><span class="sxs-lookup"><span data-stu-id="9fda8-585">Next, add opening and closing **&lt;Fields&gt;** tags between the opening and closing tags of the DetailsView control.</span></span> <span data-ttu-id="9fda8-586">最后，在 "开始" 和 "结束" **&lt;字段&gt;** 标记之间列出要包括的行字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-586">Finally, list the row fields that you want to include between the opening and closing **&lt;Fields&gt;** tags.</span></span> <span data-ttu-id="9fda8-587">指定的行字段将按所列顺序添加到字段集合中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-587">The row fields specified are added to the Fields collection in the order listed.</span></span> <span data-ttu-id="9fda8-588">**字段**集合允许您以编程方式管理 DetailsView 控件中的行字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-588">The **Fields** collection allows you to programmatically manage the row fields in the DetailsView control.</span></span>

> [!NOTE]
> <span data-ttu-id="9fda8-589">自动生成的行字段不会添加到 "字段" 集合中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-589">Automatically generated row fields are not added to the Fields collection.</span></span>

## <a name="binding-to-data"></a><span data-ttu-id="9fda8-590">绑定到数据</span><span class="sxs-lookup"><span data-stu-id="9fda8-590">Binding to Data</span></span>

<span data-ttu-id="9fda8-591">DetailsView 控件可以绑定到数据源控件（如**SqlDataSource**或 AccessDataSource），也可以绑定到实现接口的任何数据源（例如，），并将其绑定到任何实现。</span><span class="sxs-lookup"><span data-stu-id="9fda8-591">The DetailsView control can be bound to a data source control, such as **SqlDataSource** or AccessDataSource, or to any data source that implements the System.Collections.IEnumerable interface, such as System.Data.DataView, System.Collections.ArrayList and System.Collections.Hashtable.</span></span>

<span data-ttu-id="9fda8-592">使用以下方法之一将 DetailsView 控件绑定到相应的数据源类型：</span><span class="sxs-lookup"><span data-stu-id="9fda8-592">Use one of the following methods to bind the DetailsView control to the appropriate data source type:</span></span>

- <span data-ttu-id="9fda8-593">若要绑定到数据源控件，请将 DetailsView 控件的 DataSourceID 属性设置为数据源控件的 ID 值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-593">To bind to a data source control, set the DataSourceID property of the DetailsView control to the ID value of the data source control.</span></span> <span data-ttu-id="9fda8-594">DetailsView 控件将自动绑定到指定的数据源控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-594">The DetailsView control automatically binds to the specified data source control.</span></span> <span data-ttu-id="9fda8-595">这是绑定到数据的首选方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-595">This is the preferred method to bind to data.</span></span>
- <span data-ttu-id="9fda8-596">若要绑定到实现**system.web**接口的数据源，请以编程方式将 DetailsView 控件的 DataSource 属性设置为数据源，然后调用 DataBind 方法。</span><span class="sxs-lookup"><span data-stu-id="9fda8-596">To bind to a data source that implements the **System.Collections.IEnumerable** interface, programmatically set the DataSource property of the DetailsView control to the data source and then call the DataBind method.</span></span>

## <a name="security"></a><span data-ttu-id="9fda8-597">安全</span><span class="sxs-lookup"><span data-stu-id="9fda8-597">Security</span></span>

<span data-ttu-id="9fda8-598">此控件可用于显示用户输入，其中可能包括恶意客户端脚本。</span><span class="sxs-lookup"><span data-stu-id="9fda8-598">This control can be used to display user input, which might include malicious client script.</span></span> <span data-ttu-id="9fda8-599">在应用程序中显示可执行脚本、SQL 语句或其他代码之前，请检查从该客户端发送的任何信息。</span><span class="sxs-lookup"><span data-stu-id="9fda8-599">Check any information that is sent from a client for executable script, SQL statements, or other code before displaying it in your application.</span></span> <span data-ttu-id="9fda8-600">ASP.NET 提供输入请求验证功能来阻止用户输入中的脚本和 HTML。</span><span class="sxs-lookup"><span data-stu-id="9fda8-600">ASP.NET provides an input request validation feature to block script and HTML in user input.</span></span>

## <a name="data-operations"></a><span data-ttu-id="9fda8-601">数据操作</span><span class="sxs-lookup"><span data-stu-id="9fda8-601">Data Operations</span></span>

<span data-ttu-id="9fda8-602">"DetailsView" 控件提供内置功能，使用户能够对控件中的项进行更新、删除、插入和分页。</span><span class="sxs-lookup"><span data-stu-id="9fda8-602">The DetailsView control provides built-in capabilities that allow the user to update, delete, insert, and page through items in the control.</span></span> <span data-ttu-id="9fda8-603">当 DetailsView 控件绑定到数据源控件时，DetailsView 控件可以利用数据源控件的功能，并提供自动更新、删除、插入和分页功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-603">When the DetailsView control is bound to a data source control, the DetailsView control can take advantage of the data source control's capabilities and provide automatic updating, deleting, inserting, and paging functionality.</span></span>

<span data-ttu-id="9fda8-604">DetailsView 控件可为与其他类型的数据源的更新、删除、插入和分页操作提供支持;但是，必须在相应的事件处理程序中提供这些操作的实现。</span><span class="sxs-lookup"><span data-stu-id="9fda8-604">The DetailsView control can provide support for update, delete, insert, and paging operations with other types of data sources; however, you must provide the implementation for these operations in an appropriate event handler.</span></span>

<span data-ttu-id="9fda8-605">使用 "编辑"、"删除" 或 "新建" 按钮，DetailsView 控件可以分别将 AutoGenerateEditButton、AutoGenerateDeleteButton 或 AutoGenerateInsertButton 属性设置为 " **true**"，从而自动添加**CommandField**行字段。</span><span class="sxs-lookup"><span data-stu-id="9fda8-605">The DetailsView control can automatically add a **CommandField** row field with an Edit, Delete, or New button by setting the AutoGenerateEditButton, AutoGenerateDeleteButton, or AutoGenerateInsertButton properties to **true**, respectively.</span></span> <span data-ttu-id="9fda8-606">与 "删除" 按钮（它会立即删除选定的记录）不同，单击 "编辑" 或 "新建" 按钮时，DetailsView 控件将分别进入编辑或插入模式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-606">Unlike the Delete button (which deletes the selected record immediately), when the Edit or New button is clicked, the DetailsView control goes into edit or insert mode, respectively.</span></span> <span data-ttu-id="9fda8-607">在编辑模式下，"编辑" 按钮将替换为更新和 "取消" 按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-607">In edit mode, the Edit button is replaced with an Update and a Cancel button.</span></span> <span data-ttu-id="9fda8-608">与字段的数据类型（例如 TextBox 或 CheckBox 控件）对应的输入控件将显示，其中包含字段值供用户修改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-608">Input controls that are appropriate for the field's data type (such as a TextBox or a CheckBox control) are displayed with a field's value for the user to modify.</span></span> <span data-ttu-id="9fda8-609">单击 "更新" 按钮将更新数据源中的记录，而单击 "取消" 按钮将放弃所有更改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-609">Clicking the Update button updates the record in the data source, while clicking the Cancel button abandons any changes.</span></span> <span data-ttu-id="9fda8-610">同样，在插入模式下，"新建" 按钮将被替换为 "插入" 和 "取消" 按钮，并为用户显示空输入控件以输入新记录的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-610">Likewise, in insert mode, the New button is replaced with an Insert and a Cancel button, and empty input controls are displayed for the user to enter the values for the new record.</span></span>

<span data-ttu-id="9fda8-611">DetailsView 控件提供分页功能，该功能允许用户导航到数据源中的其他记录。</span><span class="sxs-lookup"><span data-stu-id="9fda8-611">The DetailsView control provides a paging feature, which allows the user to navigate to other records in the data source.</span></span> <span data-ttu-id="9fda8-612">启用后，页面导航控件将显示在页导航行中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-612">When enabled, page navigation controls are displayed in a pager row.</span></span> <span data-ttu-id="9fda8-613">若要启用分页，请将 AllowPaging 属性设置为**true**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-613">To enable paging, set the AllowPaging property to **true**.</span></span> <span data-ttu-id="9fda8-614">使用 PagerStyle 和 PagerSettings 属性可以自定义页导航行。</span><span class="sxs-lookup"><span data-stu-id="9fda8-614">The pager row can be customized using the PagerStyle and PagerSettings properties.</span></span>

## <a name="customizing-the-user-interface"></a><span data-ttu-id="9fda8-615">自定义用户界面</span><span class="sxs-lookup"><span data-stu-id="9fda8-615">Customizing the User Interface</span></span>

<span data-ttu-id="9fda8-616">您可以通过设置控件的不同部分的样式属性来自定义 DetailsView 控件的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-616">You can customize the appearance of the DetailsView control by setting the style properties for the different parts of the control.</span></span> <span data-ttu-id="9fda8-617">下表列出了不同的样式属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-617">The following table lists the different style properties.</span></span>

| <span data-ttu-id="9fda8-618">**Style 属性**</span><span class="sxs-lookup"><span data-stu-id="9fda8-618">**Style property**</span></span> | <span data-ttu-id="9fda8-619">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-619">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-620">AlternatingRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-620">AlternatingRowStyle</span></span> | <span data-ttu-id="9fda8-621">DetailsView 控件中交替数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-621">The style settings for the alternating data rows in the DetailsView control.</span></span> <span data-ttu-id="9fda8-622">设置此属性时，数据行将在 RowStyle 设置和**AlternatingRowStyle**设置之间交替显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-622">When this property is set, the data rows are displayed alternating between the RowStyle settings and the **AlternatingRowStyle** settings.</span></span> |
| <span data-ttu-id="9fda8-623">CommandRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-623">CommandRowStyle</span></span> | <span data-ttu-id="9fda8-624">包含 DetailsView 控件中内置命令按钮的行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-624">The style settings for the row containing the built-in command buttons in the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-625">EditRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-625">EditRowStyle</span></span> | <span data-ttu-id="9fda8-626">DetailsView 控件处于编辑模式时数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-626">The style settings for the data rows when the DetailsView control is in edit mode.</span></span> |
| <span data-ttu-id="9fda8-627">EmptyDataRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-627">EmptyDataRowStyle</span></span> | <span data-ttu-id="9fda8-628">当数据源不包含任何记录时，DetailsView 控件中显示的空数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-628">The style settings for the empty data row displayed in the DetailsView control when the data source does not contain any records.</span></span> |
| <span data-ttu-id="9fda8-629">FooterStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-629">FooterStyle</span></span> | <span data-ttu-id="9fda8-630">DetailsView 控件的页脚行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-630">The style settings for the footer row of the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-631">HeaderStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-631">HeaderStyle</span></span> | <span data-ttu-id="9fda8-632">DetailsView 控件的标题行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-632">The style settings for the header row of the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-633">InsertRowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-633">InsertRowStyle</span></span> | <span data-ttu-id="9fda8-634">DetailsView 控件处于插入模式时数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-634">The style settings for the data rows when the DetailsView control is in insert mode.</span></span> |
| <span data-ttu-id="9fda8-635">PagerStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-635">PagerStyle</span></span> | <span data-ttu-id="9fda8-636">DetailsView 控件的页导航行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-636">The style settings for the pager row of the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-637">RowStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-637">RowStyle</span></span> | <span data-ttu-id="9fda8-638">DetailsView 控件中的数据行的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-638">The style settings for the data rows in the DetailsView control.</span></span> <span data-ttu-id="9fda8-639">如果同时设置了**AlternatingRowStyle**属性，则会在 " **RowStyle** " 设置和 " **AlternatingRowStyle** " 设置之间交替显示数据行。</span><span class="sxs-lookup"><span data-stu-id="9fda8-639">When the **AlternatingRowStyle** property is also set, the data rows are displayed alternating between the **RowStyle** settings and the **AlternatingRowStyle** settings.</span></span> |
| <span data-ttu-id="9fda8-640">FieldHeaderStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-640">FieldHeaderStyle</span></span> | <span data-ttu-id="9fda8-641">DetailsView 控件的标题列的样式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-641">The style settings for the header column of the DetailsView control.</span></span> |

## <a name="events"></a><span data-ttu-id="9fda8-642">事件</span><span class="sxs-lookup"><span data-stu-id="9fda8-642">Events</span></span>

<span data-ttu-id="9fda8-643">DetailsView 控件提供了几个可对其进行编程的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-643">The DetailsView control provides several events that you can program against.</span></span> <span data-ttu-id="9fda8-644">这使您可以在每次发生事件时运行自定义例程。</span><span class="sxs-lookup"><span data-stu-id="9fda8-644">This allows you to run a custom routine whenever an event occurs.</span></span> <span data-ttu-id="9fda8-645">下表列出了 DetailsView 控件支持的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-645">The following table lists the events supported by the DetailsView control.</span></span> <span data-ttu-id="9fda8-646">DetailsView 控件还从其基类继承这些事件：数据绑定、数据绑定、已释放、初始化、加载、呈现和呈现。</span><span class="sxs-lookup"><span data-stu-id="9fda8-646">The DetailsView control also inherits these events from its base classes: DataBinding, DataBound, Disposed, Init, Load, PreRender, and Render.</span></span>

| <span data-ttu-id="9fda8-647">**Event**</span><span class="sxs-lookup"><span data-stu-id="9fda8-647">**Event**</span></span> | <span data-ttu-id="9fda8-648">**描述**</span><span class="sxs-lookup"><span data-stu-id="9fda8-648">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-649">ItemCommand</span><span class="sxs-lookup"><span data-stu-id="9fda8-649">ItemCommand</span></span> | <span data-ttu-id="9fda8-650">在 DetailsView 控件中单击按钮时发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-650">Occurs when a button is clicked in the DetailsView control.</span></span> |
| <span data-ttu-id="9fda8-651">ItemCreated</span><span class="sxs-lookup"><span data-stu-id="9fda8-651">ItemCreated</span></span> | <span data-ttu-id="9fda8-652">在 DetailsView 控件中创建所有 DetailsViewRow 对象之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-652">Occurs after all DetailsViewRow objects are created in the DetailsView control.</span></span> <span data-ttu-id="9fda8-653">此事件通常用于在记录显示之前修改记录的值。</span><span class="sxs-lookup"><span data-stu-id="9fda8-653">This event is often used to modify the values of a record before it is displayed.</span></span> |
| <span data-ttu-id="9fda8-654">ItemDeleted</span><span class="sxs-lookup"><span data-stu-id="9fda8-654">ItemDeleted</span></span> | <span data-ttu-id="9fda8-655">在单击 "删除" 按钮时，但在 DetailsView 控件从数据源中删除记录之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-655">Occurs when a Delete button is clicked, but after the DetailsView control deletes the record from the data source.</span></span> <span data-ttu-id="9fda8-656">此事件通常用于检查删除操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-656">This event is often used to check the results of the delete operation.</span></span> |
| <span data-ttu-id="9fda8-657">ItemDeleting</span><span class="sxs-lookup"><span data-stu-id="9fda8-657">ItemDeleting</span></span> | <span data-ttu-id="9fda8-658">当单击 "删除" 按钮时，但在 DetailsView 控件从数据源删除记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-658">Occurs when a Delete button is clicked, but before the DetailsView control deletes the record from the data source.</span></span> <span data-ttu-id="9fda8-659">此事件通常用于取消删除操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-659">This event is often used to cancel the delete operation.</span></span> |
| <span data-ttu-id="9fda8-660">ItemInserted</span><span class="sxs-lookup"><span data-stu-id="9fda8-660">ItemInserted</span></span> | <span data-ttu-id="9fda8-661">单击 "插入" 按钮时，但在 DetailsView 控件插入记录后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-661">Occurs when an Insert button is clicked, but after the DetailsView control inserts the record.</span></span> <span data-ttu-id="9fda8-662">此事件通常用于检查插入操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-662">This event is often used to check the results of the insert operation.</span></span> |
| <span data-ttu-id="9fda8-663">ItemInserting</span><span class="sxs-lookup"><span data-stu-id="9fda8-663">ItemInserting</span></span> | <span data-ttu-id="9fda8-664">当单击 "插入" 按钮时，但在 DetailsView 控件插入记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-664">Occurs when an Insert button is clicked, but before the DetailsView control inserts the record.</span></span> <span data-ttu-id="9fda8-665">此事件通常用于取消插入操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-665">This event is often used to cancel the insert operation.</span></span> |
| <span data-ttu-id="9fda8-666">ItemUpdated</span><span class="sxs-lookup"><span data-stu-id="9fda8-666">ItemUpdated</span></span> | <span data-ttu-id="9fda8-667">单击 "更新" 按钮时，但在 DetailsView 控件更新行后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-667">Occurs when an Update button is clicked, but after the DetailsView control updates the row.</span></span> <span data-ttu-id="9fda8-668">此事件通常用于检查更新操作的结果。</span><span class="sxs-lookup"><span data-stu-id="9fda8-668">This event is often used to check the results of the update operation.</span></span> |
| <span data-ttu-id="9fda8-669">ItemUpdating</span><span class="sxs-lookup"><span data-stu-id="9fda8-669">ItemUpdating</span></span> | <span data-ttu-id="9fda8-670">当单击 "更新" 按钮时，但在 DetailsView 控件更新记录之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-670">Occurs when an Update button is clicked, but before the DetailsView control updates the record.</span></span> <span data-ttu-id="9fda8-671">此事件通常用于取消更新操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-671">This event is often used to cancel the update operation.</span></span> |
| <span data-ttu-id="9fda8-672">ModeChanged</span><span class="sxs-lookup"><span data-stu-id="9fda8-672">ModeChanged</span></span> | <span data-ttu-id="9fda8-673">在 DetailsView 控件更改模式（编辑、插入或只读模式）后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-673">Occurs after the DetailsView control changes modes (edit, insert, or read-only mode).</span></span> <span data-ttu-id="9fda8-674">此事件通常用于在 DetailsView 控件更改模式时执行任务。</span><span class="sxs-lookup"><span data-stu-id="9fda8-674">This event is often used to perform a task when the DetailsView control changes modes.</span></span> |
| <span data-ttu-id="9fda8-675">ModeChanging</span><span class="sxs-lookup"><span data-stu-id="9fda8-675">ModeChanging</span></span> | <span data-ttu-id="9fda8-676">在 DetailsView 控件更改模式（编辑、插入或只读模式）之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-676">Occurs before the DetailsView control changes modes (edit, insert, or read-only mode).</span></span> <span data-ttu-id="9fda8-677">此事件通常用于取消模式更改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-677">This event is often used to cancel a mode change.</span></span> |
| <span data-ttu-id="9fda8-678">PageIndexChanged</span><span class="sxs-lookup"><span data-stu-id="9fda8-678">PageIndexChanged</span></span> | <span data-ttu-id="9fda8-679">在单击某一页导航按钮时，但在 DetailsView 控件处理分页操作之后发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-679">Occurs when one of the pager buttons is clicked, but after the DetailsView control handles the paging operation.</span></span> <span data-ttu-id="9fda8-680">此事件通常在用户导航至控件中的其他记录后需要执行任务时使用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-680">This event is commonly used when you need to perform a task after the user navigates to a different record in the control.</span></span> |
| <span data-ttu-id="9fda8-681">PageIndexChanging</span><span class="sxs-lookup"><span data-stu-id="9fda8-681">PageIndexChanging</span></span> | <span data-ttu-id="9fda8-682">当单击某一页导航按钮时，但在 DetailsView 控件处理分页操作之前发生。</span><span class="sxs-lookup"><span data-stu-id="9fda8-682">Occurs when one of the pager buttons is clicked, but before the DetailsView control handles the paging operation.</span></span> <span data-ttu-id="9fda8-683">此事件通常用于取消分页操作。</span><span class="sxs-lookup"><span data-stu-id="9fda8-683">This event is often used to cancel the paging operation.</span></span> |

## <a name="the-menu-control"></a><span data-ttu-id="9fda8-684">Menu 控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-684">The Menu Control</span></span>

<span data-ttu-id="9fda8-685">ASP.NET 2.0 中的 Menu 控件设计为功能完备的导航系统。</span><span class="sxs-lookup"><span data-stu-id="9fda8-685">The Menu control in ASP.NET 2.0 is designed to be a full-featured navigation system.</span></span> <span data-ttu-id="9fda8-686">可以轻松地将其绑定到分层数据源（例如 SiteMapDataSource）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-686">It can be databound easily to hierarchical data sources such as the SiteMapDataSource.</span></span>

<span data-ttu-id="9fda8-687">可以通过声明方式或动态方式定义菜单控件结构，并由单个根节点和任意数量的子节点组成。</span><span class="sxs-lookup"><span data-stu-id="9fda8-687">A Menu controls structure can be defined declaratively or dynamically and consists of a single root node and any number of sub-nodes.</span></span> <span data-ttu-id="9fda8-688">下面的代码以声明方式为 Menu 控件定义菜单。</span><span class="sxs-lookup"><span data-stu-id="9fda8-688">The following code declaratively defines a menu for the Menu control.</span></span>

[!code-aspx[Main](data-bound-controls/samples/sample4.aspx)]

<span data-ttu-id="9fda8-689">在上面的示例中，"主页 .aspx" 节点是根节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-689">In the above example, the Home.aspx node is the root node.</span></span> <span data-ttu-id="9fda8-690">所有其他节点嵌套在根节点的不同级别。</span><span class="sxs-lookup"><span data-stu-id="9fda8-690">All other nodes are nested within the root node at various levels.</span></span>

<span data-ttu-id="9fda8-691">菜单控件可以呈现两种类型的菜单：静态菜单和动态菜单。</span><span class="sxs-lookup"><span data-stu-id="9fda8-691">There are two types of menus that the Menu control can render; static menus and dynamic menus.</span></span> <span data-ttu-id="9fda8-692">静态菜单包含始终可见的菜单项。</span><span class="sxs-lookup"><span data-stu-id="9fda8-692">Static menus consist of menu items that are always visible.</span></span> <span data-ttu-id="9fda8-693">动态菜单由菜单项组成，它们仅在用户用鼠标悬停在其上时可见。</span><span class="sxs-lookup"><span data-stu-id="9fda8-693">Dynamic menus consist of menu items that are only visible when the user hovers over them with the mouse.</span></span> <span data-ttu-id="9fda8-694">客户可能经常将静态菜单与以声明方式定义的菜单和动态菜单（包含在运行时进行数据绑定的菜单）混淆。</span><span class="sxs-lookup"><span data-stu-id="9fda8-694">Customers may often confuse static menus with menus defined declaratively and dynamic menus with menus that are databound at runtime.</span></span> <span data-ttu-id="9fda8-695">事实上，动态和静态菜单与填充方法无关。</span><span class="sxs-lookup"><span data-stu-id="9fda8-695">In fact, dynamic and static menus are unrelated to the method of population.</span></span> <span data-ttu-id="9fda8-696">术语*static*和*dynamic*仅指默认情况下是否静态显示菜单，或仅在用户执行某个操作时显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-696">The terms *static* and *dynamic* refer only to whether or not the menu is statically displayed by default or only displayed when the user takes some action.</span></span>

<span data-ttu-id="9fda8-697">**StaticDisplayLevels**属性用于配置默认情况下显示的静态菜单级别数。</span><span class="sxs-lookup"><span data-stu-id="9fda8-697">The **StaticDisplayLevels** property is used to configure how many levels of the menu are static and therefore displayed by default.</span></span> <span data-ttu-id="9fda8-698">在上面的示例中，将**StaticDisplayLevels**属性设置为值2将导致菜单静态地显示 "主节点"、"音乐" 节点和 "电影" 节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-698">In the above example, setting the **StaticDisplayLevels** property to a value of 2 would cause the menu to statically display the Home node, the Music node, and the Movies node.</span></span> <span data-ttu-id="9fda8-699">当用户将鼠标指针悬停在父节点上时，所有其他节点将会动态显示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-699">All other nodes would be dynamically displayed when the user hovers over the parent node.</span></span>

<span data-ttu-id="9fda8-700">**MaximumDynamicDisplayLevels**属性配置菜单能够显示的最大动态级别数。</span><span class="sxs-lookup"><span data-stu-id="9fda8-700">The **MaximumDynamicDisplayLevels** property configures the maximum number of dynamic levels the menu is capable of displaying.</span></span> <span data-ttu-id="9fda8-701">高于**MaximumDynamicDisplayLevels**属性指定的值的任何动态菜单都将被丢弃。</span><span class="sxs-lookup"><span data-stu-id="9fda8-701">Any dynamic menus at a level higher than the value specified by the **MaximumDynamicDisplayLevels** property are discarded.</span></span>

> [!NOTE]
> <span data-ttu-id="9fda8-702">您可能会遇到这样的情况：由于 MaximumDynamicDisplayLevels 属性的原因，菜单没有呈现出来。</span><span class="sxs-lookup"><span data-stu-id="9fda8-702">It is almost certain that you might encounter situations where menus don't appear to render due to the MaximumDynamicDisplayLevels property.</span></span> <span data-ttu-id="9fda8-703">在这些情况下，请确保已将属性设置为足以允许显示 "客户" 菜单。</span><span class="sxs-lookup"><span data-stu-id="9fda8-703">In those cases, ensure that the property is set sufficiently to allow for the display of the customers menus.</span></span>

## <a name="data-binding-the-menu-control"></a><span data-ttu-id="9fda8-704">数据绑定菜单控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-704">Data Binding the Menu Control</span></span>

<span data-ttu-id="9fda8-705">Menu 控件可以绑定到任何分层数据源，如 SiteMapDataSource 或 XMLDataSource。</span><span class="sxs-lookup"><span data-stu-id="9fda8-705">The Menu control can be bound to any hierarchical data source such as the SiteMapDataSource or the XMLDataSource.</span></span> <span data-ttu-id="9fda8-706">SiteMapDataSource 是用于向 Menu 控件进行数据绑定的最常用方法，因为该方法从 Web.config 文件中馈送，并且其架构为 Menu 控件提供已知 API。</span><span class="sxs-lookup"><span data-stu-id="9fda8-706">The SiteMapDataSource is the most commonly used method for data binding to a Menu control because it feeds off of the Web.sitemap file and its schema provides a known API to the Menu control.</span></span> <span data-ttu-id="9fda8-707">下面的列表显示了一个简单的 Web.config 文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-707">The listing below shows a simple Web.sitemap file.</span></span>

[!code-xml[Main](data-bound-controls/samples/sample5.xml)]

<span data-ttu-id="9fda8-708">请注意，在此示例中，只有一个根 siteMapNode 元素，即 Home 元素。</span><span class="sxs-lookup"><span data-stu-id="9fda8-708">Notice that there is only one root siteMapNode element, in this case, the Home element.</span></span> <span data-ttu-id="9fda8-709">可以为每个 siteMapNode 配置多个属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-709">Several attributes can be configured for each siteMapNode.</span></span> <span data-ttu-id="9fda8-710">最常用的属性包括：</span><span class="sxs-lookup"><span data-stu-id="9fda8-710">The most commonly used attributes are:</span></span>

- <span data-ttu-id="9fda8-711">**url**指定当用户单击菜单项时要显示的 URL。</span><span class="sxs-lookup"><span data-stu-id="9fda8-711">**url** Specifies the URL to display when a user clicks the menu item.</span></span> <span data-ttu-id="9fda8-712">如果此属性不存在，则该节点将在被单击时直接回发。</span><span class="sxs-lookup"><span data-stu-id="9fda8-712">If this attribute is not present, the node will simply post back when clicked.</span></span>
- <span data-ttu-id="9fda8-713">**标题**指定在菜单项上显示的文本。</span><span class="sxs-lookup"><span data-stu-id="9fda8-713">**title** Specifies the text that is displayed on the menu item.</span></span>
- <span data-ttu-id="9fda8-714">**描述**用作节点的文档。</span><span class="sxs-lookup"><span data-stu-id="9fda8-714">**description** Used as documentation for the node.</span></span> <span data-ttu-id="9fda8-715">当鼠标悬停在节点上时，还会显示为工具提示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-715">Also displays as a tool tip when the mouse is hovered over the node.</span></span>
- <span data-ttu-id="9fda8-716">**siteMapFile**允许嵌套站点地图。</span><span class="sxs-lookup"><span data-stu-id="9fda8-716">**siteMapFile** Allows for nested sitemaps.</span></span> <span data-ttu-id="9fda8-717">此特性必须指向格式正确的 ASP.NET 站点地图文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-717">This attribute must point to a well-formed ASP.NET sitemap file.</span></span>
- <span data-ttu-id="9fda8-718">**角色**允许通过 ASP.NET 安全修整来控制节点的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-718">**roles** Allows for the appearance of a node to be controlled by ASP.NET security trimming.</span></span>

<span data-ttu-id="9fda8-719">请注意，尽管这些属性都是可选的，但如果未指定，菜单的行为可能不是预期的。</span><span class="sxs-lookup"><span data-stu-id="9fda8-719">Note that while these attributes are all optional, the behavior of the menu may not be what is expected if they are not specified.</span></span> <span data-ttu-id="9fda8-720">例如，如果指定了*url*属性，但*description*属性不为，则该节点将不可见，因此将无法导航到指定的 url。</span><span class="sxs-lookup"><span data-stu-id="9fda8-720">For example, if the *url* attribute is specified but the *description* attribute is not, the node will not be visible and there will be no way to navigate to the URL specified.</span></span>

## <a name="controlling-a-menus-operation"></a><span data-ttu-id="9fda8-721">控制菜单操作</span><span class="sxs-lookup"><span data-stu-id="9fda8-721">Controlling a Menus Operation</span></span>

<span data-ttu-id="9fda8-722">有几个属性会影响 ASP.NET 菜单控件的操作;"**方向**" 属性、 **DisappearAfter**属性、 **StaticItemFormatString**属性和**StaticPopoutImageUrl**属性只是其中的一部分。</span><span class="sxs-lookup"><span data-stu-id="9fda8-722">There are several properties that affect the operation of an ASP.NET Menu control; the **Orientation** property, the **DisappearAfter** property, the **StaticItemFormatString** property, and the **StaticPopoutImageUrl** property are just a few of these.</span></span>

- <span data-ttu-id="9fda8-723">可以将**方向**设置为*水平*或*垂直*，并控制静态菜单项是在行中水平布局还是垂直布局。</span><span class="sxs-lookup"><span data-stu-id="9fda8-723">The **Orientation** can be set to either *horizontal* or *vertical* and controls whether static menu items are laid out horizontally in a row or vertically and stacked upon one another.</span></span> <span data-ttu-id="9fda8-724">此属性不影响动态菜单。</span><span class="sxs-lookup"><span data-stu-id="9fda8-724">This property does not affect dynamic menus.</span></span>
- <span data-ttu-id="9fda8-725">**DisappearAfter**属性配置动态菜单在移动鼠标后应保持可见的时间。</span><span class="sxs-lookup"><span data-stu-id="9fda8-725">The **DisappearAfter** property configures how long a dynamic menu should remain visible after the mouse has been moved away from it.</span></span> <span data-ttu-id="9fda8-726">该值以毫秒为单位指定，默认值为500。</span><span class="sxs-lookup"><span data-stu-id="9fda8-726">The value is specified in milliseconds and defaults to 500.</span></span> <span data-ttu-id="9fda8-727">如果将此属性的值设置为-1，则会导致菜单永远不会自动消失。</span><span class="sxs-lookup"><span data-stu-id="9fda8-727">Setting this property to a value of -1 will cause the menu to never disappear automatically.</span></span> <span data-ttu-id="9fda8-728">在这种情况下，仅当用户在菜单外部单击时，菜单才会消失。</span><span class="sxs-lookup"><span data-stu-id="9fda8-728">In that case, the menu will only disappear when the user clicks outside of the menu.</span></span>
- <span data-ttu-id="9fda8-729">**StaticItemFormatString**属性使你可以轻松地在菜单系统中维护一致的措辞。</span><span class="sxs-lookup"><span data-stu-id="9fda8-729">The **StaticItemFormatString** property makes it easy to maintain consistent verbiage in your menu system.</span></span> <span data-ttu-id="9fda8-730">指定此属性时，应输入 *{0}* ，以代替出现在数据源中的说明。</span><span class="sxs-lookup"><span data-stu-id="9fda8-730">When specifying this property, *{0}* should be entered in place of the description that appears in the data source.</span></span> <span data-ttu-id="9fda8-731">例如，若要让 "练习 1" 中的菜单项显示 "访问我们的产品" 页，等，请为 StaticItemFormatString 指定访问我们的 {0} 页。</span><span class="sxs-lookup"><span data-stu-id="9fda8-731">For example, in order to have the menu item from exercise 1 say Visit Our Products Page, etc., you would specify Visit Our {0} Page for the StaticItemFormatString.</span></span> <span data-ttu-id="9fda8-732">在运行时，ASP.NET 会将任何 {0} 替换为菜单项的正确说明。</span><span class="sxs-lookup"><span data-stu-id="9fda8-732">At runtime, ASP.NET will replace any occurrence of {0} with the correct description for the menu item.</span></span>
- <span data-ttu-id="9fda8-733">**StaticPopoutImageUrl**属性指定用于指示特定菜单节点具有可通过鼠标悬停在其上访问的子节点的图像。</span><span class="sxs-lookup"><span data-stu-id="9fda8-733">The **StaticPopoutImageUrl** property specifies the image that is used to indicate that a particular menu node has child nodes that can be accessed by hovering over it.</span></span> <span data-ttu-id="9fda8-734">动态菜单将继续使用默认图像。</span><span class="sxs-lookup"><span data-stu-id="9fda8-734">Dynamic menus will continue to use the default image.</span></span>

## <a name="templated-menu-controls"></a><span data-ttu-id="9fda8-735">模板化菜单控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-735">Templated Menu Controls</span></span>

<span data-ttu-id="9fda8-736">Menu 控件是模板化控件，允许两个不同的 ItemTemplates;StaticItemTemplate 和 DynamicItemTemplate。</span><span class="sxs-lookup"><span data-stu-id="9fda8-736">The Menu control is a templated control and allows for two different ItemTemplates; the StaticItemTemplate and the DynamicItemTemplate.</span></span> <span data-ttu-id="9fda8-737">使用这些模板，可以轻松地向菜单添加服务器控件或用户控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-737">Using these templates, you can easily add server controls or user controls to your menus.</span></span>

<span data-ttu-id="9fda8-738">若要在 Visual Studio .NET 中编辑模板，请单击菜单上的 "智能标记" 按钮，然后选择 "编辑模板"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-738">To edit the templates in Visual Studio .NET, click the Smart Tag button on the menu and either choose Edit Templates.</span></span> <span data-ttu-id="9fda8-739">然后，可以在编辑 StaticItemTemplate 或 DynamicItemTemplate 之间进行选择。</span><span class="sxs-lookup"><span data-stu-id="9fda8-739">You can then choose between editing the StaticItemTemplate or the DynamicItemTemplate.</span></span>

<span data-ttu-id="9fda8-740">加载页面时，添加到 StaticItemTemplate 的任何控件都将显示在静态菜单中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-740">Any controls added to the StaticItemTemplate will appear in the static menu when the page loads.</span></span> <span data-ttu-id="9fda8-741">任何添加到 DynamicItemTemplate 的控件将显示在所有弹出菜单上。</span><span class="sxs-lookup"><span data-stu-id="9fda8-741">Any controls added to the DynamicItemTemplate will appear on all pop-up menus.</span></span>

## <a name="menu-events"></a><span data-ttu-id="9fda8-742">菜单事件</span><span class="sxs-lookup"><span data-stu-id="9fda8-742">Menu Events</span></span>

<span data-ttu-id="9fda8-743">Menu 控件有两个唯一的事件;**MenuItemClicked**和**MenuItemDatabound**事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-743">The Menu control has two events that are unique to it; the **MenuItemClicked** and the **MenuItemDatabound** event.</span></span>

<span data-ttu-id="9fda8-744">单击菜单项时，将引发 MenuItemClicked 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-744">The MenuItemClicked event is raised when a menu item is clicked.</span></span> <span data-ttu-id="9fda8-745">当对菜单项进行数据绑定时，将引发 MenuItemDatabound 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-745">The MenuItemDatabound event is raised when a menu item is databound.</span></span> <span data-ttu-id="9fda8-746">传递给事件处理程序的**MenuEventArgs**通过 item 属性提供对菜单项的访问。</span><span class="sxs-lookup"><span data-stu-id="9fda8-746">The **MenuEventArgs** that is passed to the event handler provides access to the menu item via the Item property.</span></span>

## <a name="controlling-a-menus-appearance"></a><span data-ttu-id="9fda8-747">控制菜单外观</span><span class="sxs-lookup"><span data-stu-id="9fda8-747">Controlling a Menus Appearance</span></span>

<span data-ttu-id="9fda8-748">您还可以使用一个或多个可用于设置菜单格式的样式来影响菜单控件的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-748">You can also affect the appearance of a menu control using one or more of the many styles available to format menus.</span></span> <span data-ttu-id="9fda8-749">其中包括**StaticMenuStyle**、 **DynamicMenuStyle**、 **DynamicMenuItemStyle**、 **DynamicSelectedStyle**和**DynamicHoverStyle**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-749">Among these are **StaticMenuStyle**, **DynamicMenuStyle**, **DynamicMenuItemStyle**, **DynamicSelectedStyle**, and **DynamicHoverStyle**.</span></span> <span data-ttu-id="9fda8-750">这些属性是使用标准 HTML 样式字符串配置的。</span><span class="sxs-lookup"><span data-stu-id="9fda8-750">These properties are configured using a standard HTML Style string.</span></span> <span data-ttu-id="9fda8-751">例如，以下将影响动态菜单的样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-751">For example, the following will affect the style for dynamic menus.</span></span>

[!code-aspx[Main](data-bound-controls/samples/sample6.aspx)]

> [!NOTE]
> <span data-ttu-id="9fda8-752">如果使用任何悬停样式，则需要将中的 &lt;head&gt; 元素添加到页面，并将*runat*元素设置为*server*。</span><span class="sxs-lookup"><span data-stu-id="9fda8-752">If you are using any of the Hover styles, you will need to add a &lt;head&gt; element in to the page with the *runat* element set to *server*.</span></span>

<span data-ttu-id="9fda8-753">Menu 控件还支持使用 ASP.NET 2.0 主题。</span><span class="sxs-lookup"><span data-stu-id="9fda8-753">Menu controls also support the use of ASP.NET 2.0 themes.</span></span>

## <a name="the-treeview-control"></a><span data-ttu-id="9fda8-754">TreeView 控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-754">The TreeView Control</span></span>

<span data-ttu-id="9fda8-755">TreeView 控件在类似于树的结构中显示数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-755">The TreeView control displays data in a tree-like structure.</span></span> <span data-ttu-id="9fda8-756">与 Menu 控件一样，可以轻松地将数据绑定到任何分层数据源（例如 SiteMapDataSource）。</span><span class="sxs-lookup"><span data-stu-id="9fda8-756">As with the Menu control, it can be easily data bound to any hierarchical data source such as the SiteMapDataSource.</span></span>

<span data-ttu-id="9fda8-757">对于 ASP.NET 2.0 中的 TreeView 控件，客户可能会问的第一个问题是是否与可用于 ASP.NET 1.x 的 TreeView IE WebControl 相关。</span><span class="sxs-lookup"><span data-stu-id="9fda8-757">The first question that customers are likely to ask about the TreeView control in ASP.NET 2.0 is whether or not it is related to the TreeView IE WebControl that was available for ASP.NET 1.x.</span></span> <span data-ttu-id="9fda8-758">不是。</span><span class="sxs-lookup"><span data-stu-id="9fda8-758">It is not.</span></span> <span data-ttu-id="9fda8-759">ASP.NET 2.0 TreeView 控件已从头开始编写，并为以前提供的 IE TreeView WebControl 提供了显著改进。</span><span class="sxs-lookup"><span data-stu-id="9fda8-759">The ASP.NET 2.0 TreeView control was written from the ground up and offers significant improvement over the IE TreeView WebControl that was previously available.</span></span>

<span data-ttu-id="9fda8-760">我不会详细介绍如何将 TreeView 控件绑定到站点地图，因为它的执行方式与菜单控件完全相同。</span><span class="sxs-lookup"><span data-stu-id="9fda8-760">I won't go into detail on how to bind a TreeView control to a site map as it is performed in exactly the same way as the Menu control.</span></span> <span data-ttu-id="9fda8-761">但是，TreeView 控件的运行方式有一些不同之处。</span><span class="sxs-lookup"><span data-stu-id="9fda8-761">However, the TreeView control has some distinct differences in the way that it operates.</span></span>

<span data-ttu-id="9fda8-762">默认情况下，TreeView 控件完全展开。</span><span class="sxs-lookup"><span data-stu-id="9fda8-762">By default, a TreeView control appears fully expanded.</span></span> <span data-ttu-id="9fda8-763">若要更改初始加载时的扩展级别，请修改控件的**ExpandDepth**属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-763">To change the level of expansion upon initial load, modify the **ExpandDepth** property of the control.</span></span> <span data-ttu-id="9fda8-764">当 TreeView 在展开特定节点时进行数据绑定时，这一点尤其重要。</span><span class="sxs-lookup"><span data-stu-id="9fda8-764">This is particularly important in cases where the TreeView is databound upon expanding particular nodes.</span></span>

## <a name="databinding-the-treeview-control"></a><span data-ttu-id="9fda8-765">对 TreeView 控件进行数据绑定</span><span class="sxs-lookup"><span data-stu-id="9fda8-765">DataBinding the TreeView Control</span></span>

<span data-ttu-id="9fda8-766">与 Menu 控件不同，TreeView 适合处理大量数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-766">Unlike the Menu control, the TreeView lends itself well to handling large amounts of data.</span></span> <span data-ttu-id="9fda8-767">因此，除了数据绑定到 SiteMapDataSource 或 XMLDataSource，TreeView 通常还会数据绑定到数据集或其他关系数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-767">Therefore, in addition to databinding to a SiteMapDataSource or XMLDataSource, the TreeView is often data bound to a DataSet or other relational data.</span></span> <span data-ttu-id="9fda8-768">在 TreeView 控件绑定到大量数据的情况下，最好只绑定到控件中实际可见的数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-768">In cases where the TreeView control is bound to large amounts of data, it is best to bind only to data that is actually visible in the control.</span></span> <span data-ttu-id="9fda8-769">然后，你可以在展开 TreeView 节点时数据绑定到其他数据。</span><span class="sxs-lookup"><span data-stu-id="9fda8-769">You can then data bind to additional data as TreeView nodes are expanded.</span></span>

<span data-ttu-id="9fda8-770">在这些情况下，TreeView 的**PopulateOnDemand**属性应设置为*true*。</span><span class="sxs-lookup"><span data-stu-id="9fda8-770">In these cases, the **PopulateOnDemand** property of the TreeView should be set to *true*.</span></span> <span data-ttu-id="9fda8-771">然后，需要为**TreeNodePopulate**方法提供实现。</span><span class="sxs-lookup"><span data-stu-id="9fda8-771">You will then need to provide an implementation for the **TreeNodePopulate** method.</span></span>

## <a name="data-binding-without-postback"></a><span data-ttu-id="9fda8-772">无回发的数据绑定</span><span class="sxs-lookup"><span data-stu-id="9fda8-772">Data Binding Without PostBack</span></span>

<span data-ttu-id="9fda8-773">请注意，当你首次展开上一示例中的节点时，该页会回发并刷新。</span><span class="sxs-lookup"><span data-stu-id="9fda8-773">Notice that when you expand a node in the previous example for the first time, the page posts back and refreshes.</span></span> <span data-ttu-id="9fda8-774">这并不是此示例中的问题，但可以想象，它可能位于具有大量数据的生产环境中。</span><span class="sxs-lookup"><span data-stu-id="9fda8-774">Thats not a problem in this example, but you can imagine that it might be in a production environment with a large amount of data.</span></span> <span data-ttu-id="9fda8-775">更好的方案是 TreeView 仍会动态填充其节点，而不会回发到服务器。</span><span class="sxs-lookup"><span data-stu-id="9fda8-775">A better scenario would be one in which the TreeView would still dynamically populate its nodes, but without a post back to the server.</span></span>

<span data-ttu-id="9fda8-776">通过将**PopulateNodesFromClient**和**PopulateOnDemand**属性设置为 true，ASP.NET TreeView 控件将在不回发的情况下动态填充节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-776">By setting the **PopulateNodesFromClient** and the **PopulateOnDemand** properties to true, the ASP.NET TreeView control will dynamically populate nodes without a post back.</span></span> <span data-ttu-id="9fda8-777">展开父节点时，会从客户端发出 XMLHttp 请求，并触发 OnTreeNodePopulate 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-777">When the parent node is expanded, an XMLHttp request is made from the client and the OnTreeNodePopulate event is fired.</span></span> <span data-ttu-id="9fda8-778">服务器使用 XML 数据岛进行响应，该数据岛随后用于对子节点进行数据绑定。</span><span class="sxs-lookup"><span data-stu-id="9fda8-778">The server responds with an XML data island which is then used to data bind the child nodes.</span></span>

<span data-ttu-id="9fda8-779">ASP.NET 动态创建实现此功能的客户端代码。</span><span class="sxs-lookup"><span data-stu-id="9fda8-779">ASP.NET dynamically creates the client code that implements this functionality.</span></span> <span data-ttu-id="9fda8-780">包含脚本&gt; 标记 &lt;脚本会生成指向 AXD 文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-780">The &lt;script&gt; tags that contain the script are generated pointing to an AXD file.</span></span> <span data-ttu-id="9fda8-781">例如，下面的列表显示了生成 XMLHttp 请求的脚本代码的脚本链接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-781">For example, the listing below shows the script links for the script code that generates the XMLHttp request.</span></span>

[!code-html[Main](data-bound-controls/samples/sample7.html)]

<span data-ttu-id="9fda8-782">如果在浏览器中浏览上面的 AXD 文件并将其打开，则会看到实现了 XMLHttp 请求的代码。</span><span class="sxs-lookup"><span data-stu-id="9fda8-782">If you browse the AXD file above in your browser and open it, you will see the code that implements the XMLHttp request.</span></span> <span data-ttu-id="9fda8-783">此方法阻止客户修改脚本文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-783">This method prevents customers from modifying the script file.</span></span>

## <a name="controlling-the-operation-of-the-treeview-control"></a><span data-ttu-id="9fda8-784">控制 TreeView 控件的操作</span><span class="sxs-lookup"><span data-stu-id="9fda8-784">Controlling the Operation of the TreeView Control</span></span>

<span data-ttu-id="9fda8-785">TreeView 控件具有几个影响控件操作的属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-785">The TreeView control has several properties that affect the operation of the control.</span></span> <span data-ttu-id="9fda8-786">最明显的属性包括**ShowCheckBoxes**、 **ShowExpandCollapse**和**ShowLines**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-786">The most obvious properties are the **ShowCheckBoxes**, **ShowExpandCollapse**, and **ShowLines**.</span></span>

<span data-ttu-id="9fda8-787">**ShowCheckBoxes**属性影响在呈现时节点是否显示复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-787">The **ShowCheckBoxes** property affects whether or not nodes display a check box when rendered.</span></span> <span data-ttu-id="9fda8-788">此属性的有效值为**None**、 **Root**、 **Parent**、**叶**和**All**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-788">The valid values for this property are **None**, **Root**, **Parent**, **Leaf**, and **All**.</span></span> <span data-ttu-id="9fda8-789">这会影响 TreeView 控件，如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-789">These affect the TreeView control as follows:</span></span>

| <span data-ttu-id="9fda8-790">**属性值**</span><span class="sxs-lookup"><span data-stu-id="9fda8-790">**Property Value**</span></span> | <span data-ttu-id="9fda8-791">**效果**</span><span class="sxs-lookup"><span data-stu-id="9fda8-791">**Effect**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-792">无</span><span class="sxs-lookup"><span data-stu-id="9fda8-792">None</span></span> | <span data-ttu-id="9fda8-793">复选框不会显示在任何节点上。</span><span class="sxs-lookup"><span data-stu-id="9fda8-793">Checkboxes are not displayed on any nodes.</span></span> <span data-ttu-id="9fda8-794">此为默认设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-794">This is the default setting.</span></span> |
| <span data-ttu-id="9fda8-795">Root</span><span class="sxs-lookup"><span data-stu-id="9fda8-795">Root</span></span> | <span data-ttu-id="9fda8-796">仅在根节点上显示复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-796">A checkbox is only displayed on the root node.</span></span> |
| <span data-ttu-id="9fda8-797">父级</span><span class="sxs-lookup"><span data-stu-id="9fda8-797">Parent</span></span> | <span data-ttu-id="9fda8-798">只有具有子节点的节点上才会显示复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-798">A checkbox is only displayed on those nodes that have child nodes.</span></span> <span data-ttu-id="9fda8-799">这些子节点可以是父节点或叶节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-799">Those child nodes can be parent nodes or leaf nodes.</span></span> |
| <span data-ttu-id="9fda8-800">叶</span><span class="sxs-lookup"><span data-stu-id="9fda8-800">Leaf</span></span> | <span data-ttu-id="9fda8-801">仅对没有子节点的节点显示复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-801">A checkbox is displayed only on those nodes that have no child nodes.</span></span> |
| <span data-ttu-id="9fda8-802">All</span><span class="sxs-lookup"><span data-stu-id="9fda8-802">All</span></span> | <span data-ttu-id="9fda8-803">在所有节点上显示复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-803">A checkbox is displayed on all nodes.</span></span> |

<span data-ttu-id="9fda8-804">当使用 checkbox 时， **CheckedNodes**属性将返回在回发时检查的 TreeView 节点的集合。</span><span class="sxs-lookup"><span data-stu-id="9fda8-804">When checkboxes are being used, the **CheckedNodes** property will return a collection of TreeView nodes that are checked upon postback.</span></span>

<span data-ttu-id="9fda8-805">**ShowExpandCollapse**属性控制 root 节点和父节点旁边的展开/折叠图像的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-805">The **ShowExpandCollapse** property controls the appearance of the expand/collapse image next to root and parent nodes.</span></span> <span data-ttu-id="9fda8-806">如果将此属性设置为**false**，则 TreeView 节点呈现为超链接，并通过单击链接展开/折叠。</span><span class="sxs-lookup"><span data-stu-id="9fda8-806">If this property is set to **false**, TreeView nodes are rendered as hyperlinks and are expanded/collapsed by clicking on the link.</span></span>

<span data-ttu-id="9fda8-807">**ShowLines**属性控制是否显示将父节点连接到子节点的行。</span><span class="sxs-lookup"><span data-stu-id="9fda8-807">The **ShowLines** property controls whether or not lines are displayed connecting parent nodes to child nodes.</span></span> <span data-ttu-id="9fda8-808">如果**为 false** （默认值），则不显示任何行。</span><span class="sxs-lookup"><span data-stu-id="9fda8-808">When **false** (the default), no lines are displayed.</span></span> <span data-ttu-id="9fda8-809">如果**为 true**，TreeView 控件将使用**LineImagesFolder**属性指定的文件夹中的行图像。</span><span class="sxs-lookup"><span data-stu-id="9fda8-809">When **true**, the TreeView control will use lines images in the folder specified by the **LineImagesFolder** property.</span></span>

<span data-ttu-id="9fda8-810">为了自定义 TreeView 线条的外观，Visual Studio .NET 2005 包含行设计器工具。</span><span class="sxs-lookup"><span data-stu-id="9fda8-810">To customize the appearance of TreeView lines, Visual Studio .NET 2005 includes a Line Designer tool.</span></span> <span data-ttu-id="9fda8-811">您可以使用 TreeView 控件上的智能标记按钮访问此工具，如下所示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-811">You can access this tool using the Smart Tag button on the TreeView control as below.</span></span>

![](data-bound-controls/_static/image1.jpg)

<span data-ttu-id="9fda8-812">**图1**</span><span class="sxs-lookup"><span data-stu-id="9fda8-812">**Figure 1**</span></span>

<span data-ttu-id="9fda8-813">当选择 "**自定义行图像**" 菜单选项时，将启动线条设计器工具，以便您可以配置 TreeView 线条的外观。</span><span class="sxs-lookup"><span data-stu-id="9fda8-813">When select the **Customize Line Images** menu option, the Line Designer tool will be launched allowing you to configure the appearance of TreeView lines.</span></span>

## <a name="treeview-events"></a><span data-ttu-id="9fda8-814">TreeView 事件</span><span class="sxs-lookup"><span data-stu-id="9fda8-814">TreeView Events</span></span>

<span data-ttu-id="9fda8-815">TreeView 控件具有以下唯一事件：</span><span class="sxs-lookup"><span data-stu-id="9fda8-815">The TreeView control has the following unique events:</span></span>

- <span data-ttu-id="9fda8-816">根据**SelectAction**属性选择节点时，会发生 SelectedNodeChanged。</span><span class="sxs-lookup"><span data-stu-id="9fda8-816">SelectedNodeChanged Occurs when a node is selected based upon the **SelectAction** property.</span></span>
- <span data-ttu-id="9fda8-817">节点 checkboxs 状态更改时发生 TreeNodeCheckChanged。</span><span class="sxs-lookup"><span data-stu-id="9fda8-817">TreeNodeCheckChanged Occurs when a nodes checkboxs state is changed.</span></span>
- <span data-ttu-id="9fda8-818">当基于**SelectAction**属性展开某个节点时，会发生 TreeNodeExpanded。</span><span class="sxs-lookup"><span data-stu-id="9fda8-818">TreeNodeExpanded Occurs when a node is expanded based upon the **SelectAction** property.</span></span>
- <span data-ttu-id="9fda8-819">折叠节点时，会发生 TreeNodeCollapsed。</span><span class="sxs-lookup"><span data-stu-id="9fda8-819">TreeNodeCollapsed Occurs when a node is collapsed.</span></span>
- <span data-ttu-id="9fda8-820">节点绑定到数据时，会发生 TreeNodeDataBound。</span><span class="sxs-lookup"><span data-stu-id="9fda8-820">TreeNodeDataBound Occurs when a node is data bound.</span></span>
- <span data-ttu-id="9fda8-821">填充节点时，会发生 TreeNodePopulate。</span><span class="sxs-lookup"><span data-stu-id="9fda8-821">TreeNodePopulate Occurs when a node is populated.</span></span>

<span data-ttu-id="9fda8-822">使用**SelectAction**属性可以配置选择节点时触发的事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-822">The **SelectAction** property allows you to configure which event is fired when a node is selected.</span></span> <span data-ttu-id="9fda8-823">SelectAction 属性提供以下操作：</span><span class="sxs-lookup"><span data-stu-id="9fda8-823">The SelectAction property provides the following actions:</span></span>

- <span data-ttu-id="9fda8-824">选择节点时，TreeNodeSelectAction 将引发 TreeNodeExpanded。</span><span class="sxs-lookup"><span data-stu-id="9fda8-824">TreeNodeSelectAction.Expand Raises TreeNodeExpanded when the node is selected.</span></span>
- <span data-ttu-id="9fda8-825">TreeNodeSelectAction 在选择节点时不引发任何事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-825">TreeNodeSelectAction.None Raises no event when the node is selected.</span></span>
- <span data-ttu-id="9fda8-826">TreeNodeSelectAction 在选择节点时引发 SelectedNodeChanged 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-826">TreeNodeSelectAction.Select Raises the SelectedNodeChanged event when the node is selected.</span></span>
- <span data-ttu-id="9fda8-827">TreeNodeSelectAction SelectExpand 会在选择节点时引发 SelectedNodeChanged 事件和 TreeNodeExpanded 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-827">TreeNodeSelectAction.SelectExpand Raises both the SelectedNodeChanged event and the TreeNodeExpanded event when the node is selected.</span></span>

## <a name="controlling-appearance-with-styles"></a><span data-ttu-id="9fda8-828">用样式控制外观</span><span class="sxs-lookup"><span data-stu-id="9fda8-828">Controlling Appearance with Styles</span></span>

<span data-ttu-id="9fda8-829">TreeView 控件提供了许多用于控制具有样式的控件外观的属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-829">The TreeView control provides many properties for controlling the appearance of the control with styles.</span></span> <span data-ttu-id="9fda8-830">以下属性可用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-830">The following properties are available.</span></span>

| <span data-ttu-id="9fda8-831">**属性名称**</span><span class="sxs-lookup"><span data-stu-id="9fda8-831">**Property Name**</span></span> | <span data-ttu-id="9fda8-832">**控件**</span><span class="sxs-lookup"><span data-stu-id="9fda8-832">**Controls**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-833">HoverNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-833">HoverNodeStyle</span></span> | <span data-ttu-id="9fda8-834">当鼠标悬停在节点上时控制其样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-834">Controls the style of nodes when the mouse is hovered over them.</span></span> |
| <span data-ttu-id="9fda8-835">LeafNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-835">LeafNodeStyle</span></span> | <span data-ttu-id="9fda8-836">控制叶节点的样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-836">Controls the style of leaf nodes.</span></span> |
| <span data-ttu-id="9fda8-837">NodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-837">NodeStyle</span></span> | <span data-ttu-id="9fda8-838">控制所有节点的样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-838">Controls the style for all nodes.</span></span> <span data-ttu-id="9fda8-839">特定节点样式（如 LeafNodeStyle）覆盖此样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-839">Specific node styles (such as LeafNodeStyle) override this style.</span></span> |
| <span data-ttu-id="9fda8-840">ParentNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-840">ParentNodeStyle</span></span> | <span data-ttu-id="9fda8-841">控制所有父节点的样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-841">Controls the style for all parent nodes.</span></span> |
| <span data-ttu-id="9fda8-842">RootNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-842">RootNodeStyle</span></span> | <span data-ttu-id="9fda8-843">控制根节点的样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-843">Controls the style for the root node.</span></span> |
| <span data-ttu-id="9fda8-844">SelectedNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-844">SelectedNodeStyle</span></span> | <span data-ttu-id="9fda8-845">控制所选节点的样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-845">Controls the style for the selected node.</span></span> |

<span data-ttu-id="9fda8-846">其中每个属性都是只读的。</span><span class="sxs-lookup"><span data-stu-id="9fda8-846">Each of these properties is read-only.</span></span> <span data-ttu-id="9fda8-847">但是，它们每个都将返回一个**TreeNodeStyle**对象，该对象的属性可以使用*属性子属性*格式进行修改。</span><span class="sxs-lookup"><span data-stu-id="9fda8-847">However, they will each return a **TreeNodeStyle** object, and the properties of that object can be modified using the *property-subproperty* format.</span></span> <span data-ttu-id="9fda8-848">例如，若要设置**SelectedNodeStyle**的 "**前景色**" 属性，请使用以下语法：</span><span class="sxs-lookup"><span data-stu-id="9fda8-848">For example, to set the **ForeColor** property of the **SelectedNodeStyle**, you would use the following syntax:</span></span>

[!code-aspx[Main](data-bound-controls/samples/sample8.aspx)]

<span data-ttu-id="9fda8-849">请注意，上面的标记未关闭。</span><span class="sxs-lookup"><span data-stu-id="9fda8-849">Notice that the tag above is not closed.</span></span> <span data-ttu-id="9fda8-850">这是因为，使用此处所示的声明性语法时，还会在 HTML 代码中包含 Treeview 节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-850">That is because when using the declarative syntax shown here, you would include the TreeViews nodes in the HTML code as well.</span></span>

<span data-ttu-id="9fda8-851">还可以使用*属性子属性*格式在代码中指定样式属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-851">The style properties can also be specified in code using the *property.subproperty* format.</span></span> <span data-ttu-id="9fda8-852">例如，若要在代码中设置**RootNodeStyle**的 "**前景色**" 属性，请使用以下语法：</span><span class="sxs-lookup"><span data-stu-id="9fda8-852">For example, to set the **ForeColor** property of the **RootNodeStyle** in code, you would use the following syntax:</span></span>

[!code-csharp[Main](data-bound-controls/samples/sample9.cs)]

> [!NOTE]
> <span data-ttu-id="9fda8-853">有关不同样式属性的完整列表，请参阅 TreeNodeStyle 对象上的 MSDN 文档。</span><span class="sxs-lookup"><span data-stu-id="9fda8-853">For a comprehensive list of the different style properties, see the MSDN documentation on the TreeNodeStyle object.</span></span>

## <a name="the-sitemappath-control"></a><span data-ttu-id="9fda8-854">SiteMapPath 控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-854">The SiteMapPath Control</span></span>

<span data-ttu-id="9fda8-855">SiteMapPath 控件为 ASP.NET 开发人员提供了一个详细的痕迹导航控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-855">The SiteMapPath control provides a bread crumb navigation control for ASP.NET developers.</span></span> <span data-ttu-id="9fda8-856">与其他导航控件一样，可以轻松地将数据绑定到分层数据源，例如 SiteMapDataSource 或 XmlDataSource。</span><span class="sxs-lookup"><span data-stu-id="9fda8-856">Like the other navigation controls, it can be easily data bound to hierarchical data sources such as the SiteMapDataSource or XmlDataSource.</span></span>

<span data-ttu-id="9fda8-857">SiteMapPath 控件由 SiteMapNodeItem 对象组成。</span><span class="sxs-lookup"><span data-stu-id="9fda8-857">A SiteMapPath control is made up of SiteMapNodeItem objects.</span></span> <span data-ttu-id="9fda8-858">有三种类型的节点：根节点、父节点和当前节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-858">There are three types of nodes; the Root node, Parent nodes, and the Current node.</span></span> <span data-ttu-id="9fda8-859">根节点是层次结构顶部的节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-859">The root node is the node at the top of the hierarchical structure.</span></span> <span data-ttu-id="9fda8-860">当前节点表示当前页。</span><span class="sxs-lookup"><span data-stu-id="9fda8-860">The current node represents the current page.</span></span> <span data-ttu-id="9fda8-861">所有其他节点均为父节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-861">All other nodes are parent nodes.</span></span>

## <a name="controlling-the-operation-of-the-sitemappath-control"></a><span data-ttu-id="9fda8-862">控制 SiteMapPath 控件的操作</span><span class="sxs-lookup"><span data-stu-id="9fda8-862">Controlling the Operation of the SiteMapPath Control</span></span>

<span data-ttu-id="9fda8-863">控制 SiteMapPath 控件的操作的属性如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-863">The properties that control the operation of the SiteMapPath control are as follows:</span></span>

| <span data-ttu-id="9fda8-864">**Property**</span><span class="sxs-lookup"><span data-stu-id="9fda8-864">**Property**</span></span> | <span data-ttu-id="9fda8-865">**属性说明**</span><span class="sxs-lookup"><span data-stu-id="9fda8-865">**Description of Property**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-866">ParentLevelsDisplayed</span><span class="sxs-lookup"><span data-stu-id="9fda8-866">ParentLevelsDisplayed</span></span> | <span data-ttu-id="9fda8-867">控制显示多少父节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-867">Controls how many parent nodes are displayed.</span></span> <span data-ttu-id="9fda8-868">默认值为-1，它对显示的父节点数量没有限制。</span><span class="sxs-lookup"><span data-stu-id="9fda8-868">The default is -1 which imposes no restriction on the number of parent nodes displayed.</span></span> |
| <span data-ttu-id="9fda8-869">PathDirection</span><span class="sxs-lookup"><span data-stu-id="9fda8-869">PathDirection</span></span> | <span data-ttu-id="9fda8-870">控制 SiteMapPath 的方向。</span><span class="sxs-lookup"><span data-stu-id="9fda8-870">Controls the direction of the SiteMapPath.</span></span> <span data-ttu-id="9fda8-871">有效值为 RootToCurrent （默认值）和 CurrentToRoot。</span><span class="sxs-lookup"><span data-stu-id="9fda8-871">Valid values are RootToCurrent (default) and CurrentToRoot.</span></span> |
| <span data-ttu-id="9fda8-872">PathSeparator</span><span class="sxs-lookup"><span data-stu-id="9fda8-872">PathSeparator</span></span> | <span data-ttu-id="9fda8-873">控制在 SiteMapPath 控件中分隔节点的字符的字符串。</span><span class="sxs-lookup"><span data-stu-id="9fda8-873">A String that controls the character that separates nodes in a SiteMapPath control.</span></span> <span data-ttu-id="9fda8-874">默认值为：。</span><span class="sxs-lookup"><span data-stu-id="9fda8-874">The default value is :.</span></span> |
| <span data-ttu-id="9fda8-875">RenderCurrentNodeAsLink</span><span class="sxs-lookup"><span data-stu-id="9fda8-875">RenderCurrentNodeAsLink</span></span> | <span data-ttu-id="9fda8-876">一个布尔值，该值控制当前节点是否呈现为链接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-876">A Boolean value that controls whether or not the current node is rendered as a link.</span></span> <span data-ttu-id="9fda8-877">默认值为 False。</span><span class="sxs-lookup"><span data-stu-id="9fda8-877">The default is False.</span></span> |
| <span data-ttu-id="9fda8-878">SkipLinkText</span><span class="sxs-lookup"><span data-stu-id="9fda8-878">SkipLinkText</span></span> | <span data-ttu-id="9fda8-879">当屏幕阅读器查看页面时，可提供辅助功能。</span><span class="sxs-lookup"><span data-stu-id="9fda8-879">Assists with accessibility when the page is viewed by screen readers.</span></span> <span data-ttu-id="9fda8-880">此属性允许屏幕阅读器跳过 SiteMapPath 控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-880">This property allows screen readers to skip the SiteMapPath control.</span></span> <span data-ttu-id="9fda8-881">若要禁用此功能，请将属性设置为 String。</span><span class="sxs-lookup"><span data-stu-id="9fda8-881">To disable this feature, set the property to String.Empty.</span></span> |

## <a name="templated-sitemappath-controls"></a><span data-ttu-id="9fda8-882">模板化 SiteMapPath 控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-882">Templated SiteMapPath Controls</span></span>

<span data-ttu-id="9fda8-883">SiteMapControl 是一个模板化控件，因此，您可以定义用于显示控件的不同模板。</span><span class="sxs-lookup"><span data-stu-id="9fda8-883">The SiteMapControl is a templated control, and as such, you can define different templates for use in displaying the control.</span></span> <span data-ttu-id="9fda8-884">若要在 SiteMapPath 控件中编辑模板，请单击控件上的智能标记按钮，然后从菜单中选择 "编辑模板"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-884">To edit templates in a SiteMapPath control, click the Smart Tag button on the control and choose Edit Templates from the menu.</span></span> <span data-ttu-id="9fda8-885">此时将显示 "SiteMapTasks" 菜单，如下所示，你可以在不同的可用模板之间进行选择。</span><span class="sxs-lookup"><span data-stu-id="9fda8-885">This displays the SiteMapTasks menu as shown below where you can choose between the different templates available.</span></span>

![](data-bound-controls/_static/image2.jpg)

<span data-ttu-id="9fda8-886">**图2**</span><span class="sxs-lookup"><span data-stu-id="9fda8-886">**Figure 2**</span></span>

<span data-ttu-id="9fda8-887">**NodeTemplate**模板引用 SiteMapPath 中的任何节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-887">The **NodeTemplate** template refers to any node in the SiteMapPath.</span></span> <span data-ttu-id="9fda8-888">如果节点是根节点或当前节点，并且配置了**RootNodeTemplate**或**CurrentNodeTemplate** ，则将覆盖 NodeTemplate。</span><span class="sxs-lookup"><span data-stu-id="9fda8-888">If the node is a root node or the current node and a **RootNodeTemplate** or **CurrentNodeTemplate** is configured, the NodeTemplate is overridden.</span></span>

## <a name="sitemappath-events"></a><span data-ttu-id="9fda8-889">SiteMapPath 事件</span><span class="sxs-lookup"><span data-stu-id="9fda8-889">SiteMapPath Events</span></span>

<span data-ttu-id="9fda8-890">SiteMapPath 控件有两个不是从控件类派生的事件;**ItemCreated**事件和**ItemDataBound**事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-890">The SiteMapPath control has two events that are not derived from the Control class; the **ItemCreated** event and the **ItemDataBound** event.</span></span> <span data-ttu-id="9fda8-891">创建 SiteMapPath 项时，将引发 ItemCreated 事件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-891">The ItemCreated event is raised when a SiteMapPath item is created.</span></span> <span data-ttu-id="9fda8-892">在 SiteMapPath 节点的数据绑定过程中调用 DataBind 方法时，将引发 ItemDataBound。</span><span class="sxs-lookup"><span data-stu-id="9fda8-892">ItemDataBound is raised when the DataBind method is called during the data binding of a SiteMapPath node.</span></span> <span data-ttu-id="9fda8-893">**SiteMapNodeItemEventArgs**对象通过 Item 属性提供对特定 SiteMapNodeItem 的访问。</span><span class="sxs-lookup"><span data-stu-id="9fda8-893">A **SiteMapNodeItemEventArgs** object provides access to the specific SiteMapNodeItem via the Item property.</span></span>

## <a name="controlling-appearance-with-styles"></a><span data-ttu-id="9fda8-894">用样式控制外观</span><span class="sxs-lookup"><span data-stu-id="9fda8-894">Controlling Appearance with Styles</span></span>

<span data-ttu-id="9fda8-895">以下样式可用于 SiteMapPath 控件的格式设置。</span><span class="sxs-lookup"><span data-stu-id="9fda8-895">The following styles are available for formatting of a SiteMapPath control.</span></span>

| <span data-ttu-id="9fda8-896">**属性名称**</span><span class="sxs-lookup"><span data-stu-id="9fda8-896">**Property Name**</span></span> | <span data-ttu-id="9fda8-897">**控件**</span><span class="sxs-lookup"><span data-stu-id="9fda8-897">**Controls**</span></span> |
| --- | --- |
| <span data-ttu-id="9fda8-898">CurrentNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-898">CurrentNodeStyle</span></span> | <span data-ttu-id="9fda8-899">控制当前节点的文本样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-899">Controls the style of the text for the current node.</span></span> |
| <span data-ttu-id="9fda8-900">RootNodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-900">RootNodeStyle</span></span> | <span data-ttu-id="9fda8-901">控制根节点的文本样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-901">Controls the style of the text for the root node.</span></span> |
| <span data-ttu-id="9fda8-902">NodeStyle</span><span class="sxs-lookup"><span data-stu-id="9fda8-902">NodeStyle</span></span> | <span data-ttu-id="9fda8-903">控制所有节点的文本样式，假设 CurrentNodeStyle 或 RootNodeStyle 不适用。</span><span class="sxs-lookup"><span data-stu-id="9fda8-903">Controls the style of the text for all nodes assuming that a CurrentNodeStyle or RootNodeStyle doesnt apply.</span></span> |

<span data-ttu-id="9fda8-904">NodeStyle 属性由 CurrentNodeStyle 或 RootNodeStyle 重写。</span><span class="sxs-lookup"><span data-stu-id="9fda8-904">The NodeStyle property is overridden by either the CurrentNodeStyle or the RootNodeStyle.</span></span> <span data-ttu-id="9fda8-905">其中每个属性都是只读的，并返回**Style**对象。</span><span class="sxs-lookup"><span data-stu-id="9fda8-905">Each of these properties is read-only and returns a **Style** object.</span></span> <span data-ttu-id="9fda8-906">若要使用这些属性之一影响节点的外观，您需要设置返回的样式对象的属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-906">To affect the appearance of a node using one of these properties, you will need to set the properties of the Style object that is returned.</span></span> <span data-ttu-id="9fda8-907">例如，下面的代码更改当前节点的前景色属性。</span><span class="sxs-lookup"><span data-stu-id="9fda8-907">For example, the code below changes the forecolor property of the current node.</span></span>

[!code-aspx[Main](data-bound-controls/samples/sample10.aspx)]

<span data-ttu-id="9fda8-908">还可以通过编程方式应用属性，如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-908">The property can also be applied programmatically as follows:</span></span>

[!code-csharp[Main](data-bound-controls/samples/sample11.cs)]

> [!NOTE]
> <span data-ttu-id="9fda8-909">如果应用了模板，则不会应用样式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-909">If a template is applied, the style will not be applied.</span></span>

## <a name="lab-1-configuring-an-aspnet-menu-control"></a><span data-ttu-id="9fda8-910">实验室1：配置 ASP.NET 菜单控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-910">Lab 1: Configuring an ASP.NET Menu Control</span></span>

1. <span data-ttu-id="9fda8-911">创建新网站。</span><span class="sxs-lookup"><span data-stu-id="9fda8-911">Create a new Web site.</span></span>
2. <span data-ttu-id="9fda8-912">通过从文件模板列表中选择 "文件"、"新建"、"文件" 和 "选择网站地图" 来添加站点映射文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-912">Add a Site Map file by selecting File, New, File and choosing Site Map from the list of file templates.</span></span>
3. <span data-ttu-id="9fda8-913">打开站点地图（默认情况下为 web.sitemap），并对其进行修改，使其类似于下面的列表。</span><span class="sxs-lookup"><span data-stu-id="9fda8-913">Open the site map (Web.sitemap by default) and modify it so that it looks like the listing below.</span></span> <span data-ttu-id="9fda8-914">您要在站点地图文件中链接的页面并不真正存在，但这不是此练习的问题。</span><span class="sxs-lookup"><span data-stu-id="9fda8-914">The pages to which you are linking in the site map file do not really exist, but that will not be an issue for this exercise.</span></span>

    [!code-xml[Main](data-bound-controls/samples/sample12.xml)]
4. <span data-ttu-id="9fda8-915">在设计视图中打开默认 Web 窗体。</span><span class="sxs-lookup"><span data-stu-id="9fda8-915">Open the default Web form in Design view.</span></span>
5. <span data-ttu-id="9fda8-916">从 "工具箱" 的 "导航" 部分，向页面添加一个新的菜单控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-916">From the Navigation section of the Toolbox, add a new Menu control to the page.</span></span>
6. <span data-ttu-id="9fda8-917">在 "工具箱" 的 "数据" 部分中，添加一个新的 SiteMapDataSource。</span><span class="sxs-lookup"><span data-stu-id="9fda8-917">From the Data section of the Toolbox, add a new SiteMapDataSource.</span></span> <span data-ttu-id="9fda8-918">SiteMapDataSource 将自动使用站点中的 Web.config 文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-918">The SiteMapDataSource will automatically use the Web.sitemap file in your site.</span></span> <span data-ttu-id="9fda8-919">（Web.sitemap 文件*必须*位于站点的根文件夹中。）</span><span class="sxs-lookup"><span data-stu-id="9fda8-919">(The Web.sitemap file *must* be in the root folder of the site.)</span></span>
7. <span data-ttu-id="9fda8-920">单击 "菜单" 控件，然后单击 "智能标记" 按钮以显示 "菜单任务" 对话框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-920">Click the Menu control and then click the Smart Tag button to display the Menu Tasks dialog.</span></span>
8. <span data-ttu-id="9fda8-921">在 "选择数据源" 下拉列表中，选择 "SiteMapDataSource1"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-921">In the Choose Data Source dropdown, select SiteMapDataSource1.</span></span>
9. <span data-ttu-id="9fda8-922">单击 "自动套用格式" 链接，然后为菜单选择一种格式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-922">Click the AutoFormat link and choose a format for the Menu.</span></span>
10. <span data-ttu-id="9fda8-923">在 "属性" 窗格中，将 " **StaticDisplayLevels** " 属性设置为2。</span><span class="sxs-lookup"><span data-stu-id="9fda8-923">In the Properties pane, set the **StaticDisplayLevels** property to 2.</span></span> <span data-ttu-id="9fda8-924">菜单控件现在应显示设计器中的 "主页"、"产品" 和 "服务" 节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-924">The Menu control should now display the Home, Products, and Services node in the Designer.</span></span>
11. <span data-ttu-id="9fda8-925">浏览浏览器中的页面以使用菜单。</span><span class="sxs-lookup"><span data-stu-id="9fda8-925">Browse the page in your browser to use the menu.</span></span> <span data-ttu-id="9fda8-926">（由于你已添加到站点映射的页面实际上并不存在，因此当你尝试浏览到它们时，你会看到一个错误。）</span><span class="sxs-lookup"><span data-stu-id="9fda8-926">(Because the pages you ve added to the site map don't actually exist, you will see an error when you try and browse to them.)</span></span>

<span data-ttu-id="9fda8-927">尝试更改 StaticDisplayLevels 和 MaximumDynamicDisplayLevels 属性，并查看其如何影响菜单的呈现方式。</span><span class="sxs-lookup"><span data-stu-id="9fda8-927">Experiment with changing the StaticDisplayLevels and the MaximumDynamicDisplayLevels properties and see how they affect how the menu is rendered.</span></span>

## <a name="lab-2-dynamically-binding-a-treeview-control"></a><span data-ttu-id="9fda8-928">实验室2：动态绑定 TreeView 控件</span><span class="sxs-lookup"><span data-stu-id="9fda8-928">Lab 2: Dynamically Binding a TreeView Control</span></span>

<span data-ttu-id="9fda8-929">本练习假设您 SQL Server 本地运行，并且 Northwind 数据库存在于 SQL Server 实例上。</span><span class="sxs-lookup"><span data-stu-id="9fda8-929">This exercise assumes that you have SQL Server running locally and that the Northwind database is present on the SQL Server instance.</span></span> <span data-ttu-id="9fda8-930">如果未满足这些条件，请在示例中更改连接字符串。</span><span class="sxs-lookup"><span data-stu-id="9fda8-930">If these conditions are not met, please change the connection string in the sample.</span></span> <span data-ttu-id="9fda8-931">请注意，你可能还需要指定 SQL Server 身份验证而不是可信连接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-931">Note that you may also need to specify SQL Server authentication instead of a trusted connection.</span></span>

1. <span data-ttu-id="9fda8-932">创建新网站。</span><span class="sxs-lookup"><span data-stu-id="9fda8-932">Create a new Web site.</span></span>
2. <span data-ttu-id="9fda8-933">切换到默认 .aspx 的代码视图，并将所有代码替换为以下所列的代码。</span><span class="sxs-lookup"><span data-stu-id="9fda8-933">Switch to Code view for Default.aspx and replace all code with the code listed below.</span></span> 

    [!code-aspx[Main](data-bound-controls/samples/sample13.aspx)]
3. <span data-ttu-id="9fda8-934">将该页另存为 treeview .aspx。</span><span class="sxs-lookup"><span data-stu-id="9fda8-934">Save the page as treeview.aspx.</span></span>
4. <span data-ttu-id="9fda8-935">浏览页面。</span><span class="sxs-lookup"><span data-stu-id="9fda8-935">Browse the page.</span></span>
5. <span data-ttu-id="9fda8-936">第一次显示页面时，请在浏览器中查看页面的源。</span><span class="sxs-lookup"><span data-stu-id="9fda8-936">When the page is first displayed, view the source of the page in your browser.</span></span> <span data-ttu-id="9fda8-937">请注意，仅向客户端发送可见节点。</span><span class="sxs-lookup"><span data-stu-id="9fda8-937">Note that only the visible nodes were sent to the client.</span></span>
6. <span data-ttu-id="9fda8-938">单击 "任何" 节点旁边的加号。</span><span class="sxs-lookup"><span data-stu-id="9fda8-938">Click the plus sign next to any node.</span></span>
7. <span data-ttu-id="9fda8-939">再次在页面上查看源。</span><span class="sxs-lookup"><span data-stu-id="9fda8-939">View source on the page again.</span></span> <span data-ttu-id="9fda8-940">请注意，新显示的节点现在存在。</span><span class="sxs-lookup"><span data-stu-id="9fda8-940">Notice that the newly displayed nodes are now present.</span></span>

## <a name="lab-3-details-view-and-editing-data-using-a-gridview-and-detailsview"></a><span data-ttu-id="9fda8-941">实验室3：使用 GridView 和 DetailsView 查看和编辑数据的详细信息</span><span class="sxs-lookup"><span data-stu-id="9fda8-941">Lab 3: Details View and Editing Data Using a GridView and DetailsView</span></span>

1. <span data-ttu-id="9fda8-942">创建新网站。</span><span class="sxs-lookup"><span data-stu-id="9fda8-942">Create a new Web site.</span></span>
2. <span data-ttu-id="9fda8-943">向网站添加一个新的 web.config。</span><span class="sxs-lookup"><span data-stu-id="9fda8-943">Add a new web.config to the Web site.</span></span>
3. <span data-ttu-id="9fda8-944">向 web.config 文件添加一个连接字符串，如下所示：</span><span class="sxs-lookup"><span data-stu-id="9fda8-944">Add a connection string to the web.config file as shown below:</span></span> 

    [!code-xml[Main](data-bound-controls/samples/sample14.xml)]

    > [!NOTE]
    > <span data-ttu-id="9fda8-945">您可能需要根据您的环境更改连接字符串。</span><span class="sxs-lookup"><span data-stu-id="9fda8-945">You may need to change the connection string based upon your environment.</span></span>
4. <span data-ttu-id="9fda8-946">保存并关闭 web.config 文件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-946">Save and close the web.config file.</span></span>
5. <span data-ttu-id="9fda8-947">打开 default.aspx 并添加一个新的 SqlDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-947">Open Default.aspx and add a new SqlDataSource control.</span></span>
6. <span data-ttu-id="9fda8-948">将 SqlDataSource 控件的 ID 更改为**Products**。</span><span class="sxs-lookup"><span data-stu-id="9fda8-948">Change the ID of the SqlDataSource control to **Products**.</span></span>
7. <span data-ttu-id="9fda8-949">在 " **SqlDataSource 任务**" 菜单中，单击 "**配置数据源**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-949">In the **SqlDataSource Tasks** menu, click **Configure Data Source**.</span></span>
8. <span data-ttu-id="9fda8-950">在 "连接" 下拉列表中选择**Northwind** ，并单击 "下一步"</span><span class="sxs-lookup"><span data-stu-id="9fda8-950">Select **Northwind** in the connection dropdown and click Next.</span></span>
9. <span data-ttu-id="9fda8-951">从 "**名称**" 下拉列表中选择 "**产品**"，然后选中 " **ProductID**、 **ProductName**、**单价**和**库存**" 复选框，如下所示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-951">Select **Products** from the **Name** dropdown and check the **ProductID**, **ProductName**, **UnitPrice**, and **UnitsInStock** checkboxes as shown below.</span></span> 

![](data-bound-controls/_static/image3.jpg)

    **Figure 3**
10. <span data-ttu-id="9fda8-952">单击 **“下一步”** 。</span><span class="sxs-lookup"><span data-stu-id="9fda8-952">Click **Next**.</span></span>
11. <span data-ttu-id="9fda8-953">单击“完成”。</span><span class="sxs-lookup"><span data-stu-id="9fda8-953">Click **Finish**.</span></span>
12. <span data-ttu-id="9fda8-954">切换到 "源" 视图并检查生成的代码。</span><span class="sxs-lookup"><span data-stu-id="9fda8-954">Switch to Source view and examine the code that was generated.</span></span> <span data-ttu-id="9fda8-955">请注意，已添加到 SqlDataSource 控件中的**SelectCommand**、 **DeleteCommand**、 **InsertCommand**和**UpdateCommand** 。</span><span class="sxs-lookup"><span data-stu-id="9fda8-955">Notice the **SelectCommand**, **DeleteCommand**, **InsertCommand**, and **UpdateCommand** that were added to the SqlDataSource control.</span></span> <span data-ttu-id="9fda8-956">另请注意已添加的参数。</span><span class="sxs-lookup"><span data-stu-id="9fda8-956">Also notice the parameters that were added.</span></span>
13. <span data-ttu-id="9fda8-957">切换到设计视图并向页面添加一个新的 GridView 控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-957">Switch to Design view and add a new GridView control to the page.</span></span>
14. <span data-ttu-id="9fda8-958">从 "**选择数据源**" 下拉列表中选择 "**产品**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-958">Select **Products** from the **Choose Data Source** dropdown.</span></span>
15. <span data-ttu-id="9fda8-959">选中 "**启用分页**并**启用选项**"，如下所示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-959">Check **Enable Paging** and **Enable Selection** as shown below.</span></span> 

![](data-bound-controls/_static/image4.jpg)

    **Figure 4**
16. <span data-ttu-id="9fda8-960">单击 "**编辑列**" 链接，并确保选中 "**自动生成字段**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-960">Click the **Edit Columns** link and make sure that **Auto-generate fields** is checked.</span></span>
17. <span data-ttu-id="9fda8-961">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="9fda8-961">Click **OK**.</span></span>
18. <span data-ttu-id="9fda8-962">选择 GridView 控件后，在 "属性" 窗格中单击 " **DataKeyNames** " 属性旁边的按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-962">With the GridView control selected, click the button next to the **DataKeyNames** property in the Properties pane.</span></span>
19. <span data-ttu-id="9fda8-963">从 "**可用数据字段**" 列表中选择 " **ProductID** "，然后单击 " **&gt;** " 按钮进行添加。</span><span class="sxs-lookup"><span data-stu-id="9fda8-963">Select **ProductID** from the **Available data fields** list and click the **&gt;** button to add it.</span></span>
20. <span data-ttu-id="9fda8-964">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="9fda8-964">Click OK.</span></span>
21. <span data-ttu-id="9fda8-965">向页面添加一个新的 SqlDataSource 控件。</span><span class="sxs-lookup"><span data-stu-id="9fda8-965">Add a new SqlDataSource control to the page.</span></span>
22. <span data-ttu-id="9fda8-966">将 SqlDataSource 控件的 ID 更改为 "**详细信息**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-966">Change the ID of the SqlDataSource control to **Details**.</span></span>
23. <span data-ttu-id="9fda8-967">从 "SqlDataSource 任务" 菜单中，选择 "**配置数据源**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-967">From the SqlDataSource Tasks menu, choose **Configure Data Source**.</span></span>
24. <span data-ttu-id="9fda8-968">从下拉列表中选择 " **Northwind** "，然后单击 "**下一步**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-968">Choose **Northwind** from the dropdown and click **Next**.</span></span>
25. <span data-ttu-id="9fda8-969">从 "<strong>名称</strong>" 下拉列表中选择 "<strong>产品</strong>"，并选中 "<strong>列</strong>" 列表框中的 "<strong>\</strong ></span><span class="sxs-lookup"><span data-stu-id="9fda8-969">Select <strong>Products</strong> from the <strong>Name</strong> dropdown and check the <strong>\</strong>\* checkbox in the <strong>Columns</strong> listbox.</span></span>
26. <span data-ttu-id="9fda8-970">单击 "**位置**" 按钮。</span><span class="sxs-lookup"><span data-stu-id="9fda8-970">Click the **WHERE** button.</span></span>
27. <span data-ttu-id="9fda8-971">从 "**列**" 下拉列表中选择 " **ProductID** "。</span><span class="sxs-lookup"><span data-stu-id="9fda8-971">Select **ProductID** from the **Column** dropdown.</span></span>
28. <span data-ttu-id="9fda8-972">在 "运算符" 下拉列表中选择 **=** 。</span><span class="sxs-lookup"><span data-stu-id="9fda8-972">Select **=** in the Operator dropdown.</span></span>
29. <span data-ttu-id="9fda8-973">从 "**源**" 下拉列表中选择 "**控件**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-973">Select **Control** from the **Source** dropdown.</span></span>
30. <span data-ttu-id="9fda8-974">从 "**控件 ID** " 下拉列表中选择 " **GridView1** "。</span><span class="sxs-lookup"><span data-stu-id="9fda8-974">Select **GridView1** from the **Control ID** dropdown.</span></span>
31. <span data-ttu-id="9fda8-975">单击 "**添加**" 按钮添加 WHERE 子句。</span><span class="sxs-lookup"><span data-stu-id="9fda8-975">Click the **Add** button to add the WHERE clause.</span></span>
32. <span data-ttu-id="9fda8-976">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="9fda8-976">Click **OK**.</span></span>
33. <span data-ttu-id="9fda8-977">单击 "**高级**" 按钮，然后选中 "**生成 INSERT、UPDATE 和 DELETE 语句**" 复选框。</span><span class="sxs-lookup"><span data-stu-id="9fda8-977">Click the **Advanced** button and check the **Generate INSERT, UPDATE, and DELETE statements** checkbox.</span></span>
34. <span data-ttu-id="9fda8-978">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="9fda8-978">Click **OK**.</span></span>
35. <span data-ttu-id="9fda8-979">单击 "**下一步**" 并单击 "**完成**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-979">Click **Next** and click **Finish**.</span></span>
36. <span data-ttu-id="9fda8-980">将 DetailsView 控件添加到页面。</span><span class="sxs-lookup"><span data-stu-id="9fda8-980">Add a DetailsView control to the page.</span></span>
37. <span data-ttu-id="9fda8-981">在 "**选择数据源**" 下拉列表中，选择 "**详细信息**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-981">In the **Choose Data Source** dropdown, choose **Details**.</span></span>
38. <span data-ttu-id="9fda8-982">选中 "**启用编辑**" 复选框，如下所示。</span><span class="sxs-lookup"><span data-stu-id="9fda8-982">Check the **Enable Editing** checkbox as shown below.</span></span> 

![](data-bound-controls/_static/image1.gif)

    **Figure 5**
39. <span data-ttu-id="9fda8-983">保存该页并浏览 default.aspx。</span><span class="sxs-lookup"><span data-stu-id="9fda8-983">Save the page and browse Default.aspx.</span></span>
40. <span data-ttu-id="9fda8-984">单击 "不同记录" 旁边的 "**选择**" 链接，以查看自动更新的更新。</span><span class="sxs-lookup"><span data-stu-id="9fda8-984">Click the **Select** link next to different records to see the DetailsView update automatically.</span></span>
41. <span data-ttu-id="9fda8-985">单击 "DetailsView" 控件中的 "**编辑**" 链接。</span><span class="sxs-lookup"><span data-stu-id="9fda8-985">Click the **Edit** link in the DetailsView control.</span></span>
42. <span data-ttu-id="9fda8-986">对记录进行更改，然后单击 "**更新**"。</span><span class="sxs-lookup"><span data-stu-id="9fda8-986">Make a change to the record and click **Update**.</span></span>
