---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-your-site-using-visual-studio-cs
title: 部署你的网站使用 Visual Studio (C#) |Microsoft Docs
author: rick-anderson
description: Visual Studio 包含用于部署网站的工具。 在本教程中了解有关这些工具的详细信息。
ms.author: riande
ms.date: 04/01/2009
ms.assetid: cde4ee53-a5d0-4937-a54b-67877e8266c3
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-your-site-using-visual-studio-cs
msc.type: authoredcontent
ms.openlocfilehash: f669e86ceeb53469f99fa3ea4619b4666c4019a0
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2019
ms.locfileid: "65133464"
---
# <a name="deploying-your-site-using-visual-studio-c"></a><span data-ttu-id="e1fa5-104">使用 Visual Studio 部署站点 (C#)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-104">Deploying Your Site Using Visual Studio (C#)</span></span>

<span data-ttu-id="e1fa5-105">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e1fa5-106">[下载代码](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_04_CS.zip)或[下载 PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial04_DeployingViaVS_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-106">[Download Code](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_04_CS.zip) or [Download PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial04_DeployingViaVS_cs.pdf)</span></span>

> <span data-ttu-id="e1fa5-107">Visual Studio 包含用于部署网站的工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-107">Visual Studio includes tools for deploying a website.</span></span> <span data-ttu-id="e1fa5-108">在本教程中了解有关这些工具的详细信息。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-108">Learn more about these tools in this tutorial.</span></span>

## <a name="introduction"></a><span data-ttu-id="e1fa5-109">介绍</span><span class="sxs-lookup"><span data-stu-id="e1fa5-109">Introduction</span></span>

<span data-ttu-id="e1fa5-110">前面的教程介绍了如何部署到 web 宿主提供程序的简单 ASP.NET web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-110">The preceding tutorial looked at how to deploy a simple ASP.NET web application to a web host provider.</span></span> <span data-ttu-id="e1fa5-111">具体而言，本教程说明了如何使用 FileZilla 等 FTP 客户端可以将所需的文件从开发环境转移到生产环境。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-111">Specifically, the tutorial showed how to use an FTP client like FileZilla to transfer the necessary files from the development environment to the production environment.</span></span> <span data-ttu-id="e1fa5-112">Visual Studio 还提供了内置工具可简化部署到 web 宿主提供程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-112">Visual Studio also offers built-in tools to facilitate deployment to a web host provider.</span></span> <span data-ttu-id="e1fa5-113">本教程探讨这些工具的两个: 复制网站工具，其中您可以将文件移到和从远程 web 服务器使用 FTP 或服务器管理员联系。和发布工具，将整个网站复制到指定位置。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-113">This tutorial examines two of these tools: the Copy Web Site tool, where you can move files to and from a remote web server using FTP or FrontPage Server Extensions; and the Publish tool, which copies the entire website to a specified location.</span></span>

> [!NOTE]
> <span data-ttu-id="e1fa5-114">Visual Studio 提供其他与部署相关的工具包括[Web 安装项目](https://msdn.microsoft.com/library/wx3b589t.aspx)并[Web 部署项目](https://www.microsoft.com/downloads/details.aspx?FamilyId=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&amp;displaylang=en)外接程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-114">Other deployment-related tools offered by Visual Studio include [Web Setup Projects](https://msdn.microsoft.com/library/wx3b589t.aspx) and [Web Deployment Projects](https://www.microsoft.com/downloads/details.aspx?FamilyId=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&amp;displaylang=en) Add-In.</span></span> <span data-ttu-id="e1fa5-115">Web 安装项目包网站的内容和配置信息导出成一个 MSI 文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-115">Web Setup Projects package a website's contents and configuration information into a single MSI file.</span></span> <span data-ttu-id="e1fa5-116">此选项是最有用的 intranet 内部署的网站或公司的销售客户自己的 web 服务器安装的预打包的 web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-116">This option is most useful for websites that are deployed within an intranet or for companies that sell a pre-packaged web application that customers install on their own web servers.</span></span> <span data-ttu-id="e1fa5-117">Web 部署项目外接程序是 Visual Studio 外接程序可帮助之间的指定配置差异生成为开发环境和生产环境。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-117">The Web Deployment Projects Add-In is a Visual Studio Add-In that facilitates specifying configuration differences between builds for development environments and production environments.</span></span> <span data-ttu-id="e1fa5-118">本系列教程; 不讨论 web 安装项目Web 部署项目进行了总结[*常见配置差异之间开发和生产*](common-configuration-differences-between-development-and-production-cs.md)教程。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-118">Web Setup Projects are not discussed in this tutorial series; Web Deployment Projects are summarized in the [*Common Configuration Differences Between Development and Production*](common-configuration-differences-between-development-and-production-cs.md) tutorial.</span></span>

## <a name="deploying-your-site-using-the-copy-web-site-tool"></a><span data-ttu-id="e1fa5-119">使用复制网站工具部署站点</span><span class="sxs-lookup"><span data-stu-id="e1fa5-119">Deploying Your Site Using the Copy Web Site Tool</span></span>

<span data-ttu-id="e1fa5-120">Visual Studio 的复制网站工具是在功能上类似于独立 FTP 客户端。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-120">Visual Studio's Copy Web Site tool is similar in functionality to a stand-alone FTP client.</span></span> <span data-ttu-id="e1fa5-121">简单地说，复制网站工具，可连接到远程网站通过 FTP 或 FrontPage 服务器扩展。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-121">In a nutshell, the Copy Web Site tool allows you to connect to a remote web site through FTP or FrontPage Server Extensions.</span></span> <span data-ttu-id="e1fa5-122">类似于 FileZilla 的用户界面，复制网站用户界面包含两个窗格： 左窗格中列出的本地文件，而右侧窗格列出了这些文件在目标服务器上的。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-122">Similar to FileZilla's user interface, the Copy Web Site user interface consists of two panes: the left pane lists the local files while the right pane lists those files on the destination server.</span></span>

> [!NOTE]
> <span data-ttu-id="e1fa5-123">复制网站工具才可用于网站项目。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-123">The Copy Web Site tool is only available for Web Site Projects.</span></span> <span data-ttu-id="e1fa5-124">使用 Web 应用程序项目时，visual Studio 确实提供了此工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-124">Visual Studio does offer this tool when you are working with a Web Application Project.</span></span>

<span data-ttu-id="e1fa5-125">让我们看一看使用复制网站工具发布到生产环境书评应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-125">Let's take a look at using the Copy Web Site tool to publish the Book Review application to production.</span></span> <span data-ttu-id="e1fa5-126">因为复制网站工具仅适用于使用网站项目模型的项目，我们只能检查与 BookReviewsWSP 项目配合使用此工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-126">Because the Copy Web Site tool only works with projects that use the Web Site Project model we can only examine using this tool with the BookReviewsWSP project.</span></span> <span data-ttu-id="e1fa5-127">打开该项目。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-127">Open that project.</span></span>

<span data-ttu-id="e1fa5-128">通过单击解决方案资源管理器 （图 1 中有此图标圆圈）; 复制网站图标启动复制网站工具项目或者，您可以从网站菜单上选择复制网站选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-128">Launch the Copy Web Site tool project by clicking the Copy Web Site icon in the Solution Explorer (this icon is circled in Figure 1); alternatively, you can select the Copy Web Site option from the Website menu.</span></span> <span data-ttu-id="e1fa5-129">这两种方法启动图 1; 中所示的复制网站用户界面图 1 中的，左窗格中仅被填充，因为我们尚未连接到远程服务器。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-129">Either approach launches the Copy Web Site user interface shown in Figure 1; only the left pane in Figure 1 is populated because we have yet to connect to a remote server.</span></span>

<span data-ttu-id="e1fa5-130">[![复制网站工具的用户界面是划分到两个窗格](deploying-your-site-using-visual-studio-cs/_static/image2.png)](deploying-your-site-using-visual-studio-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-130">[![The Copy Web Site Tool's User Interface is Divided Into Two Panes](deploying-your-site-using-visual-studio-cs/_static/image2.png)](deploying-your-site-using-visual-studio-cs/_static/image1.png)</span></span>

<span data-ttu-id="e1fa5-131">**图 1**:复制网站工具的用户界面是划分到两个窗格 ([单击此项可查看原尺寸图像](deploying-your-site-using-visual-studio-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-131">**Figure 1**: The Copy Web Site Tool's User Interface is Divided Into Two Panes ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image3.png))</span></span>

<span data-ttu-id="e1fa5-132">若要部署我们的站点，我们需要先将连接到 web 宿主提供程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-132">In order to deploy our site we need to first connect to the web host provider.</span></span> <span data-ttu-id="e1fa5-133">单击顶部的复制网站用户界面连接按钮。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-133">Click the Connect button at the top of the Copy Web Site user interface.</span></span> <span data-ttu-id="e1fa5-134">这将显示在图 2 所示的打开网站对话框。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-134">This displays the Open Web Site dialog box shown in Figure 2.</span></span>

<span data-ttu-id="e1fa5-135">可以通过从左侧选择四个选项之一来连接到目标网站：</span><span class="sxs-lookup"><span data-stu-id="e1fa5-135">You can connect to the destination website by selecting one of the four options from the left:</span></span>

- <span data-ttu-id="e1fa5-136">**文件系统**-选择此选项可从您的计算机将您的网站部署到可访问的文件夹或网络共享。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-136">**File System** - select this to deploy your site to a folder or network share accessible from your computer.</span></span>
- <span data-ttu-id="e1fa5-137">**本地 IIS** -使用此选项可将站点部署到您的计算机上安装的 IIS web 服务器。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-137">**Local IIS** - use this option to deploy the site to the IIS web server installed on your computer.</span></span>
- <span data-ttu-id="e1fa5-138">**FTP 站点**-连接到远程网站上使用 FTP。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-138">**FTP Site** - connect to a remote web site using FTP.</span></span>
- <span data-ttu-id="e1fa5-139">**远程站点**-连接到远程网站使用 FrontPage 服务器扩展。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-139">**Remote Site** - connect to a remote website using FrontPage Server Extensions.</span></span>

<span data-ttu-id="e1fa5-140">大多数 web 宿主提供程序支持 FTP，但更少提供 FrontPage 服务器扩展插件的支持。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-140">Most web host providers support FTP, but fewer offer FrontPage Server Extension support.</span></span> <span data-ttu-id="e1fa5-141">为此，我已选择了 FTP 站点的选项，然后输入连接信息，如图 2 中所示。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-141">For that reason, I've selected the FTP Site option and then entered the connection information as shown in Figure 2.</span></span>

<span data-ttu-id="e1fa5-142">[![指定目标网站](deploying-your-site-using-visual-studio-cs/_static/image5.png)](deploying-your-site-using-visual-studio-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-142">[![Specify the Destination Website](deploying-your-site-using-visual-studio-cs/_static/image5.png)](deploying-your-site-using-visual-studio-cs/_static/image4.png)</span></span>

<span data-ttu-id="e1fa5-143">**图 2**:指定目标网站 ([单击此项可查看原尺寸图像](deploying-your-site-using-visual-studio-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-143">**Figure 2**: Specify the Destination Website ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image6.png))</span></span>

<span data-ttu-id="e1fa5-144">连接后，复制网站工具加载在右窗格中的远程站点的文件，并指示每个文件的状态：新的、 已删除、 已更改，或不变。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-144">After you connect, the Copy Web Site tool loads the files at the remote site in the right pane and indicates the status of each file: New, Deleted, Changed, or Unchanged.</span></span> <span data-ttu-id="e1fa5-145">可以将文件从本地站点复制到远程站点或进行相反的转换。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-145">You can copy a file from the local site to the remote site, or vice-a-versa.</span></span>

<span data-ttu-id="e1fa5-146">让我们添加一个新页到 BookReviewsWSP 项目，然后将其部署，以便我们可以看到操作中的复制网站工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-146">Let's add a new page to the BookReviewsWSP project and then deploy it so that we can see the Copy Web Site tool in action.</span></span> <span data-ttu-id="e1fa5-147">Visual Studio 中名为的根目录中创建一个新的 ASP.NET 页面`Privacy.aspx`。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-147">Create a new ASP.NET page in Visual Studio in the root directory named `Privacy.aspx`.</span></span> <span data-ttu-id="e1fa5-148">已使用的母版页的页`Site.master`并将站点的隐私策略添加到此页。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-148">Have the page use the master page `Site.master` and add your site's privacy policy to this page.</span></span> <span data-ttu-id="e1fa5-149">创建此页后，图 3 显示了 Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-149">Figure 3 shows Visual Studio after this page has been created.</span></span>

<span data-ttu-id="e1fa5-150">[![添加新的页名为&lt;代码&gt;Privacy.aspx&lt;o&gt;到网站的根文件夹](deploying-your-site-using-visual-studio-cs/_static/image8.png)](deploying-your-site-using-visual-studio-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-150">[![Add a New Page Named &lt;code&gt;Privacy.aspx&lt;/code&gt; to the Website's Root Folder](deploying-your-site-using-visual-studio-cs/_static/image8.png)](deploying-your-site-using-visual-studio-cs/_static/image7.png)</span></span>

<span data-ttu-id="e1fa5-151">**图 3**:添加新的页名为`Privacy.aspx`网站的根文件夹 ([单击以查看实际尺寸的图像](deploying-your-site-using-visual-studio-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-151">**Figure 3**: Add a New Page Named `Privacy.aspx` to the Website's Root Folder ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image9.png))</span></span>

<span data-ttu-id="e1fa5-152">接下来，返回到复制网站用户界面。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-152">Next, return to the Copy Web Site user interface.</span></span> <span data-ttu-id="e1fa5-153">如图 4 所示，左窗格中现在包括新的文件-`Policy.aspx`和`Policy.aspx.cs`。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-153">As Figure 4 shows, the left pane now includes the new files - `Policy.aspx` and `Policy.aspx.cs`.</span></span> <span data-ttu-id="e1fa5-154">更重要的是，这些文件用箭头图标和状态的新，指示它们存在本地站点上但不是在远程站点进行标记。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-154">What's more, these files are marked with an arrow icon and a Status of New, indicating that they exist on the local site but not on the remote site.</span></span>

<span data-ttu-id="e1fa5-155">[![复制网站工具包括新建&lt;代码&gt;Privacy.aspx&lt;o&gt;其左侧窗格中的页面](deploying-your-site-using-visual-studio-cs/_static/image11.png)](deploying-your-site-using-visual-studio-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-155">[![The Copy Web Site Tool Includes the New &lt;code&gt;Privacy.aspx&lt;/code&gt; Page in its Left Pane](deploying-your-site-using-visual-studio-cs/_static/image11.png)](deploying-your-site-using-visual-studio-cs/_static/image10.png)</span></span>

<span data-ttu-id="e1fa5-156">**图 4**:复制网站工具包括新建`Privacy.aspx`在其左侧窗格中的页 ([单击以查看实际尺寸的图像](deploying-your-site-using-visual-studio-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-156">**Figure 4**: The Copy Web Site Tool Includes the New `Privacy.aspx` Page in its Left Pane ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image12.png))</span></span>

<span data-ttu-id="e1fa5-157">若要部署的新文件选择它们，然后单击箭头图标以将其传输到远程站点。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-157">To deploy the new files select them and then click the arrow icon to transfer them to the remote site.</span></span> <span data-ttu-id="e1fa5-158">在传输完成后`Policy.aspx`和`Policy.aspx.cs`状态未更改本地和远程站点上的文件存在。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-158">After the transfer completes the `Policy.aspx` and `Policy.aspx.cs` files exist on both the local and remote sites with the status Unchanged.</span></span>

<span data-ttu-id="e1fa5-159">列出新的文件，以及复制网站工具突出显示了不同本地和远程站点之间的任何文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-159">Along with listing new files, the Copy Web Site tool highlights any files that differ between the local and remote sites.</span></span> <span data-ttu-id="e1fa5-160">若要了解此操作，请返回到`Privacy.aspx`页上，并将几个更多的单词添加到的隐私策略。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-160">To see this in action, return to the `Privacy.aspx` page and add a few more words to the privacy policy.</span></span> <span data-ttu-id="e1fa5-161">保存页面，然后返回到复制网站工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-161">Save the page and then return to the Copy Web Site tool.</span></span> <span data-ttu-id="e1fa5-162">如图 5 所示，`Privacy.aspx`左侧窗格中的状态为已更改，指示它已与远程站点不同步。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-162">As Figure 5 shows, the `Privacy.aspx` page in the left pane has a status of Changed indicating that it is out of sync with the remote site.</span></span>

<span data-ttu-id="e1fa5-163">[![复制网站工具指示&lt;代码&gt;Privacy.aspx&lt;o&gt;页已更改](deploying-your-site-using-visual-studio-cs/_static/image14.png)](deploying-your-site-using-visual-studio-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-163">[![The Copy Web Site Tool Indicates that the &lt;code&gt;Privacy.aspx&lt;/code&gt; Page has been Changed](deploying-your-site-using-visual-studio-cs/_static/image14.png)](deploying-your-site-using-visual-studio-cs/_static/image13.png)</span></span>

<span data-ttu-id="e1fa5-164">**图 5**:复制网站工具指示`Privacy.aspx`页已更改 ([单击以查看实际尺寸的图像](deploying-your-site-using-visual-studio-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-164">**Figure 5**: The Copy Web Site Tool Indicates that the `Privacy.aspx` Page has been Changed ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image15.png))</span></span>

<span data-ttu-id="e1fa5-165">复制网站工具也指示文件是否已删除自上次复制操作。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-165">The Copy Web Site tool also indicates if a file has been deleted since the last copy operation.</span></span> <span data-ttu-id="e1fa5-166">删除`Privacy.aspx`从本地项目和刷新复制网站工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-166">Delete the `Privacy.aspx` from the local project and refresh the Copy Web Site tool.</span></span> <span data-ttu-id="e1fa5-167">`Privacy.aspx`和`Privacy.aspx.cs`文件保持在左窗格中列出，但其已删除状态指示，它们已被删除自上次复制操作。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-167">The `Privacy.aspx` and `Privacy.aspx.cs` files remain listed in the left pane, but have a Deleted status indicating that they have been removed since the last copy operation.</span></span>

## <a name="publishing-a-web-application"></a><span data-ttu-id="e1fa5-168">Web 应用程序发布</span><span class="sxs-lookup"><span data-stu-id="e1fa5-168">Publishing a Web Application</span></span>

<span data-ttu-id="e1fa5-169">若要部署 web 应用程序从 Visual Studio 中的另一种方法是使用发布选项，这是可通过生成菜单访问。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-169">Another way to deploy your web application from within Visual Studio is to use the Publish option, which is accessible via the Build menu.</span></span> <span data-ttu-id="e1fa5-170">发布选项显式编译应用程序，然后将复制到指定的远程站点所需的文件的所有。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-170">The Publish option explicitly compiles the application and then copies all of the necessary files up to the specified remote site.</span></span> <span data-ttu-id="e1fa5-171">我们稍后将看到，发布选项是更钝比复制网站工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-171">As we'll see shortly, the Publish option is more blunt than the Copy Web Site tool.</span></span> <span data-ttu-id="e1fa5-172">复制网站工具，您可以检查本地和远程站点上的文件，并允许您在上传或下载单个文件，根据需要而发布选项部署整个 web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-172">Whereas the Copy Web Site tool lets you examine the files on the local and remote sites and permits you to upload or download individual files as needed, the Publish option deploys the entire web application.</span></span>

<span data-ttu-id="e1fa5-173">除了将所有所需的文件复制到指定的远程站点，发布选项还显式编译应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-173">In addition to copying all of the needed files to the specified remote site, the Publish option also explicitly compiles the application.</span></span> <span data-ttu-id="e1fa5-174">考虑到 Web 应用程序项目需要显式编译应该会在为发布选项仅适用于 Web 应用程序项目不令人惊讶。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-174">Given that Web Application Projects need to be explicitly compiled it should come as no surprise that the Publish option is available for Web Application Projects.</span></span> <span data-ttu-id="e1fa5-175">什么可能有点令人惊讶的是发布选项也是适用于网站项目。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-175">What may be a bit surprising is that the Publish option is also available for Web Site Projects.</span></span> <span data-ttu-id="e1fa5-176">如中所述[*确定哪些文件需要将部署到*](determining-what-files-need-to-be-deployed-cs.md)教程中，网站项目都可通过称为过程显式编译*预编译*。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-176">As noted in the [*Determining What Files Need to Be Deployed*](determining-what-files-need-to-be-deployed-cs.md) tutorial, Web Site Projects can be explicitly compiled through a process referred to as *pre-compilation*.</span></span> <span data-ttu-id="e1fa5-177">本教程重点介绍使用 Web 应用程序项目中; 的发布选项以后的教程将探讨预编译，此时我们将返回以查看与网站项目一起使用的发布选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-177">This tutorial focuses on using the Publish option with Web Application Projects; a future tutorial will explore pre-compilation, at which point we'll return to look at using the Publish option with Web Site Projects.</span></span>

> [!NOTE]
> <span data-ttu-id="e1fa5-178">对于网站项目和 Web 应用程序项目的 Visual Studio 中提供的发布选项时，Visual Web Developer 仅提供 Web 应用程序项目的发布选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-178">While the Publish option is available in Visual Studio for both Web Site Projects and Web Application Projects, Visual Web Developer only offers the Publish option for Web Application Projects.</span></span>

<span data-ttu-id="e1fa5-179">让我们看看部署书评应用程序使用发布选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-179">Let's look at deploying the Book Reviews application using the Publish option.</span></span> <span data-ttu-id="e1fa5-180">首先在 Visual Studio 中打开 BookReviewsWAP （Web 应用程序项目）。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-180">Start by opening BookReviewsWAP (the Web Application Project) in Visual Studio.</span></span> <span data-ttu-id="e1fa5-181">从发布菜单上选择生成 BookReviewsWAP 项目。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-181">From the Publish menu choose the Build BookReviewsWAP project.</span></span> <span data-ttu-id="e1fa5-182">此时会打开一个对话框，提示输入目标位置，以及其他配置选项 （请参阅图 6）。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-182">This brings up a dialog box that prompts for the target location, among other configuration options (see Figure 6).</span></span> <span data-ttu-id="e1fa5-183">更像使用复制网站工具可以输入到本地文件夹，在 IIS 上的本地网站，支持 FrontPage 服务器扩展或 FTP 服务器地址的远程网站点的位置。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-183">Much like with the Copy Web Site tool you can enter a location that points to a local folder, a local website on IIS, a remote website that supports FrontPage Server Extensions, or an FTP server address.</span></span> <span data-ttu-id="e1fa5-184">您可以选择是否在远程 web 服务器上的文件替换为已部署的文件或删除所有发布前在远程站点上的内容。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-184">You can choose whether to replace the files on the remote web server with the deployed files or to delete all of the content on the remote site before publishing.</span></span> <span data-ttu-id="e1fa5-185">此外可以指定是否将复制：</span><span class="sxs-lookup"><span data-stu-id="e1fa5-185">You can also specify whether to copy:</span></span>

- <span data-ttu-id="e1fa5-186">仅在项目中运行应用程序，省略不必要的源代码和项目相关的文件所需文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-186">Only the files in the project needed to run the application, which omits the unneeded source code and project-related files.</span></span>
- <span data-ttu-id="e1fa5-187">所有项目文件，其中包括源代码文件和 Visual Studio 项目文件，都如解决方案文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-187">All project files, which includes the source code files and Visual Studio project files like the Solution file.</span></span>
- <span data-ttu-id="e1fa5-188">在源项目文件夹中，将所有文件都复制源项目文件夹，而不考虑是否要包含在项目中的所有文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-188">All files in the source project folder, which copies all files in the source project folder regardless of whether they're included in the project.</span></span>

<span data-ttu-id="e1fa5-189">此外，还有一个上载的内容选项`App_Data`文件夹。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-189">There's also an option to upload the contents of the `App_Data` folder.</span></span>

<span data-ttu-id="e1fa5-190">[![指定目标网站](deploying-your-site-using-visual-studio-cs/_static/image17.png)](deploying-your-site-using-visual-studio-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-190">[![Specify the Destination Website](deploying-your-site-using-visual-studio-cs/_static/image17.png)](deploying-your-site-using-visual-studio-cs/_static/image16.png)</span></span>

<span data-ttu-id="e1fa5-191">**图 6**:指定目标网站 ([单击此项可查看原尺寸图像](deploying-your-site-using-visual-studio-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-191">**Figure 6**: Specify the Destination Website ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image18.png))</span></span>

<span data-ttu-id="e1fa5-192">书评应用程序的远程站点包含复制复制网站工具通过 BookReviewsWSP 项目时，部署的文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-192">For the Book Review application the remote site contains the files deployed when copying the BookReviewsWSP project via the Copy Web Site tool.</span></span> <span data-ttu-id="e1fa5-193">因此，让我们首先删除所有现有内容的发布选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-193">Therefore, let's have the Publish option start by deleting all existing content.</span></span> <span data-ttu-id="e1fa5-194">此外，让我们只需复制所需的文件，而不是使用不需要的源代码和项目文件会干扰生产环境。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-194">Also, let's just copy the necessary files rather than cluttering the production environment with unneeded source code and project files.</span></span> <span data-ttu-id="e1fa5-195">指定后这些选项，单击发布按钮。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-195">After specifying these options, click the Publish button.</span></span> <span data-ttu-id="e1fa5-196">接下来的几秒内通过 Visual Studio 将部署所需的文件到目标站点中，在输出窗口中显示其进度。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-196">Over the next several seconds Visual Studio will deploy the necessary files to the destination site, displaying its progress in the Output window.</span></span>

<span data-ttu-id="e1fa5-197">发布操作完成后，图 7 显示了 FTP 站点上的文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-197">Figure 7 shows the files on the FTP site after the Publish operation has completed.</span></span> <span data-ttu-id="e1fa5-198">请注意，只有标记页和需要服务器端和客户端的支持文件已上传。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-198">Note that only the markup pages and the necessary sever- and client-side support files have been uploaded.</span></span>

<span data-ttu-id="e1fa5-199">[![仅将所需的文件发布到生产环境](deploying-your-site-using-visual-studio-cs/_static/image20.png)](deploying-your-site-using-visual-studio-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-199">[![Only the Needed Files Were Published to the Production Environment](deploying-your-site-using-visual-studio-cs/_static/image20.png)](deploying-your-site-using-visual-studio-cs/_static/image19.png)</span></span>

<span data-ttu-id="e1fa5-200">**图 7**:仅需要文件发布到生产环境 ([单击此项可查看原尺寸图像](deploying-your-site-using-visual-studio-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="e1fa5-200">**Figure 7**: Only the Needed Files Were Published to the Production Environment ([Click to view full-size image](deploying-your-site-using-visual-studio-cs/_static/image21.png))</span></span>

<span data-ttu-id="e1fa5-201">发布选项是一个不太能体现细微差别的工具比复制网站工具。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-201">The Publish option is a less nuanced tool than the Copy Web Site tool.</span></span> <span data-ttu-id="e1fa5-202">复制网站工具允许您以检查本地和远程站点上的文件会发现它们之间的差异，而发布选项提供了任何此类接口。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-202">Whereas the Copy Web Site tool allows you to inspect the files on the local and remote sites and see how they differ, the Publish option provides no such interface.</span></span> <span data-ttu-id="e1fa5-203">此外，复制网站工具，可进行一次性更改上, 传或删除单个文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-203">Moreover, the Copy Web Site tool enables you to make one-off changes, uploading or deleting individual files.</span></span> <span data-ttu-id="e1fa5-204">发布选项不允许此类精细控制;相反，它将发布*整个*应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-204">The Publish option does not allow such fine-grained control; instead, it publishes the *entire* application.</span></span> <span data-ttu-id="e1fa5-205">此行为有其优点和缺点。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-205">This behavior has its pros and cons.</span></span> <span data-ttu-id="e1fa5-206">好的方面，你知道何时使用您不会忘记将重要文件上传的发布选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-206">On the plus side, you know when using the Publish option you won't be forgetting to upload an important file.</span></span> <span data-ttu-id="e1fa5-207">但是，如果在进行少量更改到非常大的网站的发布选项不能更新该页面或两个已修改，但必须等待时 Visual Studio 将部署的整个站点，而是会发生什么情况，请考虑。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-207">But consider what happens if you have made a small change to a very large website - with the Publish option you cannot update that page or two that has been modified, but instead you must wait while Visual Studio deploys the entire site.</span></span>

<span data-ttu-id="e1fa5-208">不需要某些文件之间的生产和开发环境不同，其内容不常见。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-208">It's not uncommon for there to be certain files whose content differs between the production and development environments.</span></span> <span data-ttu-id="e1fa5-209">主要示例是应用程序的配置文件， `Web.config`。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-209">A key example is the application's configuration file, `Web.config`.</span></span> <span data-ttu-id="e1fa5-210">因为发布选项会盲目地将复制的 web 应用程序文件时，它会与开发环境中的版本覆盖生产环境中的自定义的配置文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-210">Because the Publish option blindly copies the web application files it overwrites the production environment's customized configuration files with the version in the development environment.</span></span> <span data-ttu-id="e1fa5-211">后续教程探讨了本主题进一步，并提供了用于部署 web 应用程序时存在此类差异的提示。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-211">The subsequent tutorial explores this topic further and offers tips for deploying a web application when such differences exist.</span></span>

## <a name="summary"></a><span data-ttu-id="e1fa5-212">总结</span><span class="sxs-lookup"><span data-stu-id="e1fa5-212">Summary</span></span>

<span data-ttu-id="e1fa5-213">部署网站涉及将开发环境中的所需的文件复制到生产环境。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-213">Deploying a website involves copying the necessary files from the development environment to the production environment.</span></span> <span data-ttu-id="e1fa5-214">在上一教程介绍了如何使用 FileZilla 等 FTP 客户端传输文件。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-214">The previous tutorial showed how to transfer files using an FTP client like FileZilla.</span></span> <span data-ttu-id="e1fa5-215">本教程中检查 Visual Studio 中的两个部署工具: 复制网站工具和发布选项。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-215">This tutorial examined two deployment tools in Visual Studio: the Copy Web Site tool and the Publish option.</span></span> <span data-ttu-id="e1fa5-216">复制网站工具相当于 FTP 客户端，因为它可以列出本地计算机和指定的远程计算机，以便轻松上传或下载两台计算机之间的文件上的文件的双窗格界面。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-216">The Copy Web Site tool is similar to an FTP client in that it has a two-paned interface listing the files on the local computer and a specified remote computer that makes it easy to upload or download files between the two computers.</span></span> <span data-ttu-id="e1fa5-217">发布选项是一个更钝工具，显式编译项目，然后再部署到指定的目标的整个应用程序。</span><span class="sxs-lookup"><span data-stu-id="e1fa5-217">The Publish option is a more blunt tool that explicitly compiles the project and then deploys the entire application to the specified destination.</span></span>

<span data-ttu-id="e1fa5-218">快乐编程 ！</span><span class="sxs-lookup"><span data-stu-id="e1fa5-218">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="e1fa5-219">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="e1fa5-219">Further Reading</span></span>

<span data-ttu-id="e1fa5-220">在本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="e1fa5-220">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="e1fa5-221">使用复制网站工具复制网站</span><span class="sxs-lookup"><span data-stu-id="e1fa5-221">Copying Web Site with the Copy Web Site Tool</span></span>](https://msdn.microsoft.com/library/1cc82atw.aspx)
- <span data-ttu-id="e1fa5-222">[如何实现:部署网站的网站使用复制网站工具](../../../videos/how-do-i/how-do-i-deploy-a-web-site-using-the-copy-web-site-tool.md)（视频）</span><span class="sxs-lookup"><span data-stu-id="e1fa5-222">[How Do I: Deploy a Web Site Using the Copy Web Site Tool](../../../videos/how-do-i/how-do-i-deploy-a-web-site-using-the-copy-web-site-tool.md) (Video)</span></span>
- [<span data-ttu-id="e1fa5-223">如何：发布 Web 应用程序项目</span><span class="sxs-lookup"><span data-stu-id="e1fa5-223">How To: Publish Web Application Projects</span></span>](https://msdn.microsoft.com/library/aa983453.aspx)
- [<span data-ttu-id="e1fa5-224">如何：发布网站</span><span class="sxs-lookup"><span data-stu-id="e1fa5-224">How To: Publish Web Sites</span></span>](https://msdn.microsoft.com/library/20yh9f1b.aspx)
- [<span data-ttu-id="e1fa5-225">安装和部署项目在 Visual Studio 中</span><span class="sxs-lookup"><span data-stu-id="e1fa5-225">Setup and Deployment Projects in Visual Studio</span></span>](https://msdn.microsoft.com/library/wx3b589t.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="e1fa5-226">[上一页](deploying-your-site-using-an-ftp-client-cs.md)
> [下一页](common-configuration-differences-between-development-and-production-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e1fa5-226">[Previous](deploying-your-site-using-an-ftp-client-cs.md)
[Next](common-configuration-differences-between-development-and-production-cs.md)</span></span>
