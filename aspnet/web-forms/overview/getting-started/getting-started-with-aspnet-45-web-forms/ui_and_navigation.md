---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/ui_and_navigation
title: UI 和导航 |Microsoft Docs
author: Erikre
description: 本系列教程将介绍使用 ASP.NET 4.5 构建 ASP.NET Web 窗体应用程序的基础知识，并为我们 Microsoft Visual Studio Express 2013 。
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 5c76891d-e515-4885-b576-76bd2c494efe
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/ui_and_navigation
msc.type: authoredcontent
ms.openlocfilehash: ac1dcaf1ba911fdcaeb3845c6836ec771733d93e
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/28/2019
ms.locfileid: "74636819"
---
# <a name="ui-and-navigation"></a><span data-ttu-id="0e7d1-103">UI 和导航</span><span class="sxs-lookup"><span data-stu-id="0e7d1-103">UI and Navigation</span></span>

<span data-ttu-id="0e7d1-104">作者： [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="0e7d1-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="0e7d1-105">[下载 Wingtip 玩具示例项目（C#）](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409)或[下载电子书（PDF）](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="0e7d1-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="0e7d1-106">本系列教程将介绍使用 ASP.NET 4.5 构建 ASP.NET Web 窗体应用程序的基础知识，并为 Web Microsoft Visual Studio Express 2013。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="0e7d1-107">此教程系列附带有[ C#源代码](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409)的 Visual Studio 2013 项目。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="0e7d1-108">在本教程中，你将修改默认 Web 应用程序的 UI，以支持 Wingtip 玩具 store 前台应用程序的功能。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-108">In this tutorial, you will modify the UI of the default Web application to support features of the Wingtip Toys store front application.</span></span> <span data-ttu-id="0e7d1-109">此外，还将添加简单的数据绑定导航。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-109">Also, you will add simple and data bound navigation.</span></span> <span data-ttu-id="0e7d1-110">本教程基于前面的 "创建数据访问层" 教程，是 Wingtip 玩具教程系列的一部分。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-110">This tutorial builds on the previous tutorial "Create the Data Access Layer" and is part of the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="0e7d1-111">你将学习的内容：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-111">What you'll learn:</span></span>

- <span data-ttu-id="0e7d1-112">如何将 UI 更改为支持 Wingtip 玩具 store 前台应用程序的功能。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-112">How to change the UI to support features of the Wingtip Toys store front application.</span></span>
- <span data-ttu-id="0e7d1-113">如何将 HTML5 元素配置为包括页面导航。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-113">How to configure an HTML5 element to include page navigation.</span></span>
- <span data-ttu-id="0e7d1-114">如何创建数据驱动的控件以导航到特定的产品数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-114">How to create a data-driven control to navigate to specific product data.</span></span>
- <span data-ttu-id="0e7d1-115">如何显示使用实体框架 Code First 创建的数据库中的数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-115">How to display data from a database created using Entity Framework Code First.</span></span>

<span data-ttu-id="0e7d1-116">ASP.NET Web 窗体使你可以为 Web 应用程序创建动态内容。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-116">ASP.NET Web Forms allow you to create dynamic content for your Web application.</span></span> <span data-ttu-id="0e7d1-117">每个 ASP.NET 网页的创建方式类似于静态 HTML 网页（不包含基于服务器的处理的页面），但 ASP.NET 网页包含一些额外的元素，ASP.NET 在页面运行时识别并处理生成 HTML。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-117">Each ASP.NET Web page is created in a manner similar to a static HTML Web page (a page that does not include server-based processing), but ASP.NET Web page includes extra elements that ASP.NET recognizes and processes to generate HTML when the page runs.</span></span>

<span data-ttu-id="0e7d1-118">使用静态 HTML 页（ *.htm*或 *.html*文件），服务器通过读取文件并按原样将其发送到浏览器来完成 `Web` 请求。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-118">With a static HTML page (*.htm* or *.html* file), the server fulfills a `Web` request by reading the file and sending it as-is to the browser.</span></span> <span data-ttu-id="0e7d1-119">与此相反，当某人请求 ASP.NET 网页（ *.aspx*文件）时，该页面在 Web 服务器上以程序的形式运行。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-119">In contrast, when someone requests an ASP.NET Web page (*.aspx* file), the page runs as a program on the Web server.</span></span> <span data-ttu-id="0e7d1-120">当该页正在运行时，它可以执行您的网站所需的任何任务，包括计算值、读取或写入数据库信息或调用其他程序。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-120">While the page is running, it can perform any task that your Web site requires, including calculating values, reading or writing database information, or calling other programs.</span></span> <span data-ttu-id="0e7d1-121">作为其输出，页面会动态生成标记（例如 HTML 中的元素），并将此动态输出发送到浏览器。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-121">As its output, the page dynamically produces markup (such as elements in HTML) and sends this dynamic output to the browser.</span></span>

## <a name="modifying-the-ui"></a><span data-ttu-id="0e7d1-122">修改 UI</span><span class="sxs-lookup"><span data-stu-id="0e7d1-122">Modifying the UI</span></span>

<span data-ttu-id="0e7d1-123">通过修改*default.aspx*页，可以继续学习本系列教程。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-123">You'll continue this tutorial series by modifying the *Default.aspx* page.</span></span> <span data-ttu-id="0e7d1-124">您将修改已由用于创建应用程序的默认模板建立的 UI。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-124">You will modify the UI that's already established by the default template used to create the application.</span></span> <span data-ttu-id="0e7d1-125">创建任何 Web 窗体应用程序时，通常会执行的修改类型。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-125">The type of modifications you'll do are typical when creating any Web Forms application.</span></span> <span data-ttu-id="0e7d1-126">你将通过更改标题、替换某些内容并删除不需要的默认内容来实现此目的。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-126">You'll do this by changing the title, replacing some content, and removing unneeded default content.</span></span>

1. <span data-ttu-id="0e7d1-127">打开或切换到 " *default.aspx* " 页。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-127">Open or switch to the *Default.aspx* page.</span></span>
2. <span data-ttu-id="0e7d1-128">如果该页出现在 "**设计**" 视图中，请切换到 "**源**" 视图。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-128">If the page appears in **Design** view, switch to **Source** view.</span></span>
3. <span data-ttu-id="0e7d1-129">在页面顶部的 `@Page` 指令中，将 "`Title`" 属性更改为 "欢迎"，如下面的黄色突出显示部分所示。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-129">At the top of the page in the `@Page` directive, change the `Title` attribute to "Welcome", as shown highlighted in yellow below.</span></span> 

    [!code-aspx[Main](ui_and_navigation/samples/sample1.aspx?highlight=1)]
4. <span data-ttu-id="0e7d1-130">同样，在*default.aspx*页上，替换 `<asp:Content>` 标记中包含的所有默认内容，以便标记显示如下。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-130">Also on the *Default.aspx* page, replace all of the default content contained in the `<asp:Content>` tag so that the markup appears as below.</span></span> 

    [!code-aspx[Main](ui_and_navigation/samples/sample2.aspx)]
5. <span data-ttu-id="0e7d1-131">通过从 "**文件**" 菜单中选择 "**保存**"，保存*default.aspx*页。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-131">Save the *Default.aspx* page by selecting **Save Default.aspx** from the **File** menu.</span></span>

   <span data-ttu-id="0e7d1-132">生成的*default.aspx*页将如下所示：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-132">The resulting *Default.aspx* page will appear as follows:</span></span> 

[!code-aspx[Main](ui_and_navigation/samples/sample3.aspx)]

<span data-ttu-id="0e7d1-133">在此示例中，您设置了 `@Page` 指令的 `Title` 属性。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-133">In the example, you have set the `Title` attribute of the `@Page` directive.</span></span> <span data-ttu-id="0e7d1-134">当在浏览器中显示 HTML 时，服务器代码 `<%: Page.Title %>` 解析 `Title` 属性中包含的内容。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-134">When the HTML is displayed in a browser, the server code `<%: Page.Title %>` resolves to the content contained in the `Title` attribute.</span></span>

<span data-ttu-id="0e7d1-135">示例页面包含构成 ASP.NET 网页的基本元素。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-135">The example page includes the basic elements that constitute an ASP.NET Web page.</span></span> <span data-ttu-id="0e7d1-136">此页包含静态文本，如您在 HTML 页中所拥有的一样，以及特定于 ASP.NET 的元素。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-136">The page contains static text as you might have in an HTML page, along with elements that are specific to ASP.NET.</span></span> <span data-ttu-id="0e7d1-137">*Default.aspx*页中包含的内容将与母版页内容集成，本教程稍后将对此内容进行介绍。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-137">The content contained in the *Default.aspx* page will be integrated with the master page content, which will be explained later in this tutorial.</span></span>

### <a name="page-directive"></a><span data-ttu-id="0e7d1-138">@Page 指令</span><span class="sxs-lookup"><span data-stu-id="0e7d1-138">@Page Directive</span></span>

<span data-ttu-id="0e7d1-139">ASP.NET Web 窗体通常包含允许您为页面指定页面属性和配置信息的指令。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-139">ASP.NET Web Forms usually contain directives that allow you to specify page properties and configuration information for the page.</span></span> <span data-ttu-id="0e7d1-140">ASP.NET 使用指令作为如何处理页面的说明，但不会将其作为发送到浏览器的标记的一部分呈现。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-140">The directives are used by ASP.NET as instructions for how to process the page, but they are not rendered as part of the markup that is sent to the browser.</span></span>

<span data-ttu-id="0e7d1-141">最常使用的指令是 `@Page` 指令，该指令允许您为页面指定许多配置选项，其中包括：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-141">The most commonly used directive is the `@Page` directive, which allows you to specify many configuration options for the page, including the following:</span></span>

1. <span data-ttu-id="0e7d1-142">页中代码的服务器编程语言，如C#。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-142">The server programming language for code in the page, such as C#.</span></span>
2. <span data-ttu-id="0e7d1-143">该页是否是直接在页中包含服务器代码的页面（称为单文件页），还是在单独的类文件中包含代码的页面（称为代码隐藏页）。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-143">Whether the page is a page with server code directly in the page, which is called a single-file page, or whether it is a page with code in a separate class file, which is called a code-behind page.</span></span>
3. <span data-ttu-id="0e7d1-144">页面是否具有关联的母版页，是否应将其视为内容页。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-144">Whether the page has an associated master page and should therefore be treated as a content page.</span></span>
4. <span data-ttu-id="0e7d1-145">调试和跟踪选项。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-145">Debugging and tracing options.</span></span>

<span data-ttu-id="0e7d1-146">如果未在页中包含 `@Page` 指令，或者如果指令不包含特定的设置 *，则将从 web.config 配置文件*或*machine.config 配置文件*继承设置。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-146">If you do not include an `@Page` directive in the page, or if the directive does not include a specific setting, a setting will be inherited from the *Web.config* configuration file or from the *Machine.config* configuration file.</span></span> <span data-ttu-id="0e7d1-147">*Machine.config*文件为计算机上运行的所有应用程序提供其他配置设置。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-147">The *Machine.config* file provides additional configuration settings to all applications running on a machine.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="0e7d1-148">*Machine.config*还提供了有关所有可能的配置设置的详细信息。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-148">The *Machine.config* also provides details about all possible configuration settings.</span></span>

### <a name="web-server-controls"></a><span data-ttu-id="0e7d1-149">Web 服务器控件</span><span class="sxs-lookup"><span data-stu-id="0e7d1-149">Web Server Controls</span></span>

<span data-ttu-id="0e7d1-150">在大多数 ASP.NET Web 窗体应用程序中，您将添加允许用户与页面交互的控件，例如按钮、文本框、列表等。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-150">In most ASP.NET Web Forms applications, you will add controls that allow the user to interact with the page, such as buttons, text boxes, lists, and so on.</span></span> <span data-ttu-id="0e7d1-151">这些 Web 服务器控件类似于 HTML 按钮和输入元素。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-151">These Web server controls are similar to HTML buttons and input elements.</span></span> <span data-ttu-id="0e7d1-152">但是，它们是在服务器上处理的，因此可以使用服务器代码来设置其属性。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-152">However, they are processed on the server, allowing you to use server code to set their properties.</span></span> <span data-ttu-id="0e7d1-153">这些控件还会引发可在服务器代码中处理的事件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-153">These controls also raise events that you can handle in server code.</span></span>

<span data-ttu-id="0e7d1-154">服务器控件使用的特殊语法 ASP.NET 在页面运行时识别。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-154">Server controls use a special syntax that ASP.NET recognizes when the page runs.</span></span> <span data-ttu-id="0e7d1-155">ASP.NET 服务器控件的标记名称以 `asp:` 前缀开头。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-155">The tag name for ASP.NET server controls starts with an `asp:` prefix.</span></span> <span data-ttu-id="0e7d1-156">这允许 ASP.NET 识别并处理这些服务器控件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-156">This allows ASP.NET to recognize and process these server controls.</span></span> <span data-ttu-id="0e7d1-157">如果控件不是 .NET Framework 的一部分，则前缀可能会有所不同。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-157">The prefix might be different if the control is not part of the .NET Framework.</span></span> <span data-ttu-id="0e7d1-158">除了 `asp:` 前缀以外，ASP.NET 服务器控件还包括 `runat="server"` 属性和可用于在服务器代码中引用控件的 `ID`。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-158">In addition to the `asp:` prefix, ASP.NET server controls also include the `runat="server"` attribute and an `ID` that you can use to reference the control in server code.</span></span>

<span data-ttu-id="0e7d1-159">当页面运行时，ASP.NET 将标识服务器控件，并运行与这些控件关联的代码。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-159">When the page runs, ASP.NET identifies the server controls and runs the code that is associated with those controls.</span></span> <span data-ttu-id="0e7d1-160">许多控件在浏览器中显示时，会将一些 HTML 或其他标记呈现到页面中。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-160">Many controls render some HTML or other markup into the page when it is displayed in a browser.</span></span>

### <a name="server-code"></a><span data-ttu-id="0e7d1-161">服务器代码</span><span class="sxs-lookup"><span data-stu-id="0e7d1-161">Server Code</span></span>

<span data-ttu-id="0e7d1-162">大多数 ASP.NET Web 窗体应用程序都包含处理页面时服务器上运行的代码。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-162">Most ASP.NET Web Forms applications include code that runs on the server when the page is processed.</span></span> <span data-ttu-id="0e7d1-163">如上所述，可以使用服务器代码执行多种操作，例如向 ListView 控件添加数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-163">As mentioned above, server code can be used to do a variety of things, such as adding data to a ListView control.</span></span> <span data-ttu-id="0e7d1-164">ASP.NET 支持在服务器上运行多种语言，包括C#、Visual Basic、j # 和其他语言。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-164">ASP.NET supports many languages to run on the server, including C#, Visual Basic, J#, and others.</span></span>

<span data-ttu-id="0e7d1-165">ASP.NET 支持两种模型来编写网页的服务器代码。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-165">ASP.NET supports two models for writing server code for a Web page.</span></span> <span data-ttu-id="0e7d1-166">在单文件模型中，页面的代码位于一个 script 元素中，其中开始标记包含 `runat="server"` 特性。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-166">In the single-file model, the code for the page is in a script element where the opening tag includes the `runat="server"` attribute.</span></span> <span data-ttu-id="0e7d1-167">或者，您可以在单独的类文件中创建该页的代码，这称为 "代码隐藏" 模型。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-167">Alternatively, you can create the code for the page in a separate class file, which is referred to as the code-behind model.</span></span> <span data-ttu-id="0e7d1-168">在这种情况下，ASP.NET Web 窗体页通常不包含任何服务器代码。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-168">In this case, the ASP.NET Web Forms page generally contains no server code.</span></span> <span data-ttu-id="0e7d1-169">相反，`@Page` 指令包含链接 *.aspx*页面及其关联的代码隐藏文件的信息。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-169">Instead, the `@Page` directive includes information that links the *.aspx* page with its associated code-behind file.</span></span>

<span data-ttu-id="0e7d1-170">`@Page` 指令中包含的 `CodeBehind` 特性指定了单独的类文件的名称，而 `Inherits` 特性指定了代码隐藏文件中对应于页的类的名称。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-170">The `CodeBehind` attribute contained in the `@Page` directive specifies the name of the separate class file, and the `Inherits` attribute specifies the name of the class within the code-behind file that corresponds to the page.</span></span>

### <a name="updating-the-master-page"></a><span data-ttu-id="0e7d1-171">更新母版页</span><span class="sxs-lookup"><span data-stu-id="0e7d1-171">Updating the Master Page</span></span>

<span data-ttu-id="0e7d1-172">在 ASP.NET Web 窗体中，母版页允许你在应用程序中创建一致的页面布局。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-172">In ASP.NET Web Forms, master pages allow you to create a consistent layout for the pages in your application.</span></span> <span data-ttu-id="0e7d1-173">可以使用单个母版页定义应用程序中所有页（或一组页）的外观和标准行为。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-173">A single master page defines the look and feel and standard behavior that you want for all of the pages (or a group of pages) in your application.</span></span> <span data-ttu-id="0e7d1-174">然后，您可以创建包含要显示内容的单独内容页，如上文所述。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-174">You can then create individual content pages that contain the content you want to display, as explained above.</span></span> <span data-ttu-id="0e7d1-175">当用户请求内容页时，ASP.NET 会将内容页与母版页合并，以生成将母版面布局与内容页中的内容相结合的输出。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-175">When users request the content pages, ASP.NET merges them with the master page to produce output that combines the layout of the master page with the content from the content page.</span></span>

<span data-ttu-id="0e7d1-176">新站点需要单个徽标才能在每一页上显示。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-176">The new site needs a single logo to display on every page.</span></span> <span data-ttu-id="0e7d1-177">若要添加此徽标，可以修改母版页上的 HTML。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-177">To add this logo, you can modify the HTML on the master page.</span></span>

1. <span data-ttu-id="0e7d1-178">在**解决方案资源管理器**中，查找并打开 "**网站母版页**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-178">In **Solution Explorer**, find and open the **Site.Master** page.</span></span>
2. <span data-ttu-id="0e7d1-179">如果该页在 "**设计**" 视图中，请切换到 "**源**" 视图。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-179">If the page is in **Design** view, switch to **Source** view.</span></span>
3. <span data-ttu-id="0e7d1-180">通过**修改或添加**以黄色突出显示的标记来更新母版页：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-180">Update the master page by **modifying or adding** the markup highlighted in yellow:</span></span> 

    [!code-aspx[Main](ui_and_navigation/samples/sample4.aspx?highlight=9,49,76-81,87)]

<span data-ttu-id="0e7d1-181">此 HTML 将在 Web 应用程序的*Images*文件夹中显示名为 "*徽标键*" 的图像，稍后将添加该图像。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-181">This HTML will display the image named *logo.jpg* from the *Images* folder of the Web application, which you'll add later.</span></span> <span data-ttu-id="0e7d1-182">当浏览器中显示使用母版页的页面时，将显示该徽标。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-182">When a page that uses the master page is displayed in a browser, the logo will be displayed.</span></span> <span data-ttu-id="0e7d1-183">如果用户单击徽标，用户将导航回*default.aspx*页面。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-183">If a user clicks on the logo, the user will navigate back to the *Default.aspx* page.</span></span> <span data-ttu-id="0e7d1-184">HTML 定位点标记 `<a>` 包装图像服务器控件，并允许将该图像作为链接的一部分包含在内。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-184">The HTML anchor tag `<a>` wraps the image server control and allows the image to be included as part of the link.</span></span> <span data-ttu-id="0e7d1-185">定位点标记的 `href` 特性指定网站的根 "`~/`" 作为链接位置。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-185">The `href` attribute for the anchor tag specifies the root "`~/`" of the Web site as the link location.</span></span> <span data-ttu-id="0e7d1-186">默认情况下，当用户导航到网站的根目录时，将显示*default.aspx*页。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-186">By default, the *Default.aspx* page is displayed when the user navigates to the root of the Web site.</span></span> <span data-ttu-id="0e7d1-187">**Image** `<asp:Image>` server 控件包含在浏览器中显示时以 HTML 格式呈现的附加属性，如 `BorderStyle`。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-187">The **Image** `<asp:Image>` server control includes addition properties, such as `BorderStyle`, that render as HTML when displayed in a browser.</span></span>

### <a name="master-pages"></a><span data-ttu-id="0e7d1-188">母版页</span><span class="sxs-lookup"><span data-stu-id="0e7d1-188">Master Pages</span></span>

<span data-ttu-id="0e7d1-189">母版页是扩展名为 master （例如，ASP.NET）的*文件，其*预定义布局可以包含静态文本、HTML 元素和服务器控件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-189">A master page is an ASP.NET file with the extension .master (for example, *Site.Master*) with a predefined layout that can include static text, HTML elements, and server controls.</span></span> <span data-ttu-id="0e7d1-190">母版页由特殊的 `@Master` 指令标识，该指令替换用于普通 *.aspx*页面的 `@Page` 指令。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-190">The master page is identified by a special `@Master` directive that replaces the `@Page` directive that is used for ordinary *.aspx* pages.</span></span>

<span data-ttu-id="0e7d1-191">除了 `@Master` 指令外，母版页还包含页的所有顶级 HTML 元素，如 `html`、`head`和 `form`。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-191">In addition to the `@Master` directive, the master page also contains all of the top-level HTML elements for a page, such as `html`, `head`, and `form`.</span></span> <span data-ttu-id="0e7d1-192">例如，在上面添加的母版页上，使用 HTML `table` 进行布局，使用公司徽标、静态文本和服务器控件的 `img` 元素来处理网站的公共成员身份。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-192">For example, on the master page you added above, you use an HTML `table` for the layout, an `img` element for the company logo, static text, and server controls to handle common membership for your site.</span></span> <span data-ttu-id="0e7d1-193">您可以使用任何 HTML 和任何 ASP.NET 元素作为母版页的一部分。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-193">You can use any HTML and any ASP.NET elements as part of your master page.</span></span>

<span data-ttu-id="0e7d1-194">除了在所有页面上显示的静态文本和控件外，母版页还包括一个或多个**ContentPlaceHolder**控件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-194">In addition to static text and controls that will appear on all pages, the master page also includes one or more **ContentPlaceHolder** controls.</span></span> <span data-ttu-id="0e7d1-195">这些占位符控件定义要在其中显示可替换内容的区域。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-195">These placeholder controls define regions where replaceable content will appear.</span></span> <span data-ttu-id="0e7d1-196">接下来，使用**内容**服务器控件在内容页（如*default.aspx*）中定义可替换内容。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-196">In turn, the replaceable content is defined in content pages, such as *Default.aspx*, using the **Content** server control.</span></span>

#### <a name="adding-image-files"></a><span data-ttu-id="0e7d1-197">添加图像文件</span><span class="sxs-lookup"><span data-stu-id="0e7d1-197">Adding Image Files</span></span>

<span data-ttu-id="0e7d1-198">必须将上面引用的徽标图像与所有产品图像一起添加到 Web 应用程序，以便在浏览器中显示项目时可以查看它们。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-198">The logo image that is referenced above, along with all the product images, must be added to the Web application so that they can be seen when the project is displayed in a browser.</span></span>

#### <a name="download-from-msdn-samples-site"></a><span data-ttu-id="0e7d1-199">从 MSDN 示例站点下载：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-199">Download from MSDN Samples site:</span></span>

<span data-ttu-id="0e7d1-200">[与 ASP.NET 4.5 Web 窗体和 Visual Studio 2013-Wingtip 玩具](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409)（C#）入门</span><span class="sxs-lookup"><span data-stu-id="0e7d1-200">[Getting Started with ASP.NET 4.5 Web Forms and Visual Studio 2013 - Wingtip Toys](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) (C#)</span></span>

<span data-ttu-id="0e7d1-201">下载内容包括用于创建示例应用程序的 " *WingtipToys* " 文件夹中的资源。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-201">The download includes resources in the *WingtipToys-Assets* folder that are used to create the sample application.</span></span>

1. <span data-ttu-id="0e7d1-202">如果尚未执行此操作，请使用 MSDN 示例网站中的以上链接下载压缩的示例文件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-202">If you haven't already done so, download the compressed sample files using the above link from the MSDN Samples site.</span></span>
2. <span data-ttu-id="0e7d1-203">下载后，打开 .zip 文件并将内容复制到计算机上的本地文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-203">Once downloaded, open the .zip file and copy the contents to a local folder on your machine.</span></span>
3. <span data-ttu-id="0e7d1-204">查找并打开 " *WingtipToys* " 文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-204">Find and open the *WingtipToys-Assets* folder.</span></span>
4. <span data-ttu-id="0e7d1-205">通过拖放，将*目录*文件夹从本地文件夹复制到 Visual Studio**解决方案资源管理器**中 Web 应用程序项目的根目录。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-205">By dragging and dropping, copy the *Catalog* folder from your local folder to the root of the Web application project in the **Solution Explorer** of Visual Studio.</span></span> 

    ![UI 和导航-复制文件](ui_and_navigation/_static/image1.png)
5. <span data-ttu-id="0e7d1-207">接下来，在**解决方案资源管理器**中右键单击 " **WingtipToys** " 项目，然后选择 "**添加** -&gt;**新文件夹**"，创建名为 "*映像*" 的新文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-207">Next, create a new folder named *Images* by right-clicking the **WingtipToys** project in **Solution Explorer** and selecting **Add** -&gt; **New Folder**.</span></span>
6. <span data-ttu-id="0e7d1-208">从**文件资源管理器**中的 WingtipToys 文件夹将文件复制到 Visual Studio**解决方案资源管理器**的 Web 应用程序项目的*Images*文件夹*中。*</span><span class="sxs-lookup"><span data-stu-id="0e7d1-208">Copy the *logo.jpg* file from the *WingtipToys-Assets* folder in **File Explorer** to the *Images* folder of the Web application project in **Solution Explorer** of Visual Studio.</span></span>
7. <span data-ttu-id="0e7d1-209">如果看不到新文件，请单击**解决方案资源管理器**顶部的 "**显示所有文件**" 选项以更新文件列表。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-209">Click the **Show All Files** option at the top of **Solution Explorer** to update the list of files if you don't see the new files.</span></span>  
  
    <span data-ttu-id="0e7d1-210">现在**解决方案资源管理器**显示已更新的项目文件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-210">**Solution Explorer** now shows the updated project files.</span></span> 

    ![UI 和导航-解决方案资源管理器](ui_and_navigation/_static/image2.png)

### <a name="adding-pages"></a><span data-ttu-id="0e7d1-212">添加页</span><span class="sxs-lookup"><span data-stu-id="0e7d1-212">Adding Pages</span></span>

<span data-ttu-id="0e7d1-213">向 Web 应用程序添加导航之前，首先要添加两个要导航到的新页面。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-213">Before adding navigation to the Web application, you'll first add two new pages that you'll navigate to.</span></span> <span data-ttu-id="0e7d1-214">稍后在本系列教程中，你将在这些新页面上显示产品和产品详细信息。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-214">Later in this tutorial series, you'll display products and product details on these new pages.</span></span>

1. <span data-ttu-id="0e7d1-215">在**解决方案资源管理器**中，右键单击**WingtipToys**，单击 "**添加**"，然后单击 "**新建项**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-215">In **Solution Explorer**, right-click **WingtipToys**, click **Add**, and then click **New Item**.</span></span>   
 <span data-ttu-id="0e7d1-216">随即出现“添加新项”对话框。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-216">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="0e7d1-217">选择左侧的 " **Visual C#**  -&gt; **Web**模板" 组。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-217">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="0e7d1-218">然后，从中间列表中选择 "**带有母版页的 Web 窗体**"，并将其命名为*ProductList*。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-218">Then, select **Web Form with Master Page** from the middle list and name it *ProductList.aspx*.</span></span> 

    ![UI 和导航-"添加新项" 对话框](ui_and_navigation/_static/image3.png)
3. <span data-ttu-id="0e7d1-220">选择 "**站点**" 以将母版页附加到新创建的 *.aspx*页面。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-220">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span> 

    ![UI 和导航-选择母版页](ui_and_navigation/_static/image4.png)
4. <span data-ttu-id="0e7d1-222">按照相同的步骤，添加一个名为*ProductDetails*的附加页面。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-222">Add an additional page named *ProductDetails.aspx* by following these same steps.</span></span>

### <a name="updating-bootstrap"></a><span data-ttu-id="0e7d1-223">更新启动</span><span class="sxs-lookup"><span data-stu-id="0e7d1-223">Updating Bootstrap</span></span>

<span data-ttu-id="0e7d1-224">Visual Studio 2013 项目模板使用由 Twitter 创建的[启动](http://getbootstrap.com/)、布局和主题框架。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-224">The Visual Studio 2013 project templates use [Bootstrap](http://getbootstrap.com/), a layout and theming framework created by Twitter.</span></span> <span data-ttu-id="0e7d1-225">启动使用 CSS3 来提供响应式设计，这意味着布局可以动态适应不同的浏览器窗口大小。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-225">Bootstrap uses CSS3 to provide responsive design, which means layouts can dynamically adapt to different browser window sizes.</span></span> <span data-ttu-id="0e7d1-226">你还可以使用启动的主题功能轻松地对应用程序的外观进行更改。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-226">You can also use Bootstrap's theming feature to easily effect a change in the application's look and feel.</span></span> <span data-ttu-id="0e7d1-227">默认情况下，Visual Studio 2013 中的 ASP.NET Web 应用程序模板包括作为 NuGet 包的启动。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-227">By default, the ASP.NET Web Application template in Visual Studio 2013 includes Bootstrap as a NuGet package.</span></span>

<span data-ttu-id="0e7d1-228">在本教程中，你将通过替换启动 CSS 文件来更改 Wingtip 玩具应用程序的外观。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-228">In this tutorial, you will change look and feel of the Wingtip Toys application by replacing the Bootstrap CSS files.</span></span>

1. <span data-ttu-id="0e7d1-229">在**解决方案资源管理器**中，打开 "*内容*" 文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-229">In **Solution Explorer**, open the *Content* folder.</span></span>
2. <span data-ttu-id="0e7d1-230">右键单击 "bootstrap-original" 文件，*然后将其*重命名为 ""。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-230">Right-click the *bootstrap.css* file and rename it to *bootstrap-original.css*.</span></span>
3. <span data-ttu-id="0e7d1-231">将 bootstrap-original 重命名*为 "* "。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-231">Rename the *bootstrap.min.css* to *bootstrap-original.min.css*.</span></span>
4. <span data-ttu-id="0e7d1-232">在**解决方案资源管理器**中，右键单击 "*内容*" 文件夹，然后选择 "**在文件资源管理器中打开文件夹**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-232">In **Solution Explorer**, right-click the *Content* folder and select **Open Folder in File Explorer**.</span></span>  
   <span data-ttu-id="0e7d1-233">将显示文件资源管理器。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-233">The File Explorer will be displayed.</span></span> <span data-ttu-id="0e7d1-234">将下载的启动 CSS 文件保存到此位置。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-234">You will save a downloaded bootstrap CSS files to this location.</span></span>
5. <span data-ttu-id="0e7d1-235">在浏览器中转到[https://bootswatch.com/3/](https://bootswatch.com/3/)。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-235">In your browser, go to [https://bootswatch.com/3/](https://bootswatch.com/3/).</span></span>
6. <span data-ttu-id="0e7d1-236">滚动浏览器窗口，直到看到 "Cerulean" 主题。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-236">Scroll the browser window until you see the Cerulean theme.</span></span> 

    ![UI 和 Cerulean 主题](ui_and_navigation/_static/image5.png)
7. <span data-ttu-id="0e7d1-238">将*启动 .css*文件和文件*启动*文件都下载到*Content*文件夹中。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-238">Download both the *bootstrap.css* file and the *bootstrap.min.css* file to the *Content* folder.</span></span> <span data-ttu-id="0e7d1-239">使用之前打开的 "**文件资源管理器**" 窗口中显示的内容文件夹的路径。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-239">Use the path to the content folder that is displayed in the **File Explorer** window that you previously opened.</span></span>
8. <span data-ttu-id="0e7d1-240">在**Visual Studio**中**解决方案资源管理器**的顶部，选择 "**显示所有文件**" 选项以显示 "内容" 文件夹中的新文件。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-240">In **Visual Studio** at the top of **Solution Explorer**, select the **Show All Files** option to display the new files in the Content folder.</span></span> 

    ![UI 和导航-解决方案资源管理器](ui_and_navigation/_static/image6.png)

   <span data-ttu-id="0e7d1-242">你将在**Content**文件夹中看到两个新的 CSS 文件，但请注意，每个文件名旁边的图标都将灰显。这意味着该文件尚未添加到项目。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-242">You will see the two new CSS files in the **Content** folder, but notice that the icon next to each file name is grayed out. This means that the file has not yet been added to the project.</span></span>
9. <span data-ttu-id="0e7d1-243">右键单击 "*启动*" 和 *"文件"* ，然后选择 "**包括在项目中**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-243">Right-click the *bootstrap.css* and the *bootstrap.min.css* files and select **Include In Project**.</span></span>   
   <span data-ttu-id="0e7d1-244">稍后在本教程中运行 Wingtip 玩具应用程序时，将显示新的 UI。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-244">When you run the Wingtip Toys application later in this tutorial, the new UI will be displayed.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="0e7d1-245">ASP.NET Web 应用程序模板使用项目*根目录中的文件来*存储启动 CSS 文件的路径。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-245">The ASP.NET Web Application template uses the *Bundle.config* file at the root of the project to store the path of the Bootstrap CSS files.</span></span>

### <a name="modifying-the-default-navigation"></a><span data-ttu-id="0e7d1-246">修改默认导航</span><span class="sxs-lookup"><span data-stu-id="0e7d1-246">Modifying the Default Navigation</span></span>

<span data-ttu-id="0e7d1-247">对于应用程序中的每个页面，都可以通过更改 "*网站母版页*" 中的未排序导航列表元素来修改默认导航。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-247">The default navigation for every page in the application can be modified by changing the unordered navigation list element that's in the *Site.Master* page.</span></span>

1. <span data-ttu-id="0e7d1-248">在**解决方案资源管理器**中，找到并打开 "*网站母版页*"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-248">In **Solution Explorer**, locate and open the *Site.Master* page.</span></span>
2. <span data-ttu-id="0e7d1-249">将以黄色突出显示的其他导航链接添加到下面显示的未排序列表中：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-249">Add the additional navigation link highlighted in yellow to the unordered list shown below:</span></span>   

    [!code-html[Main](ui_and_navigation/samples/sample5.html?highlight=5)]

<span data-ttu-id="0e7d1-250">如以上 HTML 所示，你修改了每个行项 `<li>` 包含带有 link `href` 特性的定位点标记 `<a>`。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-250">As you can see in the above HTML, you modified each line item `<li>` containing an anchor tag `<a>` with a link `href` attribute.</span></span> <span data-ttu-id="0e7d1-251">每个 `href` 指向 Web 应用程序中的某个页面。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-251">Each `href` points to a page in the Web application.</span></span> <span data-ttu-id="0e7d1-252">在浏览器中，当用户单击其中一个链接（如**Products**）时，他们将导航到 `href` 中包含的页面（如**ProductList**）。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-252">In the browser, when a user clicks on one of these links (such as **Products**), they will navigate to the page contained in the `href` (such as **ProductList.aspx**).</span></span> <span data-ttu-id="0e7d1-253">在本教程结束时，将运行该应用程序。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-253">You will run the application at the end of this tutorial.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="0e7d1-254">颚化符（`~`）用于指定 `href` 路径从项目的根开始。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-254">The tilde (`~`) character is used to specify that the `href` path begins at the root of the project.</span></span>

### <a name="adding-a-data-control-to-display-navigation-data"></a><span data-ttu-id="0e7d1-255">添加数据控件以显示导航数据</span><span class="sxs-lookup"><span data-stu-id="0e7d1-255">Adding a Data Control to Display Navigation Data</span></span>

<span data-ttu-id="0e7d1-256">接下来，您将添加一个控件以显示数据库中的所有类别。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-256">Next, you'll add a control to display all of the categories from the database.</span></span> <span data-ttu-id="0e7d1-257">每个类别都将充当*ProductList*页面的链接。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-257">Each category will act as a link to the *ProductList.aspx* page.</span></span> <span data-ttu-id="0e7d1-258">当用户在浏览器中单击某个类别链接时，他们将导航到 "产品" 页，并且仅查看与所选类别关联的产品。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-258">When a user clicks on a category link in the browser, they will navigate to the products page and see only the products associated with the selected category.</span></span>

<span data-ttu-id="0e7d1-259">使用**ListView**控件可以显示数据库中包含的所有类别。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-259">You'll use a **ListView** control to display all the categories contained in the database.</span></span> <span data-ttu-id="0e7d1-260">向母版页添加**ListView**控件：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-260">To add a **ListView** control to the master page:</span></span>

1. <span data-ttu-id="0e7d1-261">在 "*网站母版页*" 页中，将以下突出显示的 `<div>` 元素添加到 `<div>` 元素**之后**，该元素包含之前添加的 `id="TitleContent"`：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-261">In the *Site.Master* page, add the following highlighted `<div>` element **after** the `<div>` element containing the `id="TitleContent"` that you added earlier:</span></span>  

    [!code-aspx[Main](ui_and_navigation/samples/sample6.aspx?highlight=7-21)]

<span data-ttu-id="0e7d1-262">此代码将显示数据库中的所有类别。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-262">This code will display all the categories from the database.</span></span> <span data-ttu-id="0e7d1-263">**ListView**控件将每个类别名称显示为链接文本，并包含指向*ProductList*页面的链接，该链接包含包含类别的 `ID` 的查询字符串值。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-263">The **ListView** control displays each category name as link text and includes a link to the *ProductList.aspx* page with a query-string value containing the `ID` of the category.</span></span> <span data-ttu-id="0e7d1-264">通过设置**ListView**控件中的 `ItemType` 属性，可在 `ItemTemplate` 节点内使用数据绑定表达式 `Item`，并将该控件变成强类型。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-264">By setting the `ItemType` property in the **ListView** control, the data-binding expression `Item` is available within the `ItemTemplate` node and the control becomes strongly typed.</span></span> <span data-ttu-id="0e7d1-265">您可以使用 IntelliSense 选择 `Item` 对象的详细信息，例如指定 `CategoryName`。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-265">You can select details of the `Item` object using IntelliSense, such as specifying the `CategoryName`.</span></span> <span data-ttu-id="0e7d1-266">此代码包含在标记数据绑定表达式的容器 `<%#: %>` 中。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-266">This code is contained inside the container `<%#: %>` that marks a data-binding expression.</span></span> <span data-ttu-id="0e7d1-267">通过添加（:)在 `<%#` 前缀的末尾，数据绑定表达式的结果是 HTML 编码的。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-267">By adding the (:) to the end of the `<%#` prefix, the result of the data-binding expression is HTML-encoded.</span></span> <span data-ttu-id="0e7d1-268">如果结果是 HTML 编码的，则您的应用程序会受到更好的保护，以防止出现跨站点脚本注入（XSS）和 HTML 注入攻击。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-268">When the result is HTML-encoded, your application is better protected against cross-site script injection (XSS) and HTML injection attacks.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="0e7d1-269">**提示**</span><span class="sxs-lookup"><span data-stu-id="0e7d1-269">**Tip**</span></span>
> 
> <span data-ttu-id="0e7d1-270">当你在开发过程中键入内容时，你可以确定是否找到了对象的有效成员，因为强类型数据控件显示基于 IntelliSense 的可用成员。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-270">When you add code by typing during development, you can be certain that a valid member of an object is found because strongly typed data controls show the available members based on IntelliSense.</span></span> <span data-ttu-id="0e7d1-271">IntelliSense 在键入代码时提供了上下文适当的代码选项，如属性、方法和对象。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-271">IntelliSense offers context-appropriate code choices as you type code, such as properties, methods, and objects.</span></span>

<span data-ttu-id="0e7d1-272">在下一步中，你将实现 `GetCategories` 方法来检索数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-272">In the next step, you will implement the `GetCategories` method to retrieve data.</span></span>

### <a name="linking-the-data-control-to-the-database"></a><span data-ttu-id="0e7d1-273">将数据控件链接到数据库</span><span class="sxs-lookup"><span data-stu-id="0e7d1-273">Linking the Data Control to the Database</span></span>

<span data-ttu-id="0e7d1-274">你需要将数据控件链接到数据库，然后才能在数据控件中显示数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-274">Before you can display data in the data control, you need to link the data control to the database.</span></span> <span data-ttu-id="0e7d1-275">若要创建该链接，可以修改*Site.Master.cs*文件的隐藏代码。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-275">To make the link, you can modify the code behind of the *Site.Master.cs* file.</span></span>

1. <span data-ttu-id="0e7d1-276">在**解决方案资源管理器**中，右键单击 "*站点" 母版页*，然后单击 "**查看代码**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-276">In **Solution Explorer**, right-click the *Site.Master* page and then click **View Code**.</span></span> <span data-ttu-id="0e7d1-277">*Site.Master.cs*文件将在编辑器中打开。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-277">The *Site.Master.cs* file is opened in the editor.</span></span>
2. <span data-ttu-id="0e7d1-278">在*Site.Master.cs*文件的开头附近，添加另外两个命名空间，以使所有包含的命名空间如下所示：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-278">Near the beginning of the *Site.Master.cs* file, add two additional namespaces so that all the included namespaces appear as follows:</span></span>  

    [!code-csharp[Main](ui_and_navigation/samples/sample7.cs?highlight=8-9)]
3. <span data-ttu-id="0e7d1-279">将突出显示的 `GetCategories` 方法添加到 `Page_Load` 事件处理程序之后，如下所示：</span><span class="sxs-lookup"><span data-stu-id="0e7d1-279">Add the highlighted `GetCategories` method after the `Page_Load` event handler as follows:</span></span>  

    [!code-csharp[Main](ui_and_navigation/samples/sample8.cs?highlight=6-11)]

<span data-ttu-id="0e7d1-280">当在浏览器中加载使用母版页的任何页面时，将执行上述代码。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-280">The above code is executed when any page that uses the master page is loaded in the browser.</span></span> <span data-ttu-id="0e7d1-281">你之前在本教程中添加的 `ListView` 控件（名为 "categoryList"）使用模型绑定来选择数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-281">The `ListView` control (named "categoryList") that you added earlier in this tutorial uses model binding to select data.</span></span> <span data-ttu-id="0e7d1-282">在 `ListView` 控件的标记中，将控件的 `SelectMethod` 属性设置为 `GetCategories` 方法，如上所示。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-282">In the markup of the `ListView` control you set the control's `SelectMethod` property to the `GetCategories` method, shown above.</span></span> <span data-ttu-id="0e7d1-283">`ListView` 控件在页面生命周期中的适当时间调用 `GetCategories` 方法，并自动绑定返回的数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-283">The `ListView` control calls the `GetCategories` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="0e7d1-284">在下一教程中，你将了解有关绑定数据的详细信息。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-284">You will learn more about binding data in the next tutorial.</span></span>

### <a name="running-the-application-and-creating-the-database"></a><span data-ttu-id="0e7d1-285">运行应用程序并创建数据库</span><span class="sxs-lookup"><span data-stu-id="0e7d1-285">Running the Application and Creating the Database</span></span>

<span data-ttu-id="0e7d1-286">在本教程的前面部分中，已创建一个名为 "ProductDatabaseInitializer" 的初始值设定项类，并在*global.asax.cs*文件中指定此类。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-286">Earlier in this tutorial series you created an initializer class (named "ProductDatabaseInitializer") and specified this class in the *global.asax.cs* file.</span></span> <span data-ttu-id="0e7d1-287">首次运行应用程序时，实体框架将生成数据库，因为*global.asax.cs*文件中包含的 `Application_Start` 方法将调用初始值设定项类。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-287">The Entity Framework will generate the database when the application is run the first time because the `Application_Start` method contained in the *global.asax.cs* file will call the initializer class.</span></span> <span data-ttu-id="0e7d1-288">初始值设定项类将使用之前在本教程系列中添加的模型类（`Category` 和 `Product`）来创建数据库。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-288">The initializer class will use the model classes (`Category` and `Product`) that you added earlier in this tutorial series to create the database.</span></span>

1. <span data-ttu-id="0e7d1-289">在**解决方案资源管理器**中，右键单击 " *default.aspx* " 页，然后选择 "**设为起始页**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-289">In **Solution Explorer**, right-click the *Default.aspx* page and select **Set As Start Page**.</span></span>
2. <span data-ttu-id="0e7d1-290">在 Visual Studio 中，按**F5**。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-290">In Visual Studio press **F5**.</span></span>   
 <span data-ttu-id="0e7d1-291">在第一次运行期间设置所有内容需要花费一些时间。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-291">It will take a little time to set everything up during this first run.</span></span>   
    <span data-ttu-id="0e7d1-292">![UI 和导航浏览器窗口](ui_and_navigation/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="0e7d1-292">![UI and Navigation - Browser Windows](ui_and_navigation/_static/image7.png)</span></span>  
 <span data-ttu-id="0e7d1-293">运行应用程序时，将编译该应用程序，并在*应用\_Data*文件夹中创建名为 wingtiptoys 的数据库 *。*</span><span class="sxs-lookup"><span data-stu-id="0e7d1-293">When you run the application, the application will be compiled and the database named *wingtiptoys.mdf* will be created in the *App\_Data* folder.</span></span> <span data-ttu-id="0e7d1-294">在浏览器中，会看到一个类别导航菜单。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-294">In the browser, you will see a category navigation menu.</span></span> <span data-ttu-id="0e7d1-295">此菜单是从数据库中检索类别生成的。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-295">This menu was generated by retrieving the categories from the database.</span></span> <span data-ttu-id="0e7d1-296">在下一教程中，你将实现导航。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-296">In the next tutorial, you will implement the navigation.</span></span>
3. <span data-ttu-id="0e7d1-297">关闭浏览器以停止正在运行的应用程序。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-297">Close the browser to stop the running application.</span></span>

### <a name="reviewing-the-database"></a><span data-ttu-id="0e7d1-298">查看数据库</span><span class="sxs-lookup"><span data-stu-id="0e7d1-298">Reviewing the Database</span></span>

<span data-ttu-id="0e7d1-299">打开 web.config*文件，* 并查看 "连接字符串" 部分。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-299">Open the *Web.config* file and look at the connection string section.</span></span> <span data-ttu-id="0e7d1-300">您可以看到，连接字符串中的 `AttachDbFilename` 值指向 Web 应用程序项目的 `DataDirectory`。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-300">You can see that the `AttachDbFilename` value in the connection string points to the `DataDirectory` for the Web application project.</span></span> <span data-ttu-id="0e7d1-301">`|DataDirectory|` 的值是一个保留值，表示项目中的*应用\_Data*文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-301">The value `|DataDirectory|` is a reserved value that represents the *App\_Data* folder in the project.</span></span> <span data-ttu-id="0e7d1-302">此文件夹是从实体类创建的数据库所在的位置。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-302">This folder is where the database that was created from your entity classes is located.</span></span>

[!code-xml[Main](ui_and_navigation/samples/sample9.xml)]

> [!NOTE] 
> 
> <span data-ttu-id="0e7d1-303">如果*应用\_Data*文件夹不可见，或者如果文件夹为空，请选择 "**刷新**" 图标，然后选择 "**解决方案资源管理器**" 窗口顶部的 "**显示所有文件**" 图标。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-303">If the *App\_Data* folder is not visible or if the folder is empty, select the **Refresh** icon and then the **Show All Files** icon at the top of the **Solution Explorer** window.</span></span> <span data-ttu-id="0e7d1-304">若要显示所有可用的图标，可能需要扩展**解决方案资源管理器**窗口的宽度。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-304">Expanding the width of the **Solution Explorer** windows may be required to show all available icons.</span></span>

<span data-ttu-id="0e7d1-305">现在，可以使用 "**服务器资源管理器**" 窗口检查*wingtiptoys*数据库文件中包含的数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-305">Now you can inspect the data contained in the *wingtiptoys.mdf* database file by using the **Server Explorer** window.</span></span>

1. <span data-ttu-id="0e7d1-306">展开*应用\_Data*文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-306">Expand the *App\_Data* folder.</span></span> <span data-ttu-id="0e7d1-307">如果*应用\_Data*文件夹不可见，请参阅上述说明。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-307">If the *App\_Data* folder is not visible, see the note above.</span></span>
2. <span data-ttu-id="0e7d1-308">如果*wingtiptoys*数据库文件不可见，请选择 "**刷新**" 图标，然后选择 "**解决方案资源管理器**" 窗口顶部的 "**显示所有文件**" 图标。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-308">If the *wingtiptoys.mdf* database file is not visible, select the **Refresh** icon and then the **Show All Files** icon at the top of the **Solution Explorer** window.</span></span>
3. <span data-ttu-id="0e7d1-309">右键单击*wingtiptoys*数据库文件，然后选择 "**打开**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-309">Right-click the *wingtiptoys.mdf* database file and select **Open**.</span></span>  
    <span data-ttu-id="0e7d1-310">将显示**服务器资源管理器**。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-310">**Server Explorer** is displayed.</span></span> 

    ![UI 和导航-服务器资源管理器](ui_and_navigation/_static/image8.png)
4. <span data-ttu-id="0e7d1-312">展开 "*表*" 文件夹。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-312">Expand the *Tables* folder.</span></span>
5. <span data-ttu-id="0e7d1-313">右键单击**Products**表，然后选择 "**显示表数据**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-313">Right-click the **Products**table and select **Show Table Data**.</span></span>  
 <span data-ttu-id="0e7d1-314">将显示**Products**表。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-314">The **Products** table is displayed.</span></span> 

    ![UI 和导航产品表](ui_and_navigation/_static/image9.png)
6. <span data-ttu-id="0e7d1-316">使用此视图可以手动查看和修改**Products**表中的数据。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-316">This view lets you see and modify the data in the **Products** table by hand.</span></span>
7. <span data-ttu-id="0e7d1-317">关闭 " **Products**表" 窗口。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-317">Close the **Products** table window.</span></span>
8. <span data-ttu-id="0e7d1-318">在**服务器资源管理器**中，再次右键单击**Products**表，然后选择 "**打开表定义**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-318">In the **Server Explorer**, right-click the **Products** table again and select **Open Table Definition**.</span></span>  
 <span data-ttu-id="0e7d1-319">将显示**Products**表的数据设计。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-319">The data design for the **Products** table is displayed.</span></span> 

    ![UI 和导航产品设计](ui_and_navigation/_static/image10.png)
9. <span data-ttu-id="0e7d1-321">在**t-sql**选项卡中，你将看到用于创建表的 SQL DDL 语句。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-321">In the **T-SQL** tab you will see the SQL DDL statement that was used to create the table.</span></span> <span data-ttu-id="0e7d1-322">你还可以使用 "**设计**" 选项卡中的 UI 来修改架构。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-322">You can also use the UI in the **Design** tab to modify the schema.</span></span>
10. <span data-ttu-id="0e7d1-323">在**服务器资源管理器**中，右键单击 " **WingtipToys**数据库"，然后选择 "**关闭连接**"。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-323">In the **Server Explorer**, right-click **WingtipToys** database and select **Close Connection**.</span></span>   
 <span data-ttu-id="0e7d1-324">通过从 Visual Studio 中分离数据库，可以在本系列教程的后面部分修改数据库架构。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-324">By detaching the database from Visual Studio, the database schema will be able to be modified later in this tutorial series.</span></span>
11. <span data-ttu-id="0e7d1-325">选择**服务器资源管理器**窗口底部的 "**解决方案资源管理器**" 选项卡，返回到**解决方案资源管理器**。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-325">Return to **Solution Explorer**by selecting the **Solution Explorer** tab at the bottom of the **Server Explorer** window.</span></span>

## <a name="summary"></a><span data-ttu-id="0e7d1-326">总结</span><span class="sxs-lookup"><span data-stu-id="0e7d1-326">Summary</span></span>

<span data-ttu-id="0e7d1-327">在本系列教程中，你添加了一些基本的 UI、图形、页面和导航。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-327">In this tutorial of the series you have added some basic UI, graphics, pages, and navigation.</span></span> <span data-ttu-id="0e7d1-328">此外，还运行了 Web 应用程序，该应用程序从你在上一教程中添加的数据类创建了数据库。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-328">Additionally, you ran the Web application, which created the database from the data classes that you added in the previous tutorial.</span></span> <span data-ttu-id="0e7d1-329">您还可以通过直接查看数据库来查看数据库的*Products*表的内容。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-329">You also viewed the contents of the *Products* table of the database by viewing the database directly.</span></span> <span data-ttu-id="0e7d1-330">在下一教程中，您将显示数据库中的数据项和详细信息。</span><span class="sxs-lookup"><span data-stu-id="0e7d1-330">In the next tutorial, you'll display data items and details from the database.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="0e7d1-331">其他资源</span><span class="sxs-lookup"><span data-stu-id="0e7d1-331">Additional Resources</span></span>

<span data-ttu-id="0e7d1-332">[编程 ASP.NET 网页  简介](https://msdn.microsoft.com/library/ms178125.aspx)</span><span class="sxs-lookup"><span data-stu-id="0e7d1-332">[Introduction to Programming ASP.NET Web Pages](https://msdn.microsoft.com/library/ms178125.aspx) </span></span>  
<span data-ttu-id="0e7d1-333">[ASP.NET Web 服务器控件概述](https://msdn.microsoft.com/library/zsyt68f1.aspx) </span><span class="sxs-lookup"><span data-stu-id="0e7d1-333">[ASP.NET Web Server Controls Overview](https://msdn.microsoft.com/library/zsyt68f1.aspx) </span></span>  
[<span data-ttu-id="0e7d1-334">CSS 教程</span><span class="sxs-lookup"><span data-stu-id="0e7d1-334">CSS Tutorial</span></span>](http://www.w3schools.com/css/default.asp)

> [!div class="step-by-step"]
> <span data-ttu-id="0e7d1-335">[上一页](create_the_data_access_layer.md)
> [下一页](display_data_items_and_details.md)</span><span class="sxs-lookup"><span data-stu-id="0e7d1-335">[Previous](create_the_data_access_layer.md)
[Next](display_data_items_and_details.md)</span></span>
